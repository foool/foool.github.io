<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2017<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>To<span style="padding-left:9.5px"></span>Workspace<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>file.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>standard<span style="padding-left:9.5px"></span>.mat<span style="padding-left:9.5px"></span>file
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>logging.
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>In<span style="padding-left:9.5px"></span>order<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>both
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>ToWorkspace<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>SignalToWorkspace,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>wildcard<span style="padding-left:9.5px"></span>must<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>used.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_implements">%implements</span> * "C"
 <br>&nbsp; <br><span class="tlc_include">%include</span> "<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html">logging_sup.tlc</a>"
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>BlockInstanceSetup<span style="padding-left:9.5px"></span>=================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Set<span style="padding-left:9.5px"></span>expression<span style="padding-left:9.5px"></span>folding<span style="padding-left:9.5px"></span>compliance
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="BlockInstanceSetup" class="tlc_func">BlockInstanceSetup</a>(block, system) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/block_api.html#LibBlockSetIsExpressionCompliant">LibBlockSetIsExpressionCompliant</a>(block)>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% BlockInstanceSetup</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateAobHierarchy<span style="padding-left:9.5px"></span>=================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>creates<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>full<span style="padding-left:9.5px"></span>AoB<span style="padding-left:9.5px"></span>hierarchy<span style="padding-left:9.5px"></span>tree.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateAobHierarchy" class="tlc_func">CreateAobHierarchy</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> port0DTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.NumDims > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = ParamSettings.NumDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = ParamSettings.Dims
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pAobHierarchy = "pAobHierarchyNode0"
 <br>&nbsp;&nbsp;void *%<<span>pAobHierarchy</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;rtwAobHierarchyCreateRootNode(&amp;%<<span>pAobHierarchy</span>>);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statements
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateAobHierarchyRecursion">CreateAobHierarchyRecursion</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;port0DTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pAobHierarchy, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;nodeIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nNodes = retValsLowerLevel.val
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nNodes = %<<span>nNodes</span>> + 1
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;rtwAobHierarchyVerifyNNodes(%<<span>pAobHierarchy</span>>, %<<span>nNodes</span>>);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer)
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals { val pAobHierarchy; statements statementsBuffer }
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateAobHierarchy</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateAobHierarchyRecursion<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>recursive<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>CreateAobHierarchy.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateAobHierarchyRecursion" class="tlc_func">CreateAobHierarchyRecursion</a>( ...
 <br>&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;parentNodeName, ...
 <br>&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;nodeIdx ...
 <br>&nbsp;&nbsp;) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isNvBus = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dTypeId)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isNvBus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayPrefix = "aobDimensions"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDimsArray">CreateDimsArray</a>(nDims, dims, dimsArrayPrefix, nodeIdx)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchySetDim(%<<span>parentNodeName</span>>, %<<span>nDims</span>>, %<<span>dimsArrayName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeNumElements">LibDataTypeNumElements</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDataTypeId">LibDataTypeElementDataTypeId</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[hierInfoIdx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childSignalLabel = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[childHierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childNDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementNumDimensions">LibDataTypeElementNumDimensions</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDimensions">LibDataTypeElementDimensions</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = %<<span>nodeIdx</span>> + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeName = "pAobHierarchyNode" + "%<<span>nodeIdx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>nodeName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchyCreateNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childSignalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;%<<span>nodeName</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateAobHierarchyRecursion">CreateAobHierarchyRecursion</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childNDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childHierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodeIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchyAddChild(%<<span>parentNodeName</span>>, %<<span>nodeName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer)
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals {val nodeIdx; statements statementsBuffer}
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateAobHierarchyRecursion</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateDimsArray<span style="padding-left:9.5px"></span>====================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>defines<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>array.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateDimsArray" class="tlc_func">CreateDimsArray</a>(nDims, dims, prefix, idx) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = prefix + "%<<span>idx</span>>"
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(nDims, dims, dimsArrayName)>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> dimsArrayName
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateDimsArray</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateOffsets<span style="padding-left:9.5px"></span>=========================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>main<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>CreateDimsArray<span style="padding-left:9.5px"></span>processing.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateOffsets" class="tlc_func">CreateOffsets</a>(parentDatatypeId, numChildren) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offsets = "uint_T offsets[%<<span>numChildren</span>>] = {"
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = numChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offVal = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementOffset">LibDataTypeElementOffset</a>(parentDatatypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offsets = offsets + "%<<span>offVal</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> childNo != numChildren-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offsets = offsets + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offsets = offsets + "};"
 <br>&nbsp;&nbsp;%<<span>offsets</span>>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateDims</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateDims<span style="padding-left:9.5px"></span>=========================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>main<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>CreateDimsArray<span style="padding-left:9.5px"></span>processing.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateDims" class="tlc_func">CreateDims</a>(nDims, dims, dimsArrayName) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> nDims == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;uint_T %<<span>dimsArrayName</span>>[1] = {%<dims[0]>};
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = "uint_T %<<span>dimsArrayName</span>>[%<<span>nDims</span>>] = {"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = nDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "%<dims[dimsIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dimsIdx != nDims-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsInit</span>>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateDims</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateSignalProbe<span style="padding-left:9.5px"></span>==================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>crates<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>probe<span style="padding-left:9.5px"></span>object.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateSignalProbe" class="tlc_func">CreateSignalProbe</a>( ...
 <br>&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;leadIdx ...
 <br>&nbsp;&nbsp;) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Process dims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayPrefix = "signalDimensions"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDimsArray">CreateDimsArray</a>(nDims, dims, dimsArrayPrefix, leadIdx)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Process datatype</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% built-in class name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> typeName == "boolean"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "logical"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% fixpt parameters</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#fxpIsDataTypeFixPt">fxpIsDataTypeFixPt</a>(curDT) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "fixed-point"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp    = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#fxpIsDataTypeScaledDouble">fxpIsDataTypeScaledDouble</a>(curDT)     
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "scaled-double"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp    = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_DataTypeIsDouble">FixPt_DataTypeIsDouble</a>(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "double"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> FixPt_DatatTypeIsSingle(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "single"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> FixPt_DatatTypeIsBoolean(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "logical"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_isSigned = curDT.IsSigned
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_wordLen = curDT.RequiredBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_slope = curDT.FracSlope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_fixedExp = curDT.FixedExp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_bias = curDT.Bias
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% enum parameters</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Create SignalProbe call</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isFxp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statementsBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionAddElementFxp(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollectionName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>signalName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxDataPoints</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>typeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_isSigned</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_wordLen</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_slope</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_fixedExp</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_bias</span>> ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statementsBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storedBuiltInTypeName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumTypeStoredAsInt">LibIsEnumTypeStoredAsInt</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = 6 <span class="tlc_comment">%% int32</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetEnumTypeStorageType">LibGetEnumTypeStorageType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storedBuiltInTypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(storageID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statementsBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionAddElement(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollectionName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>signalName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxDataPoints</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>typeName</span>>",...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>storedBuiltInTypeName</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statementsBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> statementsBuffer
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateSignalProbe</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="getParamSettingsDatasetName" class="tlc_func">getParamSettingsDatasetName</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_logsout"
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> datasetName
 <br><span class="tlc_fkw">%endfunction</span> 
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateSignalProbeCollectionAob<span style="padding-left:9.5px"></span>=====================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>creates<span style="padding-left:9.5px"></span>SignalProbeCollection<span style="padding-left:9.5px"></span>object<span style="padding-left:9.5px"></span>including<span style="padding-left:9.5px"></span>all
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SignalProbe<span style="padding-left:9.5px"></span>elements.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateSignalProbeCollectionAob" class="tlc_func">CreateSignalProbeCollectionAob</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#getParamSettingsDatasetName">getParamSettingsDatasetName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> elementName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Logged port index</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(ParamSettings.ConnectedPortIdx[0] > 0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% For outport logging dataset, use logPortIdx for element order </span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> datasetMetadataKey == "DATASET_OUTPORT_LOGGING" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ElementOrder[0]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = %<<span>mapInfo</span>>.mmi.InstanceMap.fullPath; 
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = "";
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pSignalProbeCollectionName = "pSignalProbeCollection"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pOSigstreamManagerName = "pOSigstreamManager"
 <br>&nbsp;&nbsp;void *%<<span>pSignalProbeCollectionName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;void *%<<span>pOSigstreamManagerName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;%<<span>pOSigstreamManagerName</span>> = rt_GetOSigstreamManager();
 <br>&nbsp;&nbsp;rtwSignalProbeCollectionCreateInstance(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datasetMetadataKey</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datasetName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>elementName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pathToTopModel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pOSigstreamManagerName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;%<<span>pSignalProbeCollectionName</span>>
 <br>&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> port0DTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexity = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> width = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalWidth">LibBlockInputSignalWidth</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.NumDims > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = ParamSettings.NumDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = ParamSettings.Dims
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(ParamSettings.SignalNames)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = <span class="tlc_bifunc">STRING</span>(ParamSettings.SignalNames[0])
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = ""
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "linear"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "zoh"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation    = ParamSettings.Decimation[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxDataPoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLog">getASCIIEscapedUnitsToLog</a>(0)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateSignalProbeCollectionRecursionAob">CreateSignalProbeCollectionRecursionAob</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;port0DTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;width, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nLeaves = retValsLowerLevel.val
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;rtwSignalProbeCollectionVerifyNLeaves(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollectionName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nLeaves</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer) 
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals {val pSignalProbeCollectionName; statements statementsBuffer}  
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateSignalProbeCollectionAob</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateSignalProbeCollectionRecursionAob<span style="padding-left:9.5px"></span>============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>recursive<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>SignalProbeCollection,<span style="padding-left:9.5px"></span>where<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>adding<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SignalProbe<span style="padding-left:9.5px"></span>elements<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>generated.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateSignalProbeCollectionRecursionAob" class="tlc_func">CreateSignalProbeCollectionRecursionAob</a>( ...
 <br>&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;width, ...
 <br>&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isNvBus = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dTypeId)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !isNvBus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hierInfoIdx >= 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalLabel = SignalHierLoggingInfo[hierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalLabel = signalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statements = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateSignalProbe">CreateSignalProbe</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signalLabel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = leafIdx + 1
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeNumElements">LibDataTypeNumElements</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimIdx = %<<span>width</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDataTypeId">LibDataTypeElementDataTypeId</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childWidth = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementWidth">LibDataTypeElementWidth</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childNDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementNumDimensions">LibDataTypeElementNumDimensions</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDimensions">LibDataTypeElementDimensions</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childComplexity = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementIsComplex">LibDataTypeElementIsComplex</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childSignalName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementName">LibDataTypeElementName</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childUnits = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLogFromBusObject">getASCIIEscapedUnitsToLogFromBusObject</a>(dTypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[hierInfoIdx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateSignalProbeCollectionRecursionAob">CreateSignalProbeCollectionRecursionAob</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childWidth, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childNDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childComplexity, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childUnits, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childHierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer) 
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals { val leafIdx; statements statementsBuffer }
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateSignalProbeCollectionRecursionAob</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateVirtualBusHierarchyAndSignalProbeCollection<span style="padding-left:9.5px"></span>==================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>creates<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>full<span style="padding-left:9.5px"></span>hierarchy<span style="padding-left:9.5px"></span>tree<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SignalProbeCollection<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>virtual<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>logging.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateVirtualBusHierarchyAndSignalProbeCollection" class="tlc_func">CreateVirtualBusHierarchyAndSignalProbeCollection</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% AobHierarchy settings</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = "aobDimensions"
 <br>&nbsp;&nbsp;uint_T %<<span>dimsArrayName</span>>[1] = { 1 };
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pAobHierarchyName = "pAobHierarchyNode0"
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% SignalProbeCollection settings</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#getParamSettingsDatasetName">getParamSettingsDatasetName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> elementName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Logged port index</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(ParamSettings.ConnectedPortIdx[0] > 0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% For outport logging dataset, use logPortIdx for element order </span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> datasetMetadataKey == "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ElementOrder[0]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = %<<span>mapInfo</span>>.mmi.InstanceMap.fullPath; 
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = "";
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pSignalProbeCollectionName = "pSignalProbeCollection"  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pOSigstreamManagerName = "pOSigstreamManager"
 <br>&nbsp;&nbsp;void *%<<span>pAobHierarchyName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;void *%<<span>pSignalProbeCollectionName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;void *%<<span>pOSigstreamManagerName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;rtwAobHierarchyCreateRootNode(&amp;%<<span>pAobHierarchyName</span>>);
 <br>&nbsp;&nbsp;%<<span>pOSigstreamManagerName</span>> = rt_GetOSigstreamManager();
 <br>&nbsp;&nbsp;rtwSignalProbeCollectionCreateInstance(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datasetMetadataKey</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datasetName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>elementName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pathToTopModel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pOSigstreamManagerName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;%<<span>pSignalProbeCollectionName</span>>
 <br>&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(ParamSettings.SignalNames)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = <span class="tlc_bifunc">STRING</span>(ParamSettings.SignalNames[0])
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = ""
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation    = ParamSettings.Decimation[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxDataPoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = 0
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion">CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pAobHierarchyName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dimsArrayName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;nodeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeLeafIdx = retValsLowerLevel.val
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nNodes = %<nodeLeafIdx[0]> + 1
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nLeaves = %<nodeLeafIdx[1]>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;rtwAobHierarchyVerifyNNodes(%<<span>pAobHierarchyName</span>>, %<<span>nNodes</span>>);
 <br>&nbsp;&nbsp;rtwSignalProbeCollectionVerifyNLeaves(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollectionName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nLeaves</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;rtwSignalProbeCollectionSetAobHierarchy( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollectionName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pAobHierarchyName</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer) 
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals {val pSignalProbeCollectionName; statements statementsBuffer}
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateVirtualBusHierarchyAndSignalProbeCollection</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion<span style="padding-left:9.5px"></span>=========
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>recursive<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>CreateVirtualBusHierarchyAndSignalProbeCollection.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion" class="tlc_func">CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion</a>( ...
 <br>&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;parentNodeName, ...
 <br>&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;hierInfoIdx, ...
 <br>&nbsp;&nbsp;dimsArrayName, ...
 <br>&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;nodeIdx, ...
 <br>&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>(SignalHierLoggingInfo[hierInfoIdx].NumChildren)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = SignalHierLoggingInfo[hierInfoIdx].NumChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> nChildren == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hierInfoIdx >= 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalLabel = SignalHierLoggingInfo[hierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalLabel = signalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(leafIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(leafIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(leafIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexity = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(leafIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[leafIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLog">getASCIIEscapedUnitsToLog</a>(leafIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "linear"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "zoh"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statements = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateSignalProbe">CreateSignalProbe</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signalLabel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = leafIdx + 1    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeLeafIdx = [%<<span>nodeIdx</span>>; %<<span>leafIdx</span>>]
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchySetDim(%<<span>parentNodeName</span>>, 1, %<<span>dimsArrayName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeLeafIdx = [%<<span>nodeIdx</span>>; %<<span>leafIdx</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[hierInfoIdx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childSignalLabel = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[childHierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = nodeLeafIdx[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> leafIdx = nodeLeafIdx[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeIdx = %<<span>nodeIdx</span>> + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeName = "pAobHierarchyNode" + "%<<span>nodeIdx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>nodeName</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchyCreateNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childSignalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;%<<span>nodeName</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAobHierarchyAddChild(%<<span>parentNodeName</span>>, %<<span>nodeName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion">CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pSignalProbeCollectionName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childHierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimsArrayName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signalName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimation, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nodeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;leafIdx ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nodeLeafIdx = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = <span class="tlc_bifunc">STRING</span>(statementsBuffer) 
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVals {val nodeLeafIdx; statements statementsBuffer}
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVals
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateVirtualBusHierarchyAndSignalProbeCollectionRecursion</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FixPt_Fix2DblConvParams<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>A<span style="padding-left:9.5px"></span>fixpoint<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>double<span style="padding-left:9.5px"></span>conversion<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>completely<span style="padding-left:9.5px"></span>characterized<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>three
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>parameters<span style="padding-left:9.5px"></span>according<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>formula:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>ValueAsDouble<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>Slope<span style="padding-left:9.5px"></span>*<span style="padding-left:9.5px"></span>2^Exp<span style="padding-left:9.5px"></span>*<span style="padding-left:9.5px"></span>ValueAsFixedPoint<span style="padding-left:9.5px"></span>+<span style="padding-left:9.5px"></span>Bias
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>fixed<span style="padding-left:9.5px"></span>point<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>type,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>three<span style="padding-left:9.5px"></span>parameters
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Slope,<span style="padding-left:9.5px"></span>Exp<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>Bias<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>array.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FixPt_Fix2DblConvParams" class="tlc_func">FixPt_Fix2DblConvParams</a>(outDT,inDT) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_DataTypeIsDouble">FixPt_DataTypeIsDouble</a>(outDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%START_ASSERT</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = "Error: The argument outDT must be a double"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errTxt)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%END_ASSERT</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_DataTypeIsFloat">FixPt_DataTypeIsFloat</a>(inDT)  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bitsPerChunk     = LargestIntegerNumBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numOfChunk       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_NumChunks">FixPt_NumChunks</a>(inDT.RequiredBits)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isSigned         = inDT.IsSigned
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% floating point and scaled double</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% These next three members are not used in this case</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bitsPerChunk     = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numOfChunk       = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isSigned         = 0
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fExp   = inDT.FixedExp - outDT.FixedExp
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fSlope = <span class="tlc_bifunc">CAST</span>("Real",inDT.FracSlope) / <span class="tlc_bifunc">CAST</span>("Real",outDT.FracSlope) 
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bias   = ( <span class="tlc_bifunc">CAST</span>("Real",inDT.Bias) - <span class="tlc_bifunc">CAST</span>("Real",outDT.Bias) ) / <span class="tlc_bifunc">CAST</span>("Real",outDT.FracSlope)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVectStr = ["%<<span>bitsPerChunk</span>>", "%<<span>numOfChunk</span>>", "%<<span>isSigned</span>>", "%<<span>fSlope</span>>", "%<<span>fExp</span>>", "%<<span>bias</span>>"]
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVectStr
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br><span class="tlc_fkw">%endfunction</span>  <span class="tlc_comment">%% FixPt_Fix2DblConvParams</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>Start<span style="padding-left:9.5px"></span>=============================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>using<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>standard<span style="padding-left:9.5px"></span>.mat<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>logging<span style="padding-left:9.5px"></span>then<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>out
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>logging<span style="padding-left:9.5px"></span>variable.<span style="padding-left:9.5px"></span>In<span style="padding-left:9.5px"></span>addition,<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>scope
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>constant<span style="padding-left:9.5px"></span>then<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>log<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>once<span style="padding-left:9.5px"></span>here.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SetupRuntimeResources" class="tlc_func">SetupRuntimeResources</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigLogRapidAccel = ParamSettings.SigLogRapidAccel
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> block.Type == "ToWorkspace" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(sigLogRapidAccel == 1 || sigLogRapidAccel == 2)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigLogRapidAccel == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> sigLogRapidAccel == 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#StartSignalStreaming">StartSignalStreaming</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> CodeFormat == "S-Function"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> warnTxt = "ToWorkspace blocks not currently supported " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for S-Function code format.  Block disabled."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibBlockReportWarning">LibBlockReportWarning</a>(block, warnTxt)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging != 0 &amp;&amp; (TargetType == "RT" || isRSim)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name          = <span class="tlc_bifunc">STRING</span>(ParamSettings.VariableName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> name == ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxDataPoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation    = ParamSettings.Decimation[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> symWidth      = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalSymbolicWidth">LibBlockInputSignalSymbolicWidth</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims         = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> symDims       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalSymbolicDimensions">LibBlockInputSignalSymbolicDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isVarDims     = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibGetIsInputPortVarDims">LibGetIsInputPortVarDims</a>(0) <span class="tlc_comment">%%is dimension mode VarDims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeId    = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeLogSupported">LibIsDataTypeLogSupported</a>(sigDTypeId, TLC_TRUE) == TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> warnTxt = "Unable to log data for this block " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"because MAT-File logging is not supported for " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"data type '%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(sigDTypeId)>'."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibBlockReportWarning">LibBlockReportWarning</a>(block, warnTxt)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeEnum  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeEnumFromId">LibGetDataTypeEnumFromId</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logDTypeId    = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibSigToLogDataType">SLibSigToLogDataType</a>(sigDTypeId, tSS_DOUBLE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logDTypeEnum  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeEnumFromId">LibGetDataTypeEnumFromId</a>(logDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cmplx         = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> frameData     = ParamSettings.FrameData
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logVar        = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(LoggedData, "", "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ts            = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockSampleTime">LibBlockSampleTime</a>(block)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr   = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSetStr    = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSizeStr   = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSize      = ConfigSet.TargetBitPerInt/8
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSizeComma = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat == "Array"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> nDims == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T  dimensions[1] = {%<symDims[0]>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = "int_T  dimensions[%<<span>nDims</span>>] = {"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = nDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "%<symDims[dimsIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dimsIdx != nDims-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsInit</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For continguous, fixed-point datatype use an RTWLogDataTypeConvert</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% object for converting from fixed-point to double before logging.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% The alternative is to create a local variable large enough to hold</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% the converted data.  For some video signals, this variable becomes</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% so large that the generated code seg-faults when attempting to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% allocate it.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(sigDTypeId) &amp;&amp; ParamSettings.InputContiguous == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeQ              = "static "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigFixPtDType      = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logFixPtDtype      = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(logDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeConvParams = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#FixPt_Fix2DblConvParams">FixPt_Fix2DblConvParams</a>(logFixPtDtype,sigFixPtDType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> RTWLogDataTypeConvert rt_ToWksDataTypeConvert[] = {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{1, %<<span>logDTypeEnum</span>>, %<<span>sigDTypeEnum</span>>, %<sigDTypeConvParams[0]>, %<sigDTypeConvParams[1]>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<sigDTypeConvParams[2]>, %<sigDTypeConvParams[3]>, %<sigDTypeConvParams[4]>, %<sigDTypeConvParams[5]>}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% "Array" format logging only supports fixed-size signal logging,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% so set currSigDims and currSigDimsSize to NULL, and set logValDims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to NO_LOGVALDIMS</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarCreateWithConvert">SLibGenLogVarCreateWithConvert</a>(logVar, name, logDTypeEnum, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"rt_ToWksDataTypeConvert", 0, cmplx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frameData, symWidth, nDims, "dimensions", "NO_LOGVALDIMS",...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nulldef, nulldef, maxDataPoints, decimation, ts, 1)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>logVar</span>> == %<<span>nulldef</span>>) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% "Array" format logging only supports fixed-size signal logging,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% so set currSigDims and currSigDimsSize to NULL, and set logValDims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to NO_LOGVALDIMS</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarCreate">SLibGenLogVarCreate</a>(logVar, name, logDTypeEnum, 0, cmplx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;frameData, symWidth, nDims, "dimensions", "NO_LOGVALDIMS", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nulldef, nulldef, maxDataPoints, decimation, ts, 1)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>logVar</span>> == %<<span>nulldef</span>>) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> <span class="tlc_comment">%% Structure</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeQ    = "static "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> label    = ParamSettings.Label
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksWidths[]         = {%<<span>symWidth</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksNumDimensions[]  = {%<<span>nDims</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> nDims == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksDimensions[]   = {%<symDims[0]>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isVarDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% current signal dimensions</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetCurrentInputPortDimensions">SLibGetCurrentInputPortDimensions</a>(0, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% actually we don't care if the signal is fixed-size signal</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDims = "rt_ToWksWidths[0]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr = "%<<span>typeQ</span>> void *rt_ToWksCurrSigDims[] ={%<<span>nulldef</span>>};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSetStr = "rt_ToWksCurrSigDims[0] = &amp;%<<span>currSigDims</span>>; /n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSizeStr = %<<span>currSigDimsSize</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = "%<<span>typeQ</span>> int_T  rt_ToWksDimensions[] = {"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr = "%<<span>typeQ</span>> void *rt_ToWksCurrSigDims[] = {"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = nDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSizeStr = currSigDimsSizeStr + currSigDimsSizeComma + "%<<span>currSigDimsSize</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSizeComma = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "%<symDims[dimsIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr = currSigDimsInitStr + nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isVarDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetCurrentInputPortDimensions">SLibGetCurrentInputPortDimensions</a>(0, dimsIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDims = "rt_ToWksWidths[0]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>           
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsSetStr = currSigDimsSetStr + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"rt_ToWksCurrSigDims[%<<span>dimsIdx</span>>] = &amp;%<<span>currSigDims</span>>; /n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dimsIdx != nDims-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr = currSigDimsInitStr + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsInit = dimsInit + "};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currSigDimsInitStr = currSigDimsInitStr + "};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsInit</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> preprocessingFcnPtrsStr = nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> preprocessingFcnPtrsComma = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> boolean_T        rt_ToWksIsVarDims[]      = {%<<span>isVarDims</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>currSigDimsInitStr</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksCurrSigDimsSize[] = {%<<span>currSigDimsSizeStr</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> BuiltInDTypeId   rt_ToWksDataTypeIds[]    = {%<<span>logDTypeEnum</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksComplexSignals[] = {%<<span>cmplx</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> int_T            rt_ToWksFrameData[]      = {%<<span>frameData</span>>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> RTWPreprocessingFcnPtr rt_ToWksLoggingPreprocessingFcnPtrs[] =/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>preprocessingFcnPtrsStr</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> const char_T     *rt_ToWksLabels[]       = {"%<<span class="tlc_bifunc">STRING</span>(label)>"};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(sigDTypeId) &amp;&amp; ParamSettings.InputContiguous == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigFixPtDType = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logFixPtDtype = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(logDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeConvParams = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#FixPt_Fix2DblConvParams">FixPt_Fix2DblConvParams</a>(logFixPtDtype,sigFixPtDType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> RTWLogDataTypeConvert rt_ToWksDataTypeConvert[] = {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{1, %<<span>logDTypeEnum</span>>, %<<span>sigDTypeEnum</span>>, %<sigDTypeConvParams[0]>, %<sigDTypeConvParams[1]>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<sigDTypeConvParams[2]>, %<sigDTypeConvParams[3]>, %<sigDTypeConvParams[4]>, %<sigDTypeConvParams[5]>}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> RTWLogSignalInfo rt_ToWksSignalInfo       = {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksWidths,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksNumDimensions,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksDimensions,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksIsVarDims,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksCurrSigDims,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksCurrSigDimsSize,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksDataTypeIds,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksComplexSignals,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksFrameData,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksLoggingPreprocessingFcnPtrs,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rt_ToWksLabels},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%<<span>nulldef</span>>},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%<<span>nulldef</span>>},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksDataTypeConvert
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> RTWLogSignalInfo rt_ToWksSignalInfo       = {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksWidths,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksNumDimensions,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksDimensions,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksIsVarDims,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksCurrSigDims,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksCurrSigDimsSize,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksDataTypeIds,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksComplexSignals,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksFrameData,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rt_ToWksLoggingPreprocessingFcnPtrs,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{rt_ToWksLabels},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%<<span>nulldef</span>>},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{%<<span>nulldef</span>>},
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetBlockPath">LibGetBlockPath</a>(block))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeQ</span>> const char_T rt_ToWksBlockName[]          = "%<<span>blockPath</span>>";
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isVarDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* set currSigDims field */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>currSigDimsSetStr</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logTime  = (ParamSettings.SaveFormat == "StructureWithTime")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenStructLogVarCreate">SLibGenStructLogVarCreate</a>(logVar, name, logTime, maxDataPoints, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;decimation, ts, "&amp;rt_ToWksSignalInfo", "rt_ToWksBlockName")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>logVar</span>> == %<<span>nulldef</span>>) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; ParamSettings.SaveFormat == "Dataset" )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Model Reference Simulation Target: Dataset Format</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (!slIsRapidAcceleratorSimulating()) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Create dataset elements</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateDatasetVariable">CreateDatasetVariable</a>(block,system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Constant-Time Output processed in Start</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logSample">logSample</a>(block, system, -2)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ParamSettings.SignalStreamingCapable == "off")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simS = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "MdlRefSfcnS")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ssIsRapidAcceleratorActive(%<<span>simS</span>>))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slReportToWksNoRTWSupportForDataset(%<<span>simS</span>>,"%<<span>blockPath</span>>","Timeseries" );
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (block.Type == "ToWorkspace" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParamSettings.SignalStreamingCapable == "on")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#StartSignalStreaming">StartSignalStreaming</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% Start</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>StartSignalStreaming<span style="padding-left:9.5px"></span>===============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Start<span style="padding-left:9.5px"></span>callback<span style="padding-left:9.5px"></span>using<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>Streamig<span style="padding-left:9.5px"></span>infrastructure.
</span> <br><span class="tlc_fkw">%function</span> <a id="StartSignalStreaming" class="tlc_func">StartSignalStreaming</a>(block, system)  <span class="tlc_fkw">Output</span> 
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">FEVAL</span>("Simulink.sdi.useSLIOForLogging")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;if (rt_GetOSigstreamManager() != %<<span>nulldef</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint_T numForEachLevels = %<<span>block.NumForEachLevels</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(block.NumForEachLevels,block.ForEachDims,"forEachDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nInputPorts = block.NumDataInputPorts  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> nInputPorts > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#StartSignalStreamingVirtualBus">StartSignalStreamingVirtualBus</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> <span class="tlc_comment">%% nInputPorts == 1</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isNvBus = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isNvBus || hierInfoIdx == -1 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% hierInfoIdx == -1 means this is a non-bus signal</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#StartSignalStreamingNonVirtualAob">StartSignalStreamingNonVirtualAob</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#StartSignalStreamingVirtualBus">StartSignalStreamingVirtualBus</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Constant-Time Output processed in Start</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logSample">logSample</a>(block, system, -2)>  
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SLIO </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pworkAddress = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(SignalProbe, "", "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isNvBus = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hierInfoIdx == -1 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% hierInfoIdx == -1 means this is a non-bus signal</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#StartSlioSignalDef">StartSlioSignalDef</a>(block, system, pworkAddress)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> isNvBus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#StartSlioNVBusSignalDef">StartSlioNVBusSignalDef</a>(block, system, pworkAddress)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#StartSlioVirtualBusSignalDef">StartSlioVirtualBusSignalDef</a>(block, system, pworkAddress)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% StartSignalStreaming</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>StartSignalStreamingNonVirtualAob<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Start<span style="padding-left:9.5px"></span>callback<span style="padding-left:9.5px"></span>using<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>Streaming<span style="padding-left:9.5px"></span>infrastructure<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>non-virtual<span style="padding-left:9.5px"></span>AoB<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>logging.
</span> <br><span class="tlc_fkw">%function</span> <a id="StartSignalStreamingNonVirtualAob" class="tlc_func">StartSignalStreamingNonVirtualAob</a>(block, system)  <span class="tlc_fkw">Output</span> 
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateAobHierarchy">CreateAobHierarchy</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pAobHierarchy = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateSignalProbeCollectionAob">CreateSignalProbeCollectionAob</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pSignalProbeCollection = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionSetAobHierarchy(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pSignalProbeCollection</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pAobHierarchy</span>>...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 == block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionFinalizeMetaData(%<<span>pSignalProbeCollection</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionFinalizeMetaDataForeach(%<<span>pSignalProbeCollection</span>>, numForEachLevels, forEachDims);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(SignalProbe, "", "", 0)> = %<<span>pSignalProbeCollection</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>statementsBuffer</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% StartSignalStreamingNonVirtualAob</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Prepare<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>descriptor,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>node,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>calls<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>construct<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>node<span style="padding-left:9.5px"></span>tree.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="StartSlioNonVirtualBus" class="tlc_func">StartSlioNonVirtualBus</a>(block, system, treeVector) <span class="tlc_fkw">Output</span>
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> block.ParamSettings.BusDatatypeIdSpecifiedAtOutport > 0 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = block.ParamSettings.BusDatatypeIdSpecifiedAtOutport
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeNumElements">LibDataTypeNumElements</a>(dTypeId)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.NumDims > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = ParamSettings.NumDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = ParamSettings.Dims
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = "aobDims"  
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(nDims, dims, dimsArrayName)>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = SignalHierLoggingInfo[hierInfoIdx].NumChildren
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> root = "root"
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[0]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Interpolation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpolationMethod = "linear"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpolationMethod = "zoh"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Sample Time</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sampleTime = ParamSettings.SampleTimeLabels[0]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefDisallowSampleTimeInheritance">MdlRefDisallowSampleTimeInheritance</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = 0
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = ParamSettings.DiscreteInterval[0]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopTime = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("TFinal")
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentSignalName =  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> busSize = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeSLSizeFromId">LibGetDataTypeSLSizeFromId</a>(dTypeId)
 <br>&nbsp;&nbsp;{  
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateOffsets">CreateOffsets</a>(dTypeId, nChildren)>
 <br>&nbsp;&nbsp;rtwAddTopNVBusNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>parentSignalName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nChildren</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>busSize</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;offsets, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;treeVector);
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getNVBusNodeLeaves">getNVBusNodeLeaves</a>(block, system, dTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;hierInfoIdx, interpolationMethod, sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, stopTime, treeVector)>
 <br>}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="addEnumLeafNode" class="tlc_func">addEnumLeafNode</a>(...
 <br>&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;signalLabel, ...
 <br>&nbsp;&nbsp;interpolationMethod, ...
 <br>&nbsp;&nbsp;dimsArrayName, ...
 <br>&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;datatypeName, ...
 <br>&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;resolvedDatatypeName, ...
 <br>&nbsp;&nbsp;sampleTime, ...
 <br>&nbsp;&nbsp;discreteInterval, ...
 <br>&nbsp;&nbsp;stopTime, ...
 <br>&nbsp;&nbsp;treeVector) Output
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nEnums = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#FcnGetEnumTypeNumEnums">FcnGetEnumTypeNumEnums</a>(dTypeId)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumValues = Vector(%<<span>nEnums</span>>) [0@%<<span>nEnums</span>>]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumLabels = Vector(%<<span>nEnums</span>>) [""@%<<span>nEnums</span>>]
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> enumIdx = nEnums
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumValues[enumIdx] = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetEnumTypeValueFromIndex">SLibGetEnumTypeValueFromIndex</a>(dTypeId, enumIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumLabels[enumIdx] = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetEnumTypeStringFromIndex">SLibGetEnumTypeStringFromIndex</a>(dTypeId, enumIdx)
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#OutputTypedVectorForDatasetVariable">OutputTypedVectorForDatasetVariable</a>(nEnums, allEnumValues, "int_T", "enumValues")>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#OutputTypedVectorForDatasetVariable">OutputTypedVectorForDatasetVariable</a>(nEnums, allEnumLabels, "char_T*",  "enumLabels")>
 <br>&nbsp; <br>&nbsp;&nbsp;rtwAddEnumLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>signalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpolationMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>resolvedDatatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(const unsigned int*)enumValues, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(const char**)enumLabels, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nEnums</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);  
 <br><span class="tlc_fkw">%endfunction</span>  <span class="tlc_comment">%%addEnumLeafNode</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Adds<span style="padding-left:9.5px"></span>nodes<span style="padding-left:9.5px"></span>until<span style="padding-left:9.5px"></span>gets<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>leaves.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="getNVBusNodeLeaves" class="tlc_func">getNVBusNodeLeaves</a>(...
 <br>&nbsp;&nbsp;block, system, parentDatatypeId, ...
 <br>&nbsp;&nbsp;parentHierinfoidx, ...
 <br>&nbsp;&nbsp;interpolationMethod, sampleTime, discreteInterval, ...
 <br>&nbsp;&nbsp;stopTime, treeVector) Output
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey) 
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeNumElements">LibDataTypeNumElements</a>(parentDatatypeId)
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Child datatype id</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDataTypeId">LibDataTypeElementDataTypeId</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, childNo)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Child signal/label name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[parentHierinfoidx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childSignalLabel = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SignalHierLoggingInfo[childHierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Child dimensions</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childNDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementNumDimensions">LibDataTypeElementNumDimensions</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDimensions">LibDataTypeElementDimensions</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childDimsArrayName = "dims"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isChildNvBus = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isChildNvBus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Child number of children</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childNumberOfChildren = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeNumElements">LibDataTypeNumElements</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(childNDims, childDims, childDimsArrayName)>      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateOffsets">CreateOffsets</a>(childDTypeId, childNumberOfChildren)>        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> busSize = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeSLSizeFromId">LibGetDataTypeSLSizeFromId</a>(childDTypeId)        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddNVBusNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childSignalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childNumberOfChildren</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childNDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>busSize</span>>, ...                    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;offsets, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getNVBusNodeLeaves">getNVBusNodeLeaves</a>(block, system, childDTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childHierInfoIdx, interpolationMethod, sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, stopTime, treeVector)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Is the signal complex number</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childComplex = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementIsComplex">LibDataTypeElementIsComplex</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, childNo)      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Datatype Name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getDatatypeNameFromId">getDatatypeNameFromId</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Signal unit</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey == "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childUnits = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementASCIIEscapedUnits">LibDataTypeElementASCIIEscapedUnits</a>(parentDatatypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> block.ParamSettings.BusDatatypeIdSpecifiedAtOutport == -1 &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block.ParamSettings.InheritSourceUnit == "no"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childUnits = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childUnits = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLogFromBusObject">getASCIIEscapedUnitsToLogFromBusObject</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, childNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(childNDims, childDims, childDimsArrayName)>      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childSignalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpolationMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childComplex</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childNDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childUnits</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_isSigned = curDT.IsSigned
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_wordLen = curDT.RequiredBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_slope = curDT.FracSlope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_fixedExp = curDT.FixedExp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_bias = curDT.Bias
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddFixedPointLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childSignalLabel</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpolationMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childComplex</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childDimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>childNDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>childUnits</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_isSigned</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_wordLen</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_slope</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_fixedExp</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_bias</span>>, ...  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% enum parameters</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumTypeStoredAsInt">LibIsEnumTypeStoredAsInt</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = 6 <span class="tlc_comment">%% int32</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetEnumTypeStorageType">LibGetEnumTypeStorageType</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> resolvedDatatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(storageID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nEnums = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#FcnGetEnumTypeNumEnums">FcnGetEnumTypeNumEnums</a>(childDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumValues = Vector(%<<span>nEnums</span>>) [0@%<<span>nEnums</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> allEnumLabels = Vector(%<<span>nEnums</span>>) [""@%<<span>nEnums</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#addEnumLeafNode">addEnumLeafNode</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childSignalLabel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpolationMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childDimsArrayName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childNDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;childUnits, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolvedDatatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;rtwPopNVBusNode(%<<span>treeVector</span>>);
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="StartSlioNVBusSignalDef" class="tlc_func">StartSlioNVBusSignalDef</a>(block, system, pworkAddress) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Port type</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 3 <span class="tlc_comment">%% Noport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 10 <span class="tlc_comment">%% Undefined</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = 0
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 1 <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 1 <span class="tlc_comment">%% Antenna</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_logsout"    
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 2   <span class="tlc_comment">%% Import</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 3  <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_yout"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = ParamSettings.ElementOrder[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLogRootOutport(rtwGetPointerFromUniquePtr(rt_slioCatalogue())))
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% root</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> treeVector = "treeVector"
 <br>&nbsp;&nbsp;void * treeVector = rtwGetTreeVector();
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% ForEach dimensions</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;uint_T numForEachLevels = %<<span>block.NumForEachLevels</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(block.NumForEachLevels,block.ForEachDims,"forEachDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = "forEachDims, " + <span class="tlc_bifunc">STRING</span>(block.NumForEachLevels)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArray[32];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArraySize = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the dimensions of the foreach subsystem which contains the model block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!slIsRapidAcceleratorSimulating()) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArraySize = slSigLogGetForEachDimsForRefModel(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "MdlRefSfcnS")>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArray);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = "forEachMdlRefDimsArraySize ? (const uint_T*)forEachMdlRefDimsArray : " + nulldef + ", forEachMdlRefDimsArraySize"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#StartSlioNonVirtualBus">StartSlioNonVirtualBus</a>(block, system, treeVector)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% number of inport ports </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numberOfInputPorts = 1
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Max points</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxpoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Decimation  </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation = ParamSettings.Decimation[0]  
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Propagated name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propagatedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Logged name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> loggedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Block path</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = %<<span>mapInfo</span>>.mmi.InstanceMap.fullPath; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = "";
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Port index</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;const void * signalDescriptor = rtwGetSignalDescriptor (...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>numberOfInputPorts</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>porttype</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxpoints</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>loggedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propagatedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathToTopModel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>portOrder</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()), ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachTopDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachSubDims</span>>);    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("MdlRefSfcnS")>->mdlInfo->rtwLogInfo);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "RootSS")>->mdlInfo->rtwLogInfo);      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void * accessor = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">FEVAL</span>("Simulink.sdi.useSLIOForLogging")    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLoggingOverride(signalDescriptor, rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accessor = rtwGetAccessor(signalDescriptor, loggingInterval);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwIsLoggingToFile(rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddR2Client(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddMemoryClient(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = accessor;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="StartSlioVirtualBusSignalDef" class="tlc_func">StartSlioVirtualBusSignalDef</a>(block, system, pworkAddress) <span class="tlc_fkw">Output</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Port type</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)    
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 3 <span class="tlc_comment">%% Noport</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 10 <span class="tlc_comment">%% Undefined</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = 0
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 1 <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 1 <span class="tlc_comment">%% Antenna</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_logsout"    
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 2   <span class="tlc_comment">%% Import</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 3  <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_yout"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = ParamSettings.ElementOrder[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLogRootOutport(rtwGetPointerFromUniquePtr(rt_slioCatalogue())))
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% root</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> treeVector = "treeVector"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = block.ParamSettings.BusDatatypeIdSpecifiedAtOutport
 <br>&nbsp; <br>&nbsp;&nbsp;void * treeVector = rtwGetTreeVector();
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% ForEach dimensions</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;uint_T numForEachLevels = %<<span>block.NumForEachLevels</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(block.NumForEachLevels,block.ForEachDims,"forEachDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = "forEachDims, " + <span class="tlc_bifunc">STRING</span>(block.NumForEachLevels)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArray[32];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArraySize = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the dimensions of the foreach subsystem which contains the model block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!slIsRapidAcceleratorSimulating()) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArraySize = slSigLogGetForEachDimsForRefModel(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "MdlRefSfcnS")>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArray);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = "forEachMdlRefDimsArraySize ? (const uint_T*)forEachMdlRefDimsArray : " + nulldef + ", forEachMdlRefDimsArraySize"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#StartSlioVirtualBus">StartSlioVirtualBus</a>(block, system, dTypeId, treeVector)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% number of inport ports </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numberOfInputPorts = block.NumDataInputPorts
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Max points</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxpoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Decimation  </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation = ParamSettings.Decimation[0]  
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Propagated name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propagatedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Logged name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> loggedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Block path</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = %<<span>mapInfo</span>>.mmi.InstanceMap.fullPath; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = "";
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Port index</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]    
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;const void * signalDescriptor = rtwGetSignalDescriptor(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>numberOfInputPorts</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>porttype</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxpoints</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>loggedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propagatedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathToTopModel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>portOrder</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()), ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachTopDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachSubDims</span>>);    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("MdlRefSfcnS")>->mdlInfo->rtwLogInfo);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void * loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "RootSS")>->mdlInfo->rtwLogInfo);      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void * accessor = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">FEVAL</span>("Simulink.sdi.useSLIOForLogging")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLoggingOverride(signalDescriptor, rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accessor = rtwGetAccessor(signalDescriptor, loggingInterval);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwIsLoggingToFile(rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddR2Client(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddMemoryClient(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = accessor;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Prepare<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>descriptor,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>node,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>calls<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>construct<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>node<span style="padding-left:9.5px"></span>tree.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="StartSlioVirtualBus" class="tlc_func">StartSlioVirtualBus</a>(block, system, parentDatatypeId, treeVector) <span class="tlc_fkw">Output</span>
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> signalName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hierInfoIdx = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = SignalHierLoggingInfo[hierInfoIdx].NumChildren
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[0]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Interpolation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpolationMethod = "linear"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpolationMethod = "zoh"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;rtwAddTopBusNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>signalName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nChildren</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;treeVector);
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = 0
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = SignalHierLoggingInfo[hierInfoIdx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getBusNodeLeaves">getBusNodeLeaves</a>(block, system, childHierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portIdx, parentDatatypeId, childNo, treeVector)
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;rtwPopNVBusNode(%<<span>treeVector</span>>);
 <br>}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Adds<span style="padding-left:9.5px"></span>nodes<span style="padding-left:9.5px"></span>until<span style="padding-left:9.5px"></span>gets<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>leaves.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="getBusNodeLeaves" class="tlc_func">getBusNodeLeaves</a>(...
 <br>&nbsp;&nbsp;block, system, hierInfoIdx, ...
 <br>&nbsp;&nbsp;portIdx, parentDatatypeId, currentChildNo, treeVector) Output
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigName = SignalHierLoggingInfo[hierInfoIdx].SignalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nChildren = SignalHierLoggingInfo[hierInfoIdx].NumChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> nChildren > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddBusNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nChildren</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector);
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> parentDatatypeId != -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentDatatypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementDataTypeId">LibDataTypeElementDataTypeId</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, currentChildNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentDatatypeId = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> childNo = nChildren
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childHierInfoIdx = SignalHierLoggingInfo[hierInfoIdx].Children[childNo]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getBusNodeLeaves">getBusNodeLeaves</a>(block, system, childHierInfoIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;portIdx, currentDatatypeId, childNo, treeVector)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwPopNVBusNode(%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> portIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Signal unit</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> parentDatatypeId != -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Bus is specifed at the outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey == "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeElementASCIIEscapedUnits">LibDataTypeElementASCIIEscapedUnits</a>(parentDatatypeId, currentChildNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLogFromBusObject">getASCIIEscapedUnitsToLogFromBusObject</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;parentDatatypeId, currentChildNo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey == "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalASCIIEscapedUnitExpr">LibBlockInputSignalASCIIEscapedUnitExpr</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> block.ParamSettings.InheritSourceUnit == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLog">getASCIIEscapedUnitsToLog</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getLeafNode">getLeafNode</a>(block, system, portIdx, sigName, units, treeVector)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> portIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_fkw">%endfunction</span> 
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%function</span> <a id="getLeafNode" class="tlc_func">getLeafNode</a>(block, system, portIdx, sigName, units, treeVector) <span class="tlc_fkw">Output</span>
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Data type registration</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(portIdx)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtID = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeIdAliasedThruToFromId">LibGetDataTypeIdAliasedThruToFromId</a>(portDT)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Complexity</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexity = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Interpolation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[portIdx]
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Interpolation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "linear"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "zoh"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Dimensions</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Sample Time</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sampleTime = ParamSettings.SampleTimeLabels[portIdx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefDisallowSampleTimeInheritance">MdlRefDisallowSampleTimeInheritance</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = 0
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = ParamSettings.DiscreteInterval[portIdx]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopTime = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("TFinal")
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#addLeafNode">addLeafNode</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dtID,...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;complexity, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;sigName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;stopTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;treeVector)>  
 <br>}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="addLeafNode" class="tlc_func">addLeafNode</a>(...
 <br>&nbsp;&nbsp;dtID, dims, nDims, complexity, ...
 <br>&nbsp;&nbsp;interpMethod, sigName, sigUnits, ...
 <br>&nbsp;&nbsp;sampleTime, discreteInterval, stopTime, treeVector) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getDatatypeNameFromId">getDatatypeNameFromId</a>(dtID)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arrayName = "dims"
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(nDims, dims, arrayName)>  
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(dtID)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwAddLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dtID</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned int*)dims,  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigUnits</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(dtID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(dtID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_isSigned = curDT.IsSigned
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_wordLen = curDT.RequiredBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_slope = curDT.FracSlope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_fixedExp = curDT.FixedExp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_bias = curDT.Bias
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwAddFixedPointLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dtID</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(unsigned int*)dims,  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigUnits</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_isSigned</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_wordLen</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_slope</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_fixedExp</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_bias</span>>, ...   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>stopTime</span>>, ...   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% enum parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(dtID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumTypeStoredAsInt">LibIsEnumTypeStoredAsInt</a>(dtID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = 6 <span class="tlc_comment">%% int32</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetEnumTypeStorageType">LibGetEnumTypeStorageType</a>(dtID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> resolvedDatatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(storageID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#addEnumLeafNode">addEnumLeafNode</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dtID, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(unsigned int*)dims",  ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sigUnits, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolvedDatatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stopTime, ...  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> warnTxt = "User-defined data types not supported for logging to mat-file."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibBlockReportWarning">LibBlockReportWarning</a>(block, warnTxt)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%%addLeafNode</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="StartSlioSignalDef" class="tlc_func">StartSlioSignalDef</a>(block, system, pworkAddress) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Port type</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 3 <span class="tlc_comment">%% Noport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 10 <span class="tlc_comment">%% Undefined</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = 0
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 1 <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 1 <span class="tlc_comment">%% Antenna</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_logsout"    
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> porttype = 2   <span class="tlc_comment">%% Import</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> clientType = 3  <span class="tlc_comment">%% Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = "tmp_raccel_yout"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portOrder = ParamSettings.ElementOrder[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLogRootOutport(rtwGetPointerFromUniquePtr(rt_slioCatalogue())))
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> elementName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[0]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Interpolation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLinearInterp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "linear"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpMethod = "zoh"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Signal Dimensions </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayPrefix = "signalDimensions"  
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.NumDims > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = ParamSettings.NumDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = ParamSettings.Dims
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% also creates the dimsarray</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsArrayName = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDimsArray">CreateDimsArray</a>(nDims, dims, dimsArrayPrefix, 0)>"
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Data is complex</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexity = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(0)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Units</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalASCIIEscapedUnitExpr">LibBlockInputSignalASCIIEscapedUnitExpr</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> block.ParamSettings.InheritSourceUnit == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLog">getASCIIEscapedUnitsToLog</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = block.ParamSettings.OutportUnits
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Datatype Name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#getDatatypeNameFromId">getDatatypeNameFromId</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0))
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Max points</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxpoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Decimation</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation = ParamSettings.Decimation[0]  
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Port index</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Propagated name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propagatedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Logged Name</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> loggedName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[0])  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigName = <span class="tlc_bifunc">STRING</span>(ParamSettings.SignalNames[0])
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Block path</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = %<<span>mapInfo</span>>.mmi.InstanceMap.fullPath; 
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;char* pathToTopModel = "";
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% number of inport ports   </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numberOfInputPorts = 1
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Sample Time</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sampleTime = ParamSettings.SampleTimeLabels[0]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefDisallowSampleTimeInheritance">MdlRefDisallowSampleTimeInheritance</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = 0
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> discreteInterval = ParamSettings.DiscreteInterval[0]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> treeVector = "treeVector"
 <br>&nbsp;&nbsp;void * treeVector = rtwGetTreeVector();
 <br>&nbsp;&nbsp;void * loggingInterval = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;void * accessor = %<<span>nulldef</span>>;
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% ForEach dimensions</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;uint_T numForEachLevels = %<<span>block.NumForEachLevels</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(block.NumForEachLevels,block.ForEachDims,"forEachDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = "forEachDims, " + <span class="tlc_bifunc">STRING</span>(block.NumForEachLevels)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachSubDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArray[32];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T forEachMdlRefDimsArraySize = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the dimensions of the foreach subsystem which contains the model block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!slIsRapidAcceleratorSimulating()) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArraySize = slSigLogGetForEachDimsForRefModel(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "MdlRefSfcnS")>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEachMdlRefDimsArray);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = "forEachMdlRefDimsArraySize ? (const uint_T*)forEachMdlRefDimsArray : " + nulldef + ", forEachMdlRefDimsArraySize"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foreachTopDims = nulldef + ", 0"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwAddLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sigName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("TFinal")>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_isSigned = curDT.IsSigned
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_wordLen = curDT.RequiredBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_slope = curDT.FracSlope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_fixedExp = curDT.FixedExp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_bias = curDT.Bias
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwAddFixedPointLeafNode(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dTypeId</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>elementName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>interpMethod</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>complexity</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsArrayName</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>datatypeName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_isSigned</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_wordLen</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_slope</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_fixedExp</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fxp_bias</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>sampleTime</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>discreteInterval</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("TFinal")>, ...      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>treeVector</span>>);
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% enum parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumTypeStoredAsInt">LibIsEnumTypeStoredAsInt</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = 6 <span class="tlc_comment">%% int32</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> storageID = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetEnumTypeStorageType">LibGetEnumTypeStorageType</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> resolvedDatatypeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(storageID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#addEnumLeafNode">addEnumLeafNode</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dTypeId, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elementName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interpMethod, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dimsArrayName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nDims, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;datatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;units, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;resolvedDatatypeName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sampleTime, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;discreteInterval, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("TFinal"), ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector)>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;const void * signalDescriptor = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetSignalDescriptor (...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;treeVector, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>numberOfInputPorts</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>porttype</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxpoints</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>loggedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propagatedName</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pathToTopModel, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>portOrder</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()), ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachTopDims</span>>, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>foreachSubDims</span>>);    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("MdlRefSfcnS")>->mdlInfo->rtwLogInfo);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loggingInterval = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "RootSS")>->mdlInfo->rtwLogInfo);      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">FEVAL</span>("Simulink.sdi.useSLIOForLogging")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwLoggingOverride(signalDescriptor, rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;accessor = rtwGetAccessor(signalDescriptor, loggingInterval);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwIsLoggingToFile(rtwGetPointerFromUniquePtr(rt_slioCatalogue()))){
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddR2Client(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwAddMemoryClient(accessor, signalDescriptor, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwGetPointerFromUniquePtr(rt_slioCatalogue()),"%<<span>datasetName</span>>", %<<span>clientType</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datasetName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = accessor;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>pworkAddress</span>> = %<<span>nulldef</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>datatype<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>form<span style="padding-left:9.5px"></span>datatype<span style="padding-left:9.5px"></span>id.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="getDatatypeNameFromId" class="tlc_func">getDatatypeNameFromId</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> typeName == "boolean"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "logical"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% fixpt parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#fxpIsDataTypeFixPt">fxpIsDataTypeFixPt</a>(curDT) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "fixed-point"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp    = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#fxpIsDataTypeScaledDouble">fxpIsDataTypeScaledDouble</a>(curDT)     
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "scaled-double"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp    = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_DataTypeIsDouble">FixPt_DataTypeIsDouble</a>(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "double"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> FixPt_DatatTypeIsSingle(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "single"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> FixPt_DatatTypeIsBoolean(curDT)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = "logical"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_isSigned = curDT.IsSigned
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_wordLen = curDT.RequiredBits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_slope = curDT.FracSlope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_fixedExp = curDT.FixedExp
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fxp_bias = curDT.Bias
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% enum parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(datatypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFxp = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> typeName
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>StartSignalStreamingVirtualBus<span style="padding-left:9.5px"></span>=====================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Start<span style="padding-left:9.5px"></span>callback<span style="padding-left:9.5px"></span>using<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>Streamig<span style="padding-left:9.5px"></span>infrastructure<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>virtual<span style="padding-left:9.5px"></span>bus
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>logging.
</span> <br><span class="tlc_fkw">%function</span> <a id="StartSignalStreamingVirtualBus" class="tlc_func">StartSignalStreamingVirtualBus</a>(block, system)  <span class="tlc_fkw">Output</span> 
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = " "
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retValsLowerLevel ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CreateVirtualBusHierarchyAndSignalProbeCollection">CreateVirtualBusHierarchyAndSignalProbeCollection</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pSignalProbeCollectionName = retValsLowerLevel.val
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + retValsLowerLevel.statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> retValsLowerLevel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> statements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 == block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionFinalizeMetaData(%<<span>pSignalProbeCollectionName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionFinalizeMetaDataForeach(%<<span>pSignalProbeCollectionName</span>>, numForEachLevels, forEachDims);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(SignalProbe, "", "", 0)> = %<<span>pSignalProbeCollectionName</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> statements
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> statementsBuffer = statementsBuffer + statements
 <br>&nbsp;&nbsp;%<<span>statementsBuffer</span>>  
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% StartSignalStreamingVirtualBus</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="outputTranspose" class="tlc_func">outputTranspose</a>(block, system, matrixToTranspose) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ipRecord = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#FcnGetInputPortRecord">FcnGetInputPortRecord</a>(0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataRecord = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetSourceRecord">SLibGetSourceRecord</a>(ipRecord, 0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> freeStatement = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(dataRecord) &amp;&amp; <span class="tlc_bifunc">ISFIELD</span>(dataRecord, "PreprocessingFcnPtr")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cgTypeIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeFixedPointBaseType">LibCGTypeFixedPointBaseType</a>(dataRecord.CGTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#SLibGetTypeNameFromCGType">SLibGetTypeNameFromCGType</a>(cgTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsComplex">LibCGTypeIsComplex</a>(dataRecord.CGTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexMul = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> complexMul = 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numEls = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordSymbolicWidth">LibGetRecordSymbolicWidth</a>(dataRecord)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> preprocessingPtr = dataRecord.PreprocessingFcnPtr
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void* rt_curData = malloc(sizeof(%<<span>baseName</span>>) * %<<span>complexMul</span>> * %<<span>numEls</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>preprocessingPtr</span>>(rt_curData, %<<span>matrixToTranspose</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> freeStatement = "free( rt_curData );"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> freeStatement
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>Outputs<span style="padding-left:9.5px"></span>===========================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>using<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>standard<span style="padding-left:9.5px"></span>.mat<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>logging<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>workspace
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>constant,<span style="padding-left:9.5px"></span>then<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>out<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>log<span style="padding-left:9.5px"></span>data.<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>workspace<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>triggered,<span style="padding-left:9.5px"></span>then<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>log<span style="padding-left:9.5px"></span>whenever<span style="padding-left:9.5px"></span>we
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>called,<span style="padding-left:9.5px"></span>otherwise<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>log<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>major<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>steps.<span style="padding-left:9.5px"></span>Constant
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>handled<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Start<span style="padding-left:9.5px"></span>function.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>dataset<span style="padding-left:9.5px"></span>format<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>multitasking,<span style="padding-left:9.5px"></span>OutputsForTID<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>instead<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>handle<span style="padding-left:9.5px"></span>port-based<span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>times.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="Outputs" class="tlc_func">Outputs</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> block.Type == "ToWorkspace" &amp;&amp; <span class="tlc_bifunc">EXISTS</span>(ParamSettings) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(ParamSettings.SigLogRapidAccel == 1 || ParamSettings.SigLogRapidAccel == 2)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.LogPowerDownEvent == "no"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logSingletasking">logSingletasking</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span>  (MatFileLogging != 0) ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (TargetType == "RT" || isRSim) ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (CodeFormat != "S-Function") ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; (ParamSettings.VariableName != "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arrayFormat = (ParamSettings.SaveFormat == "Array")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(LoggedData, "", "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeId    = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeLogSupported">LibIsDataTypeLogSupported</a>(sigDTypeId, TLC_TRUE) == TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibSigToLogDataType">SLibSigToLogDataType</a>(sigDTypeId, tSS_DOUBLE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.InputContiguous == "yes" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeBuiltinOrFixpt">LibIsDataTypeBuiltinOrFixpt</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inpPtr = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalAddr">LibBlockInputSignalAddr</a>(0, "", "", 0)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> arrayFormat
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isRSimWithSolverModule
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("LogOutput")>) {        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Array format logging supports fixed-size signal logging only</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isVarDims = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRAccel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double locTime = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/des_util.html#checkAndGetDESEngTimeSource">checkAndGetDESEngTimeSource</a>(block)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check interval-logging rapid-accel graphical-toWorkspace top-model.          </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simS = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "RootSS")      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSigstreamRTW.h")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioCoreRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioClientsRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioSdiRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwTimeInLoggingInterval(
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<span>simS</span>>->mdlInfo->rtwLogInfo),
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;locTime))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarUpdate">SLibGenLogVarUpdate</a>("(LogVar*) (%<<span>logVar</span>>)", inpPtr, isVarDims)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> freeStatement = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#outputTranspose">outputTranspose</a>(block, system, inpPtr)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> freeStatement != ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarUpdate">SLibGenLogVarUpdate</a>("(LogVar*) (%<<span>logVar</span>>)", "rt_curData", isVarDims)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>freeStatement</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarUpdate">SLibGenLogVarUpdate</a>("(LogVar*) (%<<span>logVar</span>>)", inpPtr, isVarDims)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim || ((<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat == "StructureWithTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double locTime = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/des_util.html#checkAndGetDESEngTimeSource">checkAndGetDESEngTimeSource</a>(block)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> timePtr = "&amp;locTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> timePtr = nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isRSimWithSolverModule
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("LogOutput")>) {        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRAccel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simS = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "RootSS")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat != "StructureWithTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double locTime = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/des_util.html#checkAndGetDESEngTimeSource">checkAndGetDESEngTimeSource</a>(block)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check interval-logging rapid-accel graphical-toWorkspace top-model.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSigstreamRTW.h")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioCoreRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioClientsRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#SLibAddToNonSharedIncludes">SLibAddToNonSharedIncludes</a>("simtarget/slSimTgtSlioSdiRTW.h")> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtwTimeInLoggingInterval(
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtliGetLoggingInterval(%<<span>simS</span>>->mdlInfo->rtwLogInfo),
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;locTime))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenStructLogVarUpdate">SLibGenStructLogVarUpdate</a>(logVar, timePtr, inpPtr)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> freeStatement = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#outputTranspose">outputTranspose</a>(block, system, inpPtr)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> freeStatement != ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenStructLogVarUpdate">SLibGenStructLogVarUpdate</a>(logVar, timePtr, "rt_curData")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>freeStatement</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenStructLogVarUpdate">SLibGenStructLogVarUpdate</a>(logVar, timePtr, inpPtr)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim || ((<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat == "StructureWithTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> <span class="tlc_comment">%% input is not contiguous or datatype is not built-in/fixpt</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> symWidth = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalSymbolicWidth">LibBlockInputSignalSymbolicWidth</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isSymbolic = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalWidth">LibBlockInputSignalWidth</a>(0)>" == symWidth
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cmplx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtype = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalDataTypeName">LibBlockInputSignalDataTypeName</a>(0,"")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !cmplx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtype = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(logDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtype = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeComplexNameFromId">LibGetDataTypeComplexNameFromId</a>(logDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dtype</span>> u[%<<span>symWidth</span>>];
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !isSymbolic
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% use ROLL REGIONS if it has no symbolic.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% TODO: can be improved in R2016a if TLC ROLL REGIONS support symbolic dims.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rollVars = ["U"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_roll">%roll</span> idx = RollRegions, lcv = RollThreshold, block, "Roller", rollVars
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> input = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignal">LibBlockInputSignal</a>(0,"",lcv,idx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rhs = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rolllib.html#LibGetIndexedElement">LibGetIndexedElement</a>("u", %<<span>symWidth</span>>, lcv, idx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>rhs</span>> = %<<span>input</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% investigate when this code will be covered.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> convertBetweenFcn = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnName">LibConvertBetweenTLCFcnName</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnFile">LibConvertBetweenTLCFcnFile</a>(sigDTypeId) != ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_include">%include</span> "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnFile">LibConvertBetweenTLCFcnFile</a>(sigDTypeId)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> status = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibComplexConvertBetweenForSrcId">LibComplexConvertBetweenForSrcId</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logDTypeId, sigDTypeId, cmplx, input, "", rhs)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> status != 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%START_ASSERT</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Error: funcion %<<span>convertBetweenFcn</span>> doesn't support " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"converting the input signal to type double."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibBlockReportFatalError">LibBlockReportFatalError</a>(block, errTxt)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%END_ASSERT</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endroll">%endroll</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% use for loop with symbolic upper bound.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% this code doesn't work with discontiguous inputs.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">SIZE</span>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rolllib.html#LibRollRegions2StartEndMatrix">LibRollRegions2StartEndMatrix</a>(RollRegions), 1) > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = "To workspace block taking symbolic matrix input cannot handle discontiguous inputs"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> loopCode = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#SLibEmitForLoopCounterCode">SLibEmitForLoopCounterCode</a>(symWidth, "i")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<loopCode[0]>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<loopCode[1]> {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> input = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignal">LibBlockInputSignal</a>(0, "i", "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rhs = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rolllib.html#LibGetIndexedElement">LibGetIndexedElement</a>("u", INT32MAX, "i", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>rhs</span>> = %<<span>input</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> convertBetweenFcn = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnName">LibConvertBetweenTLCFcnName</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnFile">LibConvertBetweenTLCFcnFile</a>(sigDTypeId) != ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_include">%include</span> "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibConvertBetweenTLCFcnFile">LibConvertBetweenTLCFcnFile</a>(sigDTypeId)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> status = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibComplexConvertBetweenForSrcId">LibComplexConvertBetweenForSrcId</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logDTypeId, sigDTypeId, cmplx, input, "", rhs)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> status != 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%START_ASSERT</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Error: funcion %<<span>convertBetweenFcn</span>> doesn't support " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"converting the input signal to type double."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibBlockReportFatalError">LibBlockReportFatalError</a>(block, errTxt)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%END_ASSERT</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> arrayFormat
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isRSimWithSolverModule
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("LogOutput")>) {        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Array format logging supports fixed-size signal logging only</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isVarDims = 0       
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenLogVarUpdate">SLibGenLogVarUpdate</a>("(LogVar*)%<<span>logVar</span>>", "u", isVarDims)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim || ((<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat == "StructureWithTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double locTime =  %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/des_util.html#checkAndGetDESEngTimeSource">checkAndGetDESEngTimeSource</a>(block)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> timePtr = "&amp;locTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> timePtr = nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isRSimWithSolverModule
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("LogOutput")>) {        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMIs">RTMIs</a>("MajorTimeStep")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/logsup.html#SLibGenStructLogVarUpdate">SLibGenStructLogVarUpdate</a>(logVar, timePtr, "u")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::isRSim || ((<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()) &amp;&amp; (NumContStates > 0))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SaveFormat == "StructureWithTime"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> Accelerator
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Call into Simulink for To Workspace */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/accellib.html#SLibCallBlockInSimulink">SLibCallBlockInSimulink</a>(system, block, "SS_CALL_MDL_OUTPUTS")>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; ParamSettings.SaveFormat == "Dataset" )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Model Reference - Dataset format. This is called for Singletasking</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% or blocks with 1 sample time. For multitasking, port-based sample</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% times, OutputsForTID will be called</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logSingletasking">logSingletasking</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% Outputs</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>OutputsForTID<span style="padding-left:9.5px"></span>=====================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Update<span style="padding-left:9.5px"></span>dataset<span style="padding-left:9.5px"></span>format<span style="padding-left:9.5px"></span>logged<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>multitasking.<span style="padding-left:9.5px"></span>In
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>non-dataset<span style="padding-left:9.5px"></span>formats,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>single<span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>therefore<span style="padding-left:9.5px"></span>we
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>standard<span style="padding-left:9.5px"></span>Outputs.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="OutputsForTID" class="tlc_func">OutputsForTID</a>(block, system, tid) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<span class="tlc_bifunc">EXISTS</span>(ParamSettings) &amp;&amp; ParamSettings.SaveFormat == "Dataset" )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logMultitasking">logMultitasking</a>(block, system, tid)>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/blocks/sb2sl/tlc_c/sb1varpoly.html#Outputs">Outputs</a>(block, system)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% OutputsForTID</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>OutputTypedVectorForDatasetVariable<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>dimension<span style="padding-left:9.5px"></span>vector<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>creating<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>dataset<span style="padding-left:9.5px"></span>variable
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="OutputTypedVectorForDatasetVariable" class="tlc_func">OutputTypedVectorForDatasetVariable</a>(nValues, values, valueType, varname) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> nValues == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> valueType == "char_T*"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>valueType</span>> %<<span>varname</span>>[1] = {"%<values[0]>"};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>valueType</span>> %<<span>varname</span>>[1] = {%<values[0]>};
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valuesInit = "%<<span>valueType</span>> %<<span>varname</span>>[%<<span>nValues</span>>] = {"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> valuesIdx = nValues
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> valueType == "char_T*"      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valuesInit = valuesInit + "/"%<values[valuesIdx]>/""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valuesInit = valuesInit + "%<values[valuesIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> valuesIdx != nValues-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valuesInit = valuesInit + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valuesInit = valuesInit + "};"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>valuesInit</span>>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% OutputTypedVectorForDatasetVariable</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetDataTypeStrForDatasetVariable<span style="padding-left:9.5px"></span>===================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>datatype<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>datatype<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>creating<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>dataset<span style="padding-left:9.5px"></span>variable
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetDataTypeStrForDatasetVariable" class="tlc_func">GetDataTypeStrForDatasetVariable</a>(sigDTypeId, simS) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% ENUM data types</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;DTypeId dtId = ssGetDataTypeId(%<<span>simS</span>>, "%<<span>dtName</span>>");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(dtId == INVALID_DTYPE_ID) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtStr = "dtId"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% FIXED POINT data types</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> curDT = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;DTypeId dtId = ssGetDataTypeId(%<<span>simS</span>>, "%<<span>curDT.DataTypeName</span>>");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(dtId == INVALID_DTYPE_ID) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtStr = "dtId"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% BUILT-IN data types</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeEnumFromId">LibGetDataTypeEnumFromId</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% UNKNOWN types</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"User-defined data types not supported for model reference simulation logging."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errTxt)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> dtStr
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% OutputDimsVectorForDatasetVariable</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetInterpolationString<span style="padding-left:9.5px"></span>=============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>linear<span style="padding-left:9.5px"></span>interpolation
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetInterpolationString" class="tlc_func">GetInterpolationString</a>(isLinearInterp)
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(isLinearInterp == 0 || isLinearInterp == 1)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpStr = "SS_LINEAR_INTERPOLATION"
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> %<<span>isLinearInterp</span>> == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpStr = "SS_ZOH_INTERPOLATION"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> interpStr
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetInterpolationString</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallAddTimeseriesForDataset<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>slSigLogAddTimeseriesDescription
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="CallAddTimeseriesForDataset" class="tlc_func">CallAddTimeseriesForDataset</a>(simS, sigDTypeId, cmplx, nDims, dims,...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isLinearInterp, sigName, units) Output
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#GetInterpolationString">GetInterpolationString</a>(isLinearInterp)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Dimensions vector</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsVarName = "dimensions"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#OutputTypedVectorForDatasetVariable">OutputTypedVectorForDatasetVariable</a>(nDims, dims, "int_T", dimsVarName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#GetDataTypeStrForDatasetVariable">GetDataTypeStrForDatasetVariable</a>(sigDTypeId, simS)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Construct the timeseries description</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;slSigLogAddTimeseriesDescription(%<<span>simS</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pElementDesc,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pDatasetDesc,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>sigName</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsVarName</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dtStr</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>cmplx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>interpStr</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>units</span>>");
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CallAddTimeseriesForDataset</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CreateDatasetVariable<span style="padding-left:9.5px"></span>=============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Create<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>necessary<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>dataset<span style="padding-left:9.5px"></span>format<span style="padding-left:9.5px"></span>logging<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>simulation.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CreateDatasetVariable" class="tlc_func">CreateDatasetVariable</a>(block, system) <span class="tlc_fkw">Output</span>  
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Settings common to all ports</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simS          = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "MdlRefSfcnS")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockPath     = <span class="tlc_bifunc">STRING</span>(ParamSettings.LogBlockPath)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maxDataPoints = ParamSettings.MaxDataPoints[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decimation    = ParamSettings.Decimation[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> busHierIdx    = ParamSettings.HierInfoIndex[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsMetadataKey = <span class="tlc_bifunc">STRING</span>(ParamSettings.DatasetMetadataKey)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp; <br>&nbsp;&nbsp;{ <span class="tlc_comment">%% Open bracket for dataset creation  </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Construct dataset description</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#RTMsGet">RTMsGet</a>(system, "DataMapInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *pDatasetDesc;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dsMetadataKey ==  "DATASET_SIGNAL_LOGGING" || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dsMetadataKey ==  "DATASET_OUTPORT_LOGGING"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsName = nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsName = "/"" + <span class="tlc_bifunc">STRING</span>(ParamSettings.VariableName) + "/""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uint_T numForEachLevels = %<<span>block.NumForEachLevels</span>>;      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#CreateDims">CreateDims</a>(block.NumForEachLevels,block.ForEachDims,"forEachDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;_ssLoggerCreateDatasetDescriptWithMMI(%<<span>simS</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;%<<span>mapInfo</span>>.mmi,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nulldef</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dsName</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pDatasetDesc);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the number of elements to add - buses are always logged as 1 element</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> busHierIdx < 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numElements = block.NumDataInputPorts
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numElements = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Iterate over number of elements</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> busName = ""       
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> propName = <span class="tlc_bifunc">STRING</span>(ParamSettings.PropagatedName)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> elementIdx = numElements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Element name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> elName = <span class="tlc_bifunc">STRING</span>(ParamSettings.ElementNames[elementIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Logged port index</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.ConnectedPortIdx[0] == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = portIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> logPortIdx = ParamSettings.ConnectedPortIdx[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>     
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeIdAliasedThruToForNonBusDtype">LibGetDataTypeIdAliasedThruToForNonBusDtype</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(portIdx))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (busName == "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (numElements == 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> busName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeSLNameFromId">LibGetDataTypeSLNameFromId</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Dimensions vector</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims       = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims        = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsVarName = "dimensions"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/intrusive_accessor.html#OutputTypedVectorForDatasetVariable">OutputTypedVectorForDatasetVariable</a>(nDims, dims, "int_T", dimsVarName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[portIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interpStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#GetInterpolationString">GetInterpolationString</a>(isLinearInterp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slSigLogAddElementDescriptionForBus(%<<span>simS</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pDatasetDesc,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>busHierIdx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>busName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>elName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxDataPoints</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>nDims</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dimsVarName</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>interpStr</span>>);
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = portIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Construct the element description</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *pValuesDesc;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void *pElementDesc;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssLoggerCreateBusValuesDescription(%<<span>simS</span>>, %<<span>busHierIdx</span>>, &amp;pValuesDesc);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssLoggerAddSignalDescriptionWithValuesDescription(%<<span>simS</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pDatasetDesc,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>elName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>propName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>blockPath</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>logPortIdx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>maxDataPoints</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>decimation</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pValuesDesc,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;pElementDesc);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Determine how many signals are in this element</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> busHierIdx < 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSignals = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSignals = block.NumDataInputPorts
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Iterate over all signals</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> signalIdx = numSignals
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> ! <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(sigDTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cmplx          = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims          = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims           = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLinearInterp = ParamSettings.LinearInterpolation[portIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Signal name for non-bus signals</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> busHierIdx < 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigName = "/"" + <span class="tlc_bifunc">STRING</span>(ParamSettings.SignalNames[portIdx]) + "/"" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigName = nulldef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get signal type of each port. </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigDTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeIdAliasedThruToForNonBusDtype">LibGetDataTypeIdAliasedThruToForNonBusDtype</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(portIdx))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get Units for each port</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> units = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#getASCIIEscapedUnitsToLog">getASCIIEscapedUnitsToLog</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#CallAddTimeseriesForDataset">CallAddTimeseriesForDataset</a>(simS, sigDTypeId, cmplx, nDims, dims, isLinearInterp, sigName, units)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx = portIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% signalIdx            </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% elementIdx</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Store elements in Pwork vector. Note that ssDatasetCreateFromDescpt will</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% set ALL elements in the pwork vector, not just index 0.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pwork = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(LoggedData, "", "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 < block.NumForEachLevels
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (pDatasetDesc) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;slmrSetForeachDimensions(pDatasetDesc, numForEachLevels, forEachDims);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Construct dataset and elements from description</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> busName == ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssLoggerCreateElementFromDescription(%<<span>simS</span>>, &amp;pDatasetDesc, &amp;%<<span>pwork</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssLoggerCreateElementFromDescriptionForBus(%<<span>simS</span>>, &amp;pDatasetDesc, "%<<span>busName</span>>", &amp;%<<span>pwork</span>>, %<<span>nulldef</span>>, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;} <span class="tlc_comment">%% Close bracket for dataset creation</span>
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% CreateDatasetVariable</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>Terminate<span style="padding-left:9.5px"></span>========================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Terminate<span style="padding-left:9.5px"></span>callback<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>Streaming<span style="padding-left:9.5px"></span>infrastructure.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="Terminate" class="tlc_func">Terminate</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> block.Type == "ToWorkspace" &amp;&amp; <span class="tlc_bifunc">EXISTS</span>(ParamSettings)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.LogPowerDownEvent == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/logging_sup.html#logSingletasking">logSingletasking</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">FEVAL</span>("Simulink.sdi.useSLIOForLogging")
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SigLogRapidAccel == 1 || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParamSettings.SigLogRapidAccel == 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ParamSettings.SigLogRapidAccel == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> ParamSettings.SigLogRapidAccel == 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#TerminateSignalStreaming">TerminateSignalStreaming</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParamSettings.SignalStreamingCapable == "on" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ParamSettings.SaveFormat == "Dataset"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (slIsRapidAcceleratorSimulating()) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html#TerminateSignalStreaming">TerminateSignalStreaming</a>(block, system)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% Terminate</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>TerminateSignalStreaming<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Terminate<span style="padding-left:9.5px"></span>callback<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>Signal<span style="padding-left:9.5px"></span>Streaming<span style="padding-left:9.5px"></span>infrastructure.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="TerminateSignalStreaming" class="tlc_func">TerminateSignalStreaming</a>(block, system) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nulldef = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()
 <br>&nbsp;&nbsp;if (rt_GetOSigstreamManager() != %<<span>nulldef</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *pSignalProbeCollection = (void *)%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockPWork">LibBlockPWork</a>(SignalProbe,"","",0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;rtwSignalProbeCollectionDestroyInstance(pSignalProbeCollection);
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% TerminateSignalStreamingAob</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/towks.html">towks.tlc</a>
</span> <br></body></html>