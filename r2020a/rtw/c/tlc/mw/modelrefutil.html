<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>ModelReference
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>---<span style="padding-left:9.5px"></span>-------------------------------------------------
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SIM(SSYes)<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Coder<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>NONE
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>(Model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>sim<span style="padding-left:9.5px"></span>target)<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>---------------<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>------------
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>|
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SSYes<span style="padding-left:9.5px"></span>(rsim)<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SSNo(ert,grt)<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>SSYes(rsim)<span style="padding-left:9.5px"></span>SSNo(ert)
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SS:<span style="padding-left:9.5px"></span>SimStruct<span style="padding-left:9.5px"></span>based<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SSNo<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>equavalent<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>RTModelYes
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2019<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_MODELREFUTIL_") == 0
 <br><span class="tlc_assign">%assign</span> _MODELREFUTIL_ = 1
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:IsModelReferenceTarget<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceTarget" class="tlc_func">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> "NONE" != ::CompiledModel.ModelReferenceTargetType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:IsModelReferenceInlineOffTarget<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>inline<span style="padding-left:9.5px"></span>off
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceInlineOffTarget" class="tlc_func">IsModelReferenceInlineOffTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_switch">%switch</span> InlineParameters
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Cannot happen</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelReferenceSimTarget<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>Sim<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceSimTarget" class="tlc_func">IsModelReferenceSimTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> "SIM" == ::CompiledModel.ModelReferenceTargetType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelReferenceForASimstructBasedTarget<span style="padding-left:9.5px"></span>=========================
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceForASimstructBasedTarget" class="tlc_func">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::ModelReferenceForASimstructBasedTarget
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelReferenceNonSimstructBasedRTWTarget<span style="padding-left:9.5px"></span>=========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Is<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-simstruct<span style="padding-left:9.5px"></span>based<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>(i.e.,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>RSIM)
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceNonSimstructBasedRTWTarget" class="tlc_func">IsModelReferenceNonSimstructBasedRTWTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceRTWTarget">IsModelReferenceRTWTarget</a>() &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsSimstructBasedTarget<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_fkw">%function</span> <a id="IsSimstructBasedTarget" class="tlc_func">IsSimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::SimstructBasedTarget
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelReferenceRTWTarget<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceRTWTarget" class="tlc_func">IsModelReferenceRTWTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> "RTW" == ::CompiledModel.ModelReferenceTargetType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% IsModelReferenceRTWTarget</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelRefScalableBuild<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>scalable<span style="padding-left:9.5px"></span>(logic<span style="padding-left:9.5px"></span>written<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>.rtw<span style="padding-left:9.5px"></span>file)
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelRefScalableBuild" class="tlc_func">IsModelRefScalableBuild</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span>  <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.ModelReferenceGenScalableCode
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsVariableStepModelReferenceTarget<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>solver<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>step<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>building
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Note<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>simstruct<span style="padding-left:9.5px"></span>based<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>allowed.
</span> <br><span class="tlc_fkw">%function</span> <a id="IsVariableStepModelReferenceTarget" class="tlc_func">IsVariableStepModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.SolverType == "VariableStep"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsFPCIgnored<span style="padding-left:9.5px"></span>=====================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>FPC<span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>ignored
</span> <br><span class="tlc_fkw">%function</span> <a id="IsFPCIgnored" class="tlc_func">IsFPCIgnored</a>(fpc)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEMPTY</span>(fpc) || (<span class="tlc_bifunc">ISFIELD</span>(fpc, "IsAuto") &amp;&amp; fpc.IsAuto)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>HasModelReferenceBlocksInModel<span style="padding-left:9.5px"></span>====================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>contains
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>references<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>models.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="HasModelReferenceBlocksInModel" class="tlc_func">HasModelReferenceBlocksInModel</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.NumModelReferenceBlocksInModel > 0
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>HasModelReferenceBlocks<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>contains
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>references<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>models<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>calling<span style="padding-left:9.5px"></span>those<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="HasModelReferenceBlocks" class="tlc_func">HasModelReferenceBlocks</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.NumModelReferenceBlocks > 0
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetRootSystemSourceFileName<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>system.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetRootSystemSourceFileName" class="tlc_func">GetRootSystemSourceFileName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> (::CompiledModel.System[::CompiledModel.NumSystems - 1].SystemSourceFileName)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetRootSystemHeaderFileName<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>system.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetRootSystemHeaderFileName" class="tlc_func">GetRootSystemHeaderFileName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> (::CompiledModel.System[::CompiledModel.NumSystems - 1].SystemHeaderFileName)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnIsRootSystem<span style="padding-left:9.5px"></span>==================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>system.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnIsRootSystem" class="tlc_func">FcnIsRootSystem</a>(system)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> system.Type == "root"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefSFunctionName<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>s-function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefSFunctionName" class="tlc_func">GetModelrefSFunctionName</a>(name)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> suffix = <span class="tlc_bifunc">FEVAL</span>("coder.internal.modelRefUtil", name, "getBinExt", ::ProtectedModelReferenceTarget)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> name + suffix
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetBaseSystemIdx<span style="padding-left:9.5px"></span>===============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>Idx.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>standalone<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>generation,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>system
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>idx.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>hidden<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>subsystem.
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBaseSystemIdx" class="tlc_func">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.NumSystems - 2 : ::CompiledModel.NumSystems - 1
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> baseSysIdx
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetBaseModuleIdx<span style="padding-left:9.5px"></span>===============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>module<span style="padding-left:9.5px"></span>Idx.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>standalone<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>generation,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>module
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>idx.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>hidden<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>module.
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBaseModuleIdx" class="tlc_func">GetBaseModuleIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> System[baseSysIdx].CGIRModuleIdx
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>GetNumSystemsForCodeGen<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>target,<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>do<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>root.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetNumSystemsForCodeGen" class="tlc_func">GetNumSystemsForCodeGen</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSys = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.NumSystems - 1 : ::CompiledModel.NumSystems
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> numSys
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetNumSystemsForCodeGen</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/vssSigObj/tVSSSigObj.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBaseFileName" class="tlc_func">GetBaseFileName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystem = ::CompiledModel.System[<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseName   = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibGetSystemOutputHdrFileBaseName">SLibGetSystemOutputHdrFileBaseName</a>(baseSystem)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> baseName
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetBaseFileName</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>GetHideChildDefineSymbol<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>symbol/Identifier<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>#ifndef'd<span style="padding-left:9.5px"></span>sections<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>model.h.<span style="padding-left:9.5px"></span>These<span style="padding-left:9.5px"></span>sections<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>visible<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>parent
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>(parent<span style="padding-left:9.5px"></span>model.h).<span style="padding-left:9.5px"></span>Potential<span style="padding-left:9.5px"></span>sections<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>Typedef's<span style="padding-left:9.5px"></span>(BlockIO,<span style="padding-left:9.5px"></span>DWORK)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>Extern<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>declaration<span style="padding-left:9.5px"></span>(extern<span style="padding-left:9.5px"></span>rtB;)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>#include<span style="padding-left:9.5px"></span>"subsys.h"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>#include<span style="padding-left:9.5px"></span>"<span style="padding-left:9.5px"></span>child.h"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>subsystem<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>prototypes
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetHideChildDefineSymbol" class="tlc_func">GetHideChildDefineSymbol</a>(mode) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelRefScalableBuild">IsModelRefScalableBuild</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!GenerateClassInterface &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!::CompiledModel.AncestorAllocatesCoderDataGroups
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> mode == "ifndef"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = "#ifndef %<::CompiledModel.Name>_MDLREF_HIDE_CHILD_"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = retStr + "/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> mode == "endif"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = "#endif /*%<::CompiledModel.Name>_MDLREF_HIDE_CHILD_*/"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = retStr + "/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> mode == "define"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retStr = "%<::CompiledModel.Name>_MDLREF_HIDE_CHILD_" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retStr
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetBaseFileName</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetBaseFile<span style="padding-left:9.5px"></span>======================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>When<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>file
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>top<span style="padding-left:9.5px"></span>level<span style="padding-left:9.5px"></span>subsystem.<span style="padding-left:9.5px"></span>Otherwise,<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>return
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>file.
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBaseFile" class="tlc_func">GetBaseFile</a>(type)
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(type == "SystemHeader" || type == "SystemBody")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseName  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseFileName">GetBaseFileName</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseFile = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/codetemplatelib.html#SLibAddModelFile">SLibAddModelFile</a>(type,"Simulink", baseName)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> baseFile
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetBaseFile</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>IsModelReferenceBaseSys<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>hidden<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>system
</span> <br><span class="tlc_fkw">%function</span> <a id="IsModelReferenceBaseSys" class="tlc_func">IsModelReferenceBaseSys</a>(ss)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span>  <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() &amp;&amp; ss.SystemIdx == NumSystems-2
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LoadModelReferenceBlocksInterface<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Read<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>interfaces<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>mat<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>cache<span style="padding-left:9.5px"></span>them<span style="padding-left:9.5px"></span>in
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>::CompiledModel.ModelReferenceInterfaces
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/blocks/tconcat.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/AUTOSAR/Variants/tValueVariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LoadModelReferenceBlocksInterface" class="tlc_func">LoadModelReferenceBlocksInterface</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlocksHaveNonInlinedSfcns", 0)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ContainsMultiThreadBlocker", 0)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> zeroVec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CreateVectorWithValue">CreateVectorWithValue</a>(NumSampleTimes, 0)
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlocksReqClockTicks", zeroVec)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlocksReqLongClockTicks", zeroVec)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlocksUseStopReq", 0)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlocksUseContTimeOutputInconsistentWithStateAtMajorStep", 0)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ModelBlockNeedsTriggerTID", 0)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("ReferencedModelMayResetSolver", TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlsReqLongClockTicks = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CreateVectorWithValue">CreateVectorWithValue</a>(NumRuntimeExportedRates, 0)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlsActRateInteraction = <span class="tlc_bifunc">FEVAL</span>("zeros", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;NumRuntimeExportedRates, NumRuntimeExportedRates)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasMdlBlks = (<span class="tlc_bifunc">ISFIELD</span>(::CompiledModel,"ModelReferenceBlocks") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">SIZE</span>(::CompiledModel.ModelReferenceBlocks,0) > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !hasMdlBlks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlks = ::CompiledModel.ModelReferenceBlocks
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numMdlRefs = <span class="tlc_bifunc">SIZE</span>(mdlRefBlks,0)
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buildStartDir = <span class="tlc_bifunc">FEVAL</span>("rtwprivate","rtwattic","getStartDir")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel ModelReferenceInterfaces {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> rowIdx = numMdlRefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInfo = mdlRefBlks[rowIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mSysIdx    = mdlRefInfo[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bIdx       = mdlRefInfo[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlrefBlk  = System[mSysIdx].Block[bIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> mdlrefBlk
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlName = ParamSettings.ReferencedModelName
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needToAddBlockInterface = !<span class="tlc_bifunc">EXISTS</span>(ModelReferenceInterfaces.%<<span>mdlName</span>>Interface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needToLoadBlockInterface = needToAddBlockInterface || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( <span class="tlc_bifunc">EXISTS</span>(ModelReferenceInterfaces.%<<span>mdlName</span>>Interface.IsModelBlockInXILMode) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ModelReferenceInterfaces.%<<span>mdlName</span>>Interface.IsModelBlockInXILMode)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needToLoadBlockInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Normally, the model ref interface should be loaded from</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% the infoMATFile that matches the current target.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% But for top model accel, if the child model is in SIL/PIL mode</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% then we need to look for the RTW or NONE target.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> loadMatchingTarget = !Accelerator || (ParamSettings.XILCodeInterface == "None")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> loadMatchingTarget
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#LoadModelrefInterfaceInMatInfoFile">LoadModelrefInterfaceInMatInfoFile</a>(...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mdlName, buildStartDir)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We don't know the STF if we are in XIL mode - we need to query</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% the SIL/PIL interface.  But we also need to mark it as being </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% as such, because "fileName" could be different for ERT and SIM</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% target code if customized file naming is used.  If an Accelerator</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% mode block does exist, we should be using the modelInterface from</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% that, or else the wrong header file will get included (or we won't</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% even find the fileName field if the XIL model is in Top Model mode)</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> lIsModelRefTarget = (ParamSettings.XILCodeInterface == "Model reference")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> lFormattedBlockPath = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(mdlrefBlk)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkInterface = <span class="tlc_bifunc">FEVAL</span>("rtw.pil.ModelBlockPIL.getModelInterfaceForTLC", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lFormattedBlockPath, lIsModelRefTarget)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> blkInterface IsModelBlockInXILMode TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needToAddBlockInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.ModelReferenceInterfaces /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>mdlName</span>>Interface blkInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelReferenceInterfaces.%<<span>mdlName</span>>Interface=blkInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>PropModelReferenceBlocksInterface<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Propagate<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>interfaces<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="PropModelReferenceBlocksInterface" class="tlc_func">PropModelReferenceBlocksInterface</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasMdlBlks = (<span class="tlc_bifunc">ISFIELD</span>(::CompiledModel,"ModelReferenceBlocks") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">SIZE</span>(::CompiledModel.ModelReferenceBlocks,0) > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !hasMdlBlks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlks = ::CompiledModel.ModelReferenceBlocks
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numMdlRefs = <span class="tlc_bifunc">SIZE</span>(mdlRefBlks,0)
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> rowIdx = numMdlRefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInfo = mdlRefBlks[rowIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mSysIdx    = mdlRefInfo[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bIdx       = mdlRefInfo[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlrefBlk  = System[mSysIdx].Block[bIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(mdlrefBlk)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#PropModelBlocksInfoToCompiledModel">PropModelBlocksInfoToCompiledModel</a>(interface, mdlrefBlk)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>PropModelBlocksInfoToCompiledModel<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/AUTOSAR/Variants/tValueVariants.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/blocks/tconcat.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="PropModelBlocksInfoToCompiledModel" class="tlc_func">PropModelBlocksInfoToCompiledModel</a>(blkInterface, mdlrefBlock) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Non-inlined s-functions</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.HasNonInlinedSfcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlocksHaveNonInlinedSfcns = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% FirstInitCond</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.FirstInitConditionReq
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.IsFirstInitCondMacroUsed = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% If any of the submodels use a triggerTID, then this model</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% will also need it if it is aperiodic fcn-call model.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.FcnCallMdlRefTriggerTIDIsReq &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMMdlRefTriggerTIDMayBeRequired">RTMMdlRefTriggerTIDMayBeRequired</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlockNeedsTriggerTID = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% None of these fields are needed for simstruct based targets</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIsERTCodeFormat">SLibIsERTCodeFormat</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> InheritedFunctionCallSystems
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Add names of function-call systems that have reset states set to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% inherited until there are 10 systems, if we hit an error, </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% we limit the number of systems we show in the error.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSystemsInBlk = <span class="tlc_bifunc">SIZE</span>(blkInterface.InheritedFcnCallSystems,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSystemsInModel = NumInheritedFunctionCallSystems
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> numSystemsInModel < 10
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSlotsLeft = 10 - numSystemsInModel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSystemsToAdd = (numSlotsLeft < numSystemsInBlk) ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numSlotsLeft : numSystemsInBlk
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numSystemsToAdd
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.InheritedFunctionCallSystems ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;InheritedFunctionCallSystem %<blkInterface.InheritedFcnCallSystems[idx]>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.InheritedFunctionCallSystems.NumInheritedFunctionCallSystems = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numSystemsInModel + numSystemsToAdd
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Rate interaction</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.RequireMultiRateSampleHits
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If a submodel needs specialSampleHits, then the parent also</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% must be multi-tasking.  The single tasking timing engine</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% does not keep track of specialSampleHits for non-simstruct</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% based code.  The internal simulink timing engine does keep</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% track of specialSampleHits.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>() &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelName = ::CompiledModel.Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refName   = blkInterface.Name 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> msg = <span class="tlc_bifunc">FEVAL</span>("DAStudio.message", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Simulink:modelReference:multiTaskingInSingleTasking", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>modelName</span>>", "%<<span>refName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportError">LibReportError</a>("%<<span>msg</span>>")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.RequireMultiRateSampleHits = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For simstruct-based targets, we always use the ss macro</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.StopReqAccessed
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlocksUseStopReq = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.ContTimeOutputInconsistentWithStateAtMajorStepAccessed
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlocksUseContTimeOutputInconsistentWithStateAtMajorStep = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% TID ticks</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> origBlockFcn = ::BlockFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = NumSampleTimes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> iChildTid = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#MapParentTID2ChildTID">MapParentTID2ChildTID</a>(mdlrefBlock, i)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> iChildTid >= 0 <span class="tlc_comment">%% If the block has this tid</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.ClockTicksReq[iChildTid]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlocksReqClockTicks[i] = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For async sample times, assume that Outputs is</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% accessing this.  Do Enable/Disable need to be added?</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAsynchronousTriggeredTID">LibAsynchronousTriggeredTID</a>(i) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::BlockFcn = "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sutillib.html#SLibSetNeedAbsoluteTime">SLibSetNeedAbsoluteTime</a>(i)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAsynchronousTriggeredTID">LibAsynchronousTriggeredTID</a>(i) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::BlockFcn = origBlockFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.LongClockTicksReq[iChildTid]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ModelBlocksReqLongClockTicks[i] = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sutillib.html#SLibNeedAbsoluteTimeForTID">SLibNeedAbsoluteTimeForTID</a>(i)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.NeedFloatTime[iChildTid]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sutillib.html#SLibSetNeedFloatAbsoluteTime">SLibSetNeedFloatAbsoluteTime</a>(i)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = NumRuntimeExportedRates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> iChildTid = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#MapParentTID2ChildTID">MapParentTID2ChildTID</a>(mdlrefBlock, i)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> iChildTid >= 0 <span class="tlc_comment">%% If the block has this tid</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.RequireMultiRateSampleHits 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> j = NumRuntimeExportedRates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> jChildTid = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#MapParentTID2ChildTID">MapParentTID2ChildTID</a>(mdlrefBlock, j)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> jChildTid >= 0      <span class="tlc_comment">%% If the block has this tid   </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.ActualRateInteraction[iChildTid][jChildTid]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.MatrixOfRequireRateInteraction[i][j] = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.RequireRateInteraction = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Submodel DSM Declarations  </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subModelDecls = blkInterface.GlobalDSMDeclarations 
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISEMPTY</span>(subModelDecls))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "SubModelGlobalDSMDeclarations"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel SubModelGlobalDSMDeclarations {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numDecls = <span class="tlc_bifunc">SIZE</span>(subModelDecls.DSMDeclaration, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numDecls
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decl = subModelDecls.DSMDeclaration[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.SubModelGlobalDSMDeclarations Declarations %<<span>decl</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Submodel Non-inlined S-Function declarations</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subModelSFcns = blkInterface.NonInlinedSFcnNames
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISEMPTY</span>(subModelSFcns))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "SubModelNonInlinedSFunctions"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel SubModelNonInlinedSFunctions {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numSFcns = <span class="tlc_bifunc">SIZE</span>(subModelSFcns.Function, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numSFcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sfcn = subModelSFcns.Function[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.SubModelNonInlinedSFunctions Function %<<span>sfcn</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% NeedsGlobalTimingEngine</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> blkInterface.NeedsGlobalTimingEngine
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::tMdlRefTimingBridgeAccessed = TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% </span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !blkInterface.SupportsMultiThreading
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.ContainsMultiThreadBlocker = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Submodel Code Variants</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>(<span class="tlc_bifunc">ISFIELD</span>(blkInterface, "CodeVariants"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subModelCodeVariants = blkInterface.CodeVariants 
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Submodel variant control</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISEMPTY</span>(subModelCodeVariants))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(! <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "SubModelCodeVariants"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel SubModelCodeVariants {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> VariantData {} 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(<span class="tlc_bifunc">ISFIELD</span>(subModelCodeVariants.VariantControl, "Variant"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numVariants = <span class="tlc_bifunc">SIZE</span>(subModelCodeVariants.VariantControl.Variant, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numVariants
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> variant = subModelCodeVariants.VariantControl.Variant[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> VariantData Variant %<<span>variant</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.SubModelCodeVariants VariantControl VariantData
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Submodel AUTOSAR Parameters </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> ParamData {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>(<span class="tlc_bifunc">ISFIELD</span>(subModelCodeVariants.VariantParameter, "Pair"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numParams = <span class="tlc_bifunc">SIZE</span>(subModelCodeVariants.VariantParameter.Pair, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numParams
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pair = subModelCodeVariants.VariantParameter.Pair[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ParamData Pair %<<span>pair</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.SubModelCodeVariants VariantParameter ParamData
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%%PropModelBlocksInfoToCompiledModel</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetBuildStartDir<span style="padding-left:9.5px"></span>=================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>dir<span style="padding-left:9.5px"></span>where<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>user<span style="padding-left:9.5px"></span>initiated<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>build,<span style="padding-left:9.5px"></span>i.e.,<span style="padding-left:9.5px"></span>pwd<span style="padding-left:9.5px"></span>before
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>generation.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBuildStartDir" class="tlc_func">GetBuildStartDir</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buildStartDir = <span class="tlc_bifunc">FEVAL</span>("rtwprivate","rtwattic","getStartDir")
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> buildStartDir
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CacheModelrefInterfaceInMatInfoFile<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Store<span style="padding-left:9.5px"></span>interface<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>blocks<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>.mat<span style="padding-left:9.5px"></span>file.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>go<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>ref<span style="padding-left:9.5px"></span>lib<span style="padding-left:9.5px"></span>file.<span style="padding-left:9.5px"></span>However,<span style="padding-left:9.5px"></span>since
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>related<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>file,<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>keep<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>here.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/vssSigObj/tVSSSigObj.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CacheModelrefInterfaceInMatInfoFile" class="tlc_func">CacheModelrefInterfaceInMatInfoFile</a>(mdlref, type, interface) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType = "NONE"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() ? "SIM" : "RTW"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rtwinfomat = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", type,...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"binfo", "%<<span>mdlref</span>>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>targetType</span>>", interface)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LoadModelrefInterfaceInMatInfoFile<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Load<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>interface<span style="padding-left:9.5px"></span>info<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>mat<span style="padding-left:9.5px"></span>file.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LoadModelrefInterfaceInMatInfoFile" class="tlc_func">LoadModelrefInterfaceInMatInfoFile</a>(mdlref, buildStartDir)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Note: Use</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%    "SIM" : For model reference sim target or accelerator.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%            Note that we run model reference blocks in Simulink. However,</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%            we may use some of the interface field in the</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%            blocks/<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/blocks/modelref.html">modelref.tlc</a></span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%     "RTW": Standalone target or model reference coder target</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() || Accelerator || isRAccel
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType = "SIM"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType = "RTW"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelInterface = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"loadInterface", "binfo", mdlref, targetType)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> modelInterface
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="LoadModelrefInterfaceInMatInfoFileSpecificTarget" class="tlc_func">LoadModelrefInterfaceInMatInfoFileSpecificTarget</a>(mdlref, targetType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelInterface = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"loadInterface", "binfo", mdlref, targetType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> modelInterface
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LoadRTWInfoMatFileforTLC<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Load<span style="padding-left:9.5px"></span>rtwinfomat<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>cached<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>::CompiledModel.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LoadRTWInfoMatFileforTLC" class="tlc_func">LoadRTWInfoMatFileforTLC</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> FILESEP       = <span class="tlc_bifunc">FEVAL</span>("filesep")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType    = ::CompiledModel.ModelReferenceTargetType
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> infoStruct    = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", "loadforTLC", "binfo", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>(), targetType)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootFolder    = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", "getAnchorDir", "binfo", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>(), targetType)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel RTWInfoMatFile infoStruct
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% convert to absolute path</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.RTWInfoMatFile.sharedSourcesDir = <span class="tlc_bifunc">FEVAL</span>("fullfile", rootFolder, ::CompiledModel.RTWInfoMatFile.sharedSourcesDir, FILESEP)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefHasMdlInitPort<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>whether<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>initialize<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefHasMdlInitPort" class="tlc_func">GetModelrefHasMdlInitPort</a>(blk)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk.ParamSettings, "ModelEventPortNames")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blk.ParamSettings.ModelEventPortNames, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blk.ParamSettings.ModelEventPortNames[mweIdx] == "initialize"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefHasMdlTermPort<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>whether<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>terminate<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefHasMdlTermPort" class="tlc_func">GetModelrefHasMdlTermPort</a>(blk)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk.ParamSettings, "ModelEventPortNames")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blk.ParamSettings.ModelEventPortNames, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blk.ParamSettings.ModelEventPortNames[mweIdx] == "terminate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefHasMdlResetPort<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>whether<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>reset<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefHasMdlResetPort" class="tlc_func">GetModelrefHasMdlResetPort</a>(blk)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk.ParamSettings, "ModelEventPortTypes")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blk.ParamSettings.ModelEventPortTypes, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blk.ParamSettings.ModelEventPortTypes[mweIdx] == "RESET"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefHasMdlPeriodicPort<span style="padding-left:9.5px"></span>=========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>whether<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>periodic<span style="padding-left:9.5px"></span>event<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefHasMdlPeriodicPort" class="tlc_func">GetModelrefHasMdlPeriodicPort</a>(blk)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk.ParamSettings, "ModelEventPortTypes")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blk.ParamSettings.ModelEventPortTypes, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blk.ParamSettings.ModelEventPortTypes[mweIdx] == "PERIODIC"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetChildFirstMdlEventTIDForEventType<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>specified<span style="padding-left:9.5px"></span>event<span style="padding-left:9.5px"></span>type.<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>event<span style="padding-left:9.5px"></span>types<span style="padding-left:9.5px"></span>may<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>INITIALIZE,<span style="padding-left:9.5px"></span>TERMINATE,
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>RESET,<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>PERIODIC.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>RESET<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>PERIODIC,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>first<span style="padding-left:9.5px"></span>TID.<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TIDs<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>listed<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>vector<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>"T",<span style="padding-left:9.5px"></span>"I",<span style="padding-left:9.5px"></span>"R"<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>"P".
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>There<span style="padding-left:9.5px"></span>may<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>0<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>1<span style="padding-left:9.5px"></span>INITIALIZE<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>TERMINATE<span style="padding-left:9.5px"></span>TIDs<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>0<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>more<span style="padding-left:9.5px"></span>"RESET"<span style="padding-left:9.5px"></span>and
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"PERIODIC"<span style="padding-left:9.5px"></span>TIDs
</span> <br><span class="tlc_fkw">%function</span> <a id="GetChildFirstMdlEventTIDForEventType" class="tlc_func">GetChildFirstMdlEventTIDForEventType</a>(blk, eventPortType)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk.ParamSettings, "ModelEventPortTypes")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blk.ParamSettings.ModelEventPortTypes, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> blk.ParamSettings.ModelEventPortTypes[mweIdx] == eventPortType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> blk.ParamSettings.ModelEventPortTIDs[mweIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> -1
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetFcnCallParentTIDForChildTID<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>parent<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>refenced<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>maps<span style="padding-left:9.5px"></span>to
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TIDs<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>laid<span style="padding-left:9.5px"></span>out<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>series<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>child<span style="padding-left:9.5px"></span>TIDs<span style="padding-left:9.5px"></span>followed<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>parent<span style="padding-left:9.5px"></span>TIDs<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>vector<span style="padding-left:9.5px"></span>ChildTidToParentTidMap<span style="padding-left:9.5px"></span>[c1,<span style="padding-left:9.5px"></span>...,<span style="padding-left:9.5px"></span>cn,<span style="padding-left:9.5px"></span>p1,<span style="padding-left:9.5px"></span>...<span style="padding-left:9.5px"></span>pn]
</span> <br><span class="tlc_fkw">%function</span> <a id="GetFcnCallParentTIDForChildTID" class="tlc_func">GetFcnCallParentTIDForChildTID</a>(block, childTID)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcChildTidToParentMap = block.ParamSettings.ChildTidToParentTidMap
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numFcChildTids = <span class="tlc_bifunc">SIZE</span>(fcChildTidToParentMap, 1)/2
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> fcTID = numFcChildTids
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> childTID == fcChildTidToParentMap[fcTID]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> fcChildTidToParentMap[fcTID + numFcChildTids]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> -1
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelrefInterface<span style="padding-left:9.5px"></span>==============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>interface<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>cached
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>::CompiledModel
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelrefInterface" class="tlc_func">GetModelrefInterface</a>(blk)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% it must be model reference</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<span class="tlc_bifunc">TYPE</span>(blk.Type) == "Identifier" &amp;&amp; blk.Type == "ModelReference")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlName = blk.ParamSettings.ReferencedModelName
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(<span class="tlc_bifunc">EXISTS</span>(::CompiledModel.ModelReferenceInterfaces.%<<span>mdlName</span>>Interface))
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.ModelReferenceInterfaces.%<<span>mdlName</span>>Interface
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="IsBaseSystem" class="tlc_func">IsBaseSystem</a>(system)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isBase = 0
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isBase = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceBaseSys">IsModelReferenceBaseSys</a>(system)
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> system.Type == "root"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isBase = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> isBase
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="GetDataCFile" class="tlc_func">GetDataCFile</a>()
 <br>&nbsp;<span class="tlc_assign">%assign</span>  dataFile = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/codetemplatelib.html#SLibAddModelFile">SLibAddModelFile</a>("SystemBody","Simulink", "%<<span>Name</span>>_data")
 <br>&nbsp;<span class="tlc_return">%return</span> dataFile
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="GetPrivateHFile" class="tlc_func">GetPrivateHFile</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> privFile = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/codetemplatelib.html#SLibAddModelFile">SLibAddModelFile</a>("SystemHeader","Simulink", "%<<span>Name</span>>_private")
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> privFile
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="skipCanonicalSideInput" class="tlc_func">skipCanonicalSideInput</a>(aSystemInterace,function , aArgIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = aSystemInterace.CanonicalInputArgDef[aArgIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isOutputFcn = <span class="tlc_bifunc">TYPE</span>(function)=="String" &amp;&amp; (function == "OutputFcn" || function == "UpdateFcn" || function == "OutputUpdateFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> isOutputFcn &amp;&amp; GenerateClassInterface &amp;&amp; ci.ConnectedToSimulinkFunction == "yes" &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="skipCanonicalSideOutput" class="tlc_func">skipCanonicalSideOutput</a>(aSystemInterace,function , aArgIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = aSystemInterace.CanonicalOutputArgDef[aArgIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isOutputFcn = <span class="tlc_bifunc">TYPE</span>(function)=="String" &amp;&amp; (function == "OutputFcn" || function == "UpdateFcn" || function == "OutputUpdateFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> isOutputFcn &amp;&amp; GenerateClassInterface &amp;&amp; co.ConnectedToSimulinkFunction == "yes" &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>IsMultiInstanceERTOrModelReference<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>Multi<span style="padding-left:9.5px"></span>instance<span style="padding-left:9.5px"></span>ERT<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>reference
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="IsMultiInstanceERTOrModelReference" class="tlc_func">IsMultiInstanceERTOrModelReference</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> MultiInstanceERTCode || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetModelRefRegistrationFcnName<span style="padding-left:9.5px"></span>===================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>function,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>form<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>%<<span>BaseSubsysName</span>>_initialize
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetModelRefRegistrationFcnName" class="tlc_func">GetModelRefRegistrationFcnName</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.System[<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()].ModelInitializeFcn
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="CreateVectorWithValue" class="tlc_func">CreateVectorWithValue</a>(numElm, value)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vec = []
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numElm
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vec = vec + value
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> vec
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>MapParentTID2ChildTID<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Map<span style="padding-left:9.5px"></span>parents<span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>child<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>TID.<span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>-1<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>no<span style="padding-left:9.5px"></span>matching<span style="padding-left:9.5px"></span>tid<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>found.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="MapParentTID2ChildTID" class="tlc_func">MapParentTID2ChildTID</a>(block, parentTid)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = -1 <span class="tlc_comment">%% </span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(block)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "ChildTidToParentTidMap")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTidToParentMap = block.ParamSettings.ChildTidToParentTidMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check for Model Wide Events first</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> SLibNonInlinedIRTEvent<span class="tlc_bifunc">TID</span>(parentTid) &amp;&amp; <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "ModelWideEvents")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eventId = CompiledModel.SampleTime[parentTid].EventSourceName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mwe = blockInterface.ModelWideEvents
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(mwe,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">SIZE</span>(mwe,1) == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subId = mwe.id
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subTid = mwe.tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subId = mwe[mweIdx].id
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subTid = mwe[mweIdx].tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(subId, eventId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = <span class="tlc_bifunc">CAST</span>("Number", subTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numTids = <span class="tlc_bifunc">SIZE</span>(childTidToParentMap,1)/2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tidIdx = numTids
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(childTidToParentMap[tidIdx + numTids], parentTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = childTidToParentMap[tidIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockTid = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#FcnEffectiveTid">FcnEffectiveTid</a>(block)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">TYPE</span>(blockTid) != "Identifier" <span class="tlc_comment">%% Ignore constant/triggered sample time</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">TYPE</span>(blockTid) == "Number"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(blockTid, parentTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <span class="tlc_bifunc">TYPE</span>(blockTid) == "Vector"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tidIdx = <span class="tlc_bifunc">SIZE</span>(blockTid,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Note: Constant sample times are (-2)</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(blockTid[tidIdx], parentTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = tidIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> childTid
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnMapTIDForRateGrouping<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>We<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>remove<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>TID's<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>are
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>needed<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>do<span style="padding-left:9.5px"></span>rate<span style="padding-left:9.5px"></span>grouping.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>includes<span style="padding-left:9.5px"></span>constant<span style="padding-left:9.5px"></span>TID's<span style="padding-left:9.5px"></span>and
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TID1<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>Tid01Eq<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>submodel.
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnMapTIDForRateGrouping" class="tlc_func">FcnMapTIDForRateGrouping</a>(block, tid) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> output_tid = tid
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<span class="tlc_bifunc">TYPE</span>(tid) == "Vector") 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Remove the constant tid from the vector</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> output_tid = []
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = <span class="tlc_bifunc">SIZE</span>(tid,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> tid[i] != -2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> output_tid = output_tid + tid[i]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the size of output_tid is 1, make it a scalar</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">TYPE</span>(output_tid) == "Vector" &amp;&amp; <span class="tlc_bifunc">SIZE</span>(output_tid,1) == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> output_tid = output_tid[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the modelref block has only two TID's and Tid01Eq,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% we can treat the block as single rate.  Blocks that</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% have more than 2 tid's will be taken care of later.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> intf = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(block)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (<span class="tlc_bifunc">SIZE</span>(output_tid, 1) == 2) &amp;&amp; intf.Tid01Eq
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> output_tid = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> output_tid
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% FcnMapTIDForRateGrouping</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetNumberOfNoncontSignalsFeedingDerivPorts<span style="padding-left:9.5px"></span>========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>total<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>noncontinuous<span style="padding-left:9.5px"></span>signals<span style="padding-left:9.5px"></span>feeding<span style="padding-left:9.5px"></span>deriv<span style="padding-left:9.5px"></span>ports<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_fkw">%function</span> <a id="GetNumberOfNoncontSignalsFeedingDerivPorts" class="tlc_func">GetNumberOfNoncontSignalsFeedingDerivPorts</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel,"SolverResetInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.SolverResetInfo.NumNonContDerivSignals
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> 0
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% GetNumberOfNoncontSignalsFeedingDerivPorst</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>HasNonContSigFeedingOutport<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>outports<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>discontinuity<span style="padding-left:9.5px"></span>(a<span style="padding-left:9.5px"></span>continuous
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>time,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>fed<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>discrete<span style="padding-left:9.5px"></span>block).<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>works<span style="padding-left:9.5px"></span>for
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>modelref<span style="padding-left:9.5px"></span>targets.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="HasNonContSigFeedingOutport" class="tlc_func">HasNonContSigFeedingOutport</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>())  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasNonContOutput = TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = ::CompiledModel.ExternalOutputs.NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.ExternalOutputs.ExternalOutput[idx].NonContinuous
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasNonContOutput = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> hasNonContOutput
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% HasNonContSigFeedingOutport</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetNonContOutputPorts<span style="padding-left:9.5px"></span>=============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>array<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>length<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>outports.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Each
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>element<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>noncontinuous<span style="padding-left:9.5px"></span>signals<span style="padding-left:9.5px"></span>feeding<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>port.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetNonContOutputPorts" class="tlc_func">GetNonContOutputPorts</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>())  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nonContPorts = []
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = ::CompiledModel.ExternalOutputs.NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.ExternalOutputs.ExternalOutput[idx].NonContinuous
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numNonCont = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.SolverResetInfo.NonContOutputSignals.NonContOutput[idx].NumNonContOutputSignals
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nonContPorts = nonContPorts + %<<span>numNonCont</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nonContPorts = nonContPorts + 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> nonContPorts
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetGlobalTimingBridge<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>timing<span style="padding-left:9.5px"></span>bridge<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>modelref,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>mark<span style="padding-left:9.5px"></span>it
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>accessed.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>it's<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>accessed,<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>do<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>declare<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>pass
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>through<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>function.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetGlobalTimingBridge" class="tlc_func">SLibGetGlobalTimingBridge</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#HasModelReferenceBlocks">HasModelReferenceBlocks</a>()) 
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::tMdlRefTimingBridgeAccessed = TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMTimingBridgeIsReqFcn">RTMTimingBridgeIsReqFcn</a>() 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("timingBridge")
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> ::tMdlRefTimingBridge  
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibModelNeedsTriggerTIDArg<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Does<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>triggerTID<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>function?
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Note<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>models,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>parent<span style="padding-left:9.5px"></span>models<span style="padding-left:9.5px"></span>may
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>also<span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>function.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>triggerTID<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>triggerTID<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>rtModel,<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>some<span style="padding-left:9.5px"></span>submodel<span style="padding-left:9.5px"></span>uses<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>triggerTID.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibModelNeedsTriggerTIDArg" class="tlc_func">SLibModelNeedsTriggerTIDArg</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#HasModelReferenceBlocks">HasModelReferenceBlocks</a>())
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMMdlRefTriggerTIDIsReqFcn">RTMMdlRefTriggerTIDIsReqFcn</a>() || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.ModelBlockNeedsTriggerTID
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibMdlRefSystemPreprocessorCondition<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>block's<span style="padding-left:9.5px"></span>net<span style="padding-left:9.5px"></span>preprocessor<span style="padding-left:9.5px"></span>condition
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tContPortGecks.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tContPortFcnCall.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibMdlRefSystemPreprocessorCondition" class="tlc_func">SLibMdlRefSystemPreprocessorCondition</a>(block) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> condition = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> condition = block.ParamSettings.NetPreprocessorCondition
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> condition
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%Function:<span style="padding-left:9.5px"></span>SLibMdlRefNetInlineVariantPreprocessorCondition<span style="padding-left:9.5px"></span>=========
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>net<span style="padding-left:9.5px"></span>prepreproccesor<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>net<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>computed<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>localCondition<span style="padding-left:9.5px"></span>ANDed<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>instancecondition
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>localCondition<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>either<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>vss<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block(IV)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>netinstancecondition<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>either<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>vss<span style="padding-left:9.5px"></span>choice<span style="padding-left:9.5px"></span>cg<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>iv<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>cg<span style="padding-left:9.5px"></span>node
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>neither<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>graph<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>nor<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>present(think<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>modelref
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>without<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>inside<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>virtual<span style="padding-left:9.5px"></span>system)then<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>propagated<span style="padding-left:9.5px"></span>inline<span style="padding-left:9.5px"></span>variant
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>condition<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>modelblock
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibMdlRefNetInlineVariantPreprocessorCondition" class="tlc_func">SLibMdlRefNetInlineVariantPreprocessorCondition</a>(sysIdx, instIdx, blockIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vcRecord = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibVariantConditionRecord">SLibVariantConditionRecord</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockSystem = ::CompiledModel.System[sysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> block = ::CompiledModel.System[sysIdx].Block[blockIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> localCond = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> netCond = ""
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%%%% Determine local conditions of this model block %%%%%%%%%%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Try to get IV local condition</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> localCond = block.VariantCondition
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%%%%% Determine net condition of the model block %%%%%%%%%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% check if the modelref has vss net instance condition</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%Try to get the net instance conditions of IV</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> conditions = blockSystem.NetInlineVariantPreprocessorInstanceConditions
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> netCond = <span class="tlc_bifunc">ISEMPTY</span>(conditions) ? "" : conditions[instIdx]
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(localCond)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEMPTY</span>(netCond)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> netCond = localCond
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> !<span class="tlc_bifunc">ISEQUAL</span>(localCond,netCond)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Here we have performed a basic check of equality. However we really should be checking if one if tigher that the other</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% and assign the netCond to be the tighter of the two</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> netCond = "(" + netCond + ") &amp;&amp; (" + localCond + ")"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEMPTY</span>(netCond)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%check for propagated CGVCE</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> netCond = block.ParamSettings.NetPreprocessorCondition
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(netCond)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vcRecord.ifCond = "#if %<<span>netCond</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vcRecord.endIfCond = "#endif"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vcRecord.hasConds = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> vcRecord
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span> 
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Advanced<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibAppendToModelReferenceUserData<span style="padding-left:9.5px"></span>=========
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Appends<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>object<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>userdata<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>binfo<span style="padding-left:9.5px"></span>file
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>currently<span style="padding-left:9.5px"></span>being<span style="padding-left:9.5px"></span>built.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>can<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>be
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>targets,<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>SIM<span style="padding-left:9.5px"></span>target.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>cannot<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>Vector<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>Matrix.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>To<span style="padding-left:9.5px"></span>work<span style="padding-left:9.5px"></span>around<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>limitation,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>containing<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Vector<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>Matrix<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>pass<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>function.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibAppendToModelReferenceUserData" class="tlc_func">LibAppendToModelReferenceUserData</a>(data) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ! <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibIsModelReferenceRTWTarget">LibIsModelReferenceRTWTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = "To use LibAppendToModelReferenceUserData the target type must be RTW"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportError">LibReportError</a>(errTxt)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> datatype = <span class="tlc_bifunc">TYPE</span>(data)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ( <span class="tlc_bifunc">ISEQUAL</span>(datatype, "Vector") || <span class="tlc_bifunc">ISEQUAL</span>(datatype, "Matrix"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = "To use LibAppendToModelReferenceUserData the data cannot be a matrix or vector.  Instead, create a record with a field containing the vector or matrix data and pass this record into this function."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportError">LibReportError</a>(errTxt)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> targetType = ::CompiledModel.ModelReferenceTargetType
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelName     = ::CompiledModel.Name
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> infoStruct = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr",...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"appendToUserData", "binfo", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>modelName</span>>", "%<<span>targetType</span>>", data)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Advanced<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibGetModelReferenceUserData<span style="padding-left:9.5px"></span>==============
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Gets<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>user<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>model.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>vector<span style="padding-left:9.5px"></span>with
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>one<span style="padding-left:9.5px"></span>element<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>LibAppendToUserData<span style="padding-left:9.5px"></span>was<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>cannot<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>during<span style="padding-left:9.5px"></span>builds<span style="padding-left:9.5px"></span>where<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>SIM.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibGetModelReferenceUserData" class="tlc_func">LibGetModelReferenceUserData</a>(modelName)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibIsModelReferenceSimTarget">LibIsModelReferenceSimTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = "To use LibGetModelReferenceUserData the target type cannot be SIM"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportError">LibReportError</a>(errTxt)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> size = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"getUserDataSize", "binfo", "%<<span>modelName</span>>", "RTW")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> toReturn = []
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = size
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> midx = idx + 1 <span class="tlc_comment">%% M is 1 based, TLC is 0 based</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> data = <span class="tlc_bifunc">FEVAL</span>("coder.internal.infoMATFileMgr", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"getUserData", "binfo", "%<<span>modelName</span>>", "RTW", midx)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> toReturn = toReturn + data
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> toReturn
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Advanced<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibGetReferencedModelNames<span style="padding-left:9.5px"></span>================
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Gets<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>names<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>models<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>currently
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>being<span style="padding-left:9.5px"></span>built.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>two<span style="padding-left:9.5px"></span>fields:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>NumReferencedModels:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>integer<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>names
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>ReferencedModel:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>array<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>structures,<span style="padding-left:9.5px"></span>where<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>structure
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>Name<span style="padding-left:9.5px"></span>containing<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>name
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/ert/tcodevariants.m
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibGetReferencedModelNames" class="tlc_func">LibGetReferencedModelNames</a>()
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% If there are no model reference blocks, then </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% ::CompiledModel.ModelReferenceBlocks will not exist.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% As a result, we need to handle the case of no model reference </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% blocks separately.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ! <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#HasModelReferenceBlocks">HasModelReferenceBlocks</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> toReturn { }
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> toReturn NumReferencedModels 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> toReturn ReferencedModel []
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> toReturn
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlks = ::CompiledModel.ModelReferenceBlocks
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numMdlRefs = <span class="tlc_bifunc">SIZE</span>(mdlRefBlks,0)
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> modelNames { }
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Loop over each model reference block and get the name of the</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% referenced model.</span>
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> rowIdx = numMdlRefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInfo = mdlRefBlks[rowIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mSysIdx    = mdlRefInfo[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bIdx       = mdlRefInfo[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlrefBlk  = ::CompiledModel.System[mSysIdx].Block[bIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlName    = mdlrefBlk.ParamSettings.ReferencedModelName 
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(modelNames, mdlName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> modelNames %<<span>mdlName</span>> 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelNames = <span class="tlc_bifunc">FIELDNAMES</span>(modelNames)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numModelNames = <span class="tlc_bifunc">SIZE</span>(modelNames, 1)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Now that we have the names of all the models, construct</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% the structure to return.</span>
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> toReturn { }
 <br>&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> toReturn NumReferencedModels numModelNames
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> nameIdx = numModelNames
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> modelName = modelNames[nameIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> toReturn ReferencedModel { Name "%<<span>modelName</span>>"}
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> toReturn
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetSubsysDWorkForCPPMdlRefBlk<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>C++<span style="padding-left:9.5px"></span>encapsulation<span style="padding-left:9.5px"></span>MdlRef<span style="padding-left:9.5px"></span>support,<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>within<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-virtual<span style="padding-left:9.5px"></span>subsystem,<span style="padding-left:9.5px"></span>find<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>DWork<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>mdlref<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Subsystem.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetSubsysDWorkForCPPMdlRefBlk" class="tlc_func">SLibGetSubsysDWorkForCPPMdlRefBlk</a>(blk) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> GenerateClassInterface
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> blk.Type == "ModelReference"
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> blk.MdlRefIsCPPClassGenMode
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <span class="tlc_bifunc">ISFIELD</span>(blk,"CPPObjDWorkIdxInSubsys")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Containing subsystem</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sys            = ::CompiledModel.System[blk.BlockIdx[0]]
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Get one callsite of the containing subsystem</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> callSite       = sys.CallSites[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> graphicalSys   = ::CompiledModel.System[callSite[2]]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subsysBlk      = graphicalSys.Block[callSite[3]]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkIdx       = subsysBlk.DWork[blk.CPPObjDWorkIdxInSubsys].FirstRootIdx
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ::CompiledModel.DWorks.DWork[dworkIdx]
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% </span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetCPPMdlRefObjName<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>C++<span style="padding-left:9.5px"></span>encapsulation<span style="padding-left:9.5px"></span>MdlRef<span style="padding-left:9.5px"></span>support,<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>subsystem<span style="padding-left:9.5px"></span>idx
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>modelref<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>id,<span style="padding-left:9.5px"></span>find<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>object
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>member<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>can<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>called.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetCPPMdlRefObjName" class="tlc_func">SLibGetCPPMdlRefObjName</a>(sysIdx,blkIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> GenerateClassInterface
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[sysIdx].Block[blkIdx].Type == "ModelReference"   
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[sysIdx].Block[blkIdx].MdlRefIsCPPClassGenMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blk = System[sysIdx].Block[blkIdx]
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(blk)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blk,"CPPObjDWorkIdxInSubsys") &amp;&amp; !blkInterface.IsScalableBuild
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibGetSubsysDWorkForCPPMdlRefBlk">SLibGetSubsysDWorkForCPPMdlRefBlk</a>(blk)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlks = <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel,"ModelReferenceBlocks") ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.ModelReferenceBlocks : []
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlkInd = -1
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(mdlRefBlks)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> rowIdx = <span class="tlc_bifunc">SIZE</span>(mdlRefBlks,0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInfo = mdlRefBlks[rowIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mSysIdx = mdlRefInfo[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> bIdx    = mdlRefInfo[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> mSysIdx == sysIdx &amp;&amp; bIdx == blkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefBlkInd = rowIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInstCPPVar = ::CompiledModel.ModelBlock[mdlRefBlkInd].MdlRefInstanceVarName
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> mdlRefInstCPPVar
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%%SLibGetCPPMdlRefObjName</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants6.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGetModelBlockDWorkCategory" class="tlc_func">FcnGetModelBlockDWorkCategory</a>(aBlock) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetStructDWorkIdxForModelRefBlk">SLibGetStructDWorkIdxForModelRefBlk</a>(aBlock)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec =  ::CompiledModel.DWorks.DWork[aBlock.DWork[dworkIdx].FirstRootIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRecVarGroupIdx = dwRec.VarGroupIdx[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRecVarGroup = ::CompiledModel.VarGroups.VarGroup[dwRecVarGroupIdx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(dwRecVarGroupIdx) == "DWork"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> category = "DWork"
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(dwRecVarGroupIdx) == "HierarchicalCoderData"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> category = "CoderDataGroup" + ::CompiledModel.CoderDataGroup[dwRecVarGroup.CoderDataGroupIndex].Name
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> category = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(dwRecVarGroupIdx)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> category
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibCalcMdlRefObjSubsysAccessPath<span style="padding-left:9.5px"></span>=================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>C++<span style="padding-left:9.5px"></span>encapsulation<span style="padding-left:9.5px"></span>MdlRef<span style="padding-left:9.5px"></span>support,<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-inlined
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>subsystem<span style="padding-left:9.5px"></span>idx,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>modelref<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>id,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>instance<span style="padding-left:9.5px"></span>id,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>sysFcn,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>calculate<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>object<span style="padding-left:9.5px"></span>access<span style="padding-left:9.5px"></span>path<span style="padding-left:9.5px"></span>via<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>subsystem<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>dwork.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibCalcMdlRefObjSubsysAccessPath" class="tlc_func">SLibCalcMdlRefObjSubsysAccessPath</a>(sysIdx,blkIdx,instIdx,sysFcn) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> GenerateClassInterface
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[sysIdx].Block[blkIdx].Type == "ModelReference"   
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[sysIdx].Block[blkIdx].MdlRefIsCPPClassGenMode
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonbodlib.html#LibSystemIsRoot">LibSystemIsRoot</a>(System[sysIdx]) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceBaseSys">IsModelReferenceBaseSys</a>(System[sysIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> locCacheBlockFcn = ::BlockFcn
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::BlockFcn = sysFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetStructDWorkIdxForModelRefBlk">SLibGetStructDWorkIdxForModelRefBlk</a>(System[sysIdx].Block[blkIdx])
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> category = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#FcnGetModelBlockDWorkCategory">FcnGetModelBlockDWorkCategory</a>(System[sysIdx].Block[blkIdx])
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#FcnSysVarGroupIndex">FcnSysVarGroupIndex</a>(System[sysIdx], category, instIdx)
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(System[sysIdx].Block[blkIdx],"ModelInstVarGroupIndex") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[sysIdx].Block[blkIdx].ModelInstVarGroupIndex > -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkPath = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRVarGroupPath">SLibCGIRVarGroupPath</a>(System[sysIdx].Block[blkIdx].ModelInstVarGroupIndex,<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>(),TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkPath = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRVarGroupPath">SLibCGIRVarGroupPath</a>(varGroupIdx, baseSysIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[sysIdx].CrossNoArgFcnBound)
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefInstCPPVar = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibGetCPPMdlRefObjName">SLibGetCPPMdlRefObjName</a>(System[sysIdx].SystemIdx,...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[sysIdx].Block[blkIdx].BlockIdx[2])
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cppVarPath = dworkPath + mdlRefInstCPPVar
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::BlockFcn = locCacheBlockFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> cppVarPath
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%%SLibCalcMdlRefObjSubsysAccessPath</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibModelHierarchyContainsNoninlinedSfcn<span style="padding-left:9.5px"></span>===========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>below<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-inlined
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>S-Function
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibModelHierarchyContainsNoninlinedSfcn" class="tlc_func">SLibModelHierarchyContainsNoninlinedSfcn</a>()
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.NumChildSFunctions > 0 || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.ModelBlocksHaveNonInlinedSfcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetAcceleratorStringForFunction<span style="padding-left:9.5px"></span>===================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>accelerator<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>call
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>back<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Simulink<span style="padding-left:9.5px"></span>engine<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>call<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>certain<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>method.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/blocks/tconcat.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetAcceleratorStringForFunction" class="tlc_func">GetAcceleratorStringForFunction</a>(sysFcn) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = ""
 <br>&nbsp;&nbsp;<span class="tlc_switch">%switch</span> (sysFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Initialize"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_INITIALIZE_CONDITIONS"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "SetupRuntimeResources"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_SETUP_RUNTIME_RESOURCES"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Enable"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_RTW_GENERATED_ENABLE"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Disable"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_RTW_GENERATED_DISABLE"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Output"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_OUTPUTS"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Update"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_UPDATE"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "FinalizeDims"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_FINALIZE_ALL_DIMS"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "ZeroCrossing"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_ZERO_CROSSINGS"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Projection"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_PROJECTION"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Derivative"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_DERIVATIVES"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "ForcingFunction"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_FORCINGFUNCTION"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "MassMatrix"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_MASSMATRIX"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Terminate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_TERMINATE"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "CleanupRuntimeResources"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accFunction = "SS_CALL_MDL_CLEANUP_RUNTIME_RESOURCES"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> accFunction
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSerializeFcnArgs<span style="padding-left:9.5px"></span>=============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>out<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>vector<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>arguments<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>comma
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>separated<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSerializeFcnArgs" class="tlc_func">SLibSerializeFcnArgs</a>(recArgs)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnArgs = ""
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <span class="tlc_bifunc">SIZE</span>(recArgs,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> idx == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnArgs = recArgs[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnArgs = fcnArgs + ", %<recArgs[idx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnArgs
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetModelArgumentIdentifier<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>workspace<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>for
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/blocks/tconcat.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetModelArgumentIdentifier" class="tlc_func">SLibGetModelArgumentIdentifier</a>(canPrmDef, canPrmIdx)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% If the arg is not used, just use the name in the canPrmDef since</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% the variable won't really be used as an argument.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (canPrmDef.IsUsed == "no")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ident = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canPrmDef)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseIdx = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> callSite = System[baseIdx].CallSites[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ssBlk       = System[callSite[2]].Block[callSite[3]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childPrmIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssBlk.CallSiteInfo.CanonicalPrmArg[canPrmIdx].ChildPrmArgIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canPrm  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#SLibGetCallSitePrmArg">SLibGetCallSitePrmArg</a>(callSite, childPrmIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ident = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canPrm.ASTNode)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ident 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetModelRefGlobalDSMDeclarations<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>declarations<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>DSM<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>targets
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants6.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetModelRefGlobalDSMDeclarations" class="tlc_func">SLibGetModelRefGlobalDSMDeclarations</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> dsmDeclarations {}
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numDWorks = DWorks.NumDWorks
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwork = DWorks.DWork[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwork.GlobalDSM
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> type = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordContainerTypeName">SLibGetRecordContainerTypeName</a>(dwork)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> wide = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibOptionalVectorWidth">LibOptionalVectorWidth</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordWidth">LibGetRecordWidth</a>(dwork))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name = dwork.SFcnWrapperDSMName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> declaration = "%<<span>type</span>> %<<span>name</span>>%<<span>wide</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> dsmDeclarations DSMDeclaration { ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name         <span class="tlc_bifunc">STRING</span>(name) ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Declaration  <span class="tlc_bifunc">STRING</span>(declaration) ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExternNeeded TLC_TRUE ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>(<span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "SubModelGlobalDSMDeclarations"))  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> submodelDecls = ::CompiledModel.SubModelGlobalDSMDeclarations 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numDecls = <span class="tlc_bifunc">SIZE</span>(submodelDecls.Declarations, 1) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numDecls 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decl = submodelDecls.Declarations[idx] 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decl.ExternNeeded = TLC_FALSE 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> dsmDeclarations DSMDeclaration %<<span>decl</span>> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> 
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> dsmDeclarations
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSetModelRefCacheFcnCallInputInfo<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>supporting<span style="padding-left:9.5px"></span>root-level<span style="padding-left:9.5px"></span>function-call<span style="padding-left:9.5px"></span>inports,
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>cache<span style="padding-left:9.5px"></span>away<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>about<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>task.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/rtw/targets/AUTOSAR/Variants/tValueVariants.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSetModelRefCacheFcnCallInputInfo" class="tlc_func">SLibSetModelRefCacheFcnCallInputInfo</a>(portIdx, fcnType, taskName, tid, isAsync, groupIdx, dworkIdx, portName) <span class="tlc_fkw">void</span>
 <br><span class="tlc_assert">%assert</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() || Accelerator || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibHasFcnCallRootInport">SLibHasFcnCallRootInport</a>()
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlRefSys = ::CompiledModel.System[<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#LibIsSystemField">LibIsSystemField</a>(mdlRefSys, "FcnCallInputInfo")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnCallInfo {}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#LibAddToSystem">LibAddToSystem</a>(mdlRefSys, "FcnCallInputInfo", fcnCallInfo)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currField = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#LibGetSystemField">LibGetSystemField</a>(mdlRefSys, "FcnCallInputInfo")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% We don't seem to handle going from OutputUpdate to Output, just</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% switch the fcnType here.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> fcnType == "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnType = "Output"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(currField) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <span class="tlc_bifunc">SIZE</span>(currField.FcnCallInfo, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> info = currField.FcnCallInfo[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> info.TaskName == taskName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% It is possible this function is called multiple times for the same taskName, </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% e.g., child module calls a parent module's SubFunction, but we only want to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% register the same taskName once</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> currField FcnCallInfo { ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;FcnType  <span class="tlc_bifunc">STRING</span>(fcnType); ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;TaskName <span class="tlc_bifunc">STRING</span>(taskName); ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;TID      tid;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;PortIdx  portIdx;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;isAsync  isAsync;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;FcnCallPortGroupIndex groupIdx;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;dworkIndex dworkIdx;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;PortName <span class="tlc_bifunc">STRING</span>(portName)}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#LibSetSystemField">LibSetSystemField</a>(mdlRefSys, "FcnCallInputInfo", currField)>  
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSetModelRefCachePeriodicFcnCallInputInfo<span style="padding-left:9.5px"></span>=====================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>supporting<span style="padding-left:9.5px"></span>root-level<span style="padding-left:9.5px"></span>periodic<span style="padding-left:9.5px"></span>function-call<span style="padding-left:9.5px"></span>inports,
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>cache<span style="padding-left:9.5px"></span>away<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>about<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>periodic<span style="padding-left:9.5px"></span>task.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSetModelRefCachePeriodicFcnCallInputInfo" class="tlc_func">SLibSetModelRefCachePeriodicFcnCallInputInfo</a>(portIdx, fcnType, fcnName, tid, dworkIndex, portName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibSetModelRefCacheFcnCallInputInfo">SLibSetModelRefCacheFcnCallInputInfo</a>(portIdx, fcnType, fcnName, tid, TLC_FALSE, -1, dworkIndex, portName)>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSetModelRefCacheAsyncFcnCallInputInfo<span style="padding-left:9.5px"></span>========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>supporting<span style="padding-left:9.5px"></span>root-level<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>function-call<span style="padding-left:9.5px"></span>inports,<span style="padding-left:9.5px"></span>this
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>inserted<span style="padding-left:9.5px"></span>s-function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>cache<span style="padding-left:9.5px"></span>away<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>about<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>async
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>task.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSetModelRefCacheAsyncFcnCallInputInfo" class="tlc_func">SLibSetModelRefCacheAsyncFcnCallInputInfo</a>(taskName, portIdx, tid, fcnType, groupIndex, dworkIndex, portName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibSetModelRefCacheFcnCallInputInfo">SLibSetModelRefCacheFcnCallInputInfo</a>(portIdx, fcnType, taskName, tid, TLC_TRUE, groupIndex, dworkIndex, portName)>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>ModelBlockHasAsyncInput<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Helper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>determine<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>function-call
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="ModelBlockHasAsyncInput" class="tlc_func">ModelBlockHasAsyncInput</a>(tid, block) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> block.ParamSettings.HasAsyncFcnCallInput &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAsynchronousTriggeredTID">LibAsynchronousTriggeredTID</a>(tid) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibNonInlinedModelWideEventTID">SLibNonInlinedModelWideEventTID</a>(tid)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibIsModelRefAsyncTID<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>We<span style="padding-left:9.5px"></span>now<span style="padding-left:9.5px"></span>support<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>TID's<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>models,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>they
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>come<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>function-call<span style="padding-left:9.5px"></span>inport.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibIsModelRefAsyncTID" class="tlc_func">SLibIsModelRefAsyncTID</a>(tid)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() &amp;&amp; <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAsynchronousTriggeredTID">LibAsynchronousTriggeredTID</a>(tid)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibCreateWrapperForModelBlockFCI<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Core<span style="padding-left:9.5px"></span>method<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>wrapper<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>function-call<span style="padding-left:9.5px"></span>input.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibCreateWrapperForModelBlockFCI" class="tlc_func">SLibCreateWrapperForModelBlockFCI</a>(modelBlock, fcnType) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(modelBlock.WrapperFcns, "%<<span>fcnType</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> ""
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnBuffers = modelBlock.WrapperFcns.%<<span>fcnType</span>>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> locSS = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetModelSS">RTMGetModelSS</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = ::tSimStructType + " *const " + locSS
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + ", int_T " + ::tControlPortIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + ", int_T " + ::tTID
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnBuf
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <span class="tlc_bifunc">SIZE</span>(fcnBuffers,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnBuffer = modelBlock.WrapperFcns.%<<span>fcnType</span>>[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = <span class="tlc_bifunc">CAST</span>("Number", fcnBuffer.TID)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isAsync = fcnBuffer.isAsync
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnPortIdx = fcnBuffer.FcnPortIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* Force non-inlined (FNI) function call stub
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* for '%<<span>modelBlock.Name</span>>'
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssFcnCallErr_T %<<span>fcnBuffer.FcnName</span>>(%<<span>args</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isAsync &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fcnPortIdx < modelBlock.NumDataInputPorts &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelBlock.ParamSettings.IsTopAsync[fcnBuffer.FcnCallPortGroupIndex] &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fcnType == "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/asynclib.html#SLibDumpOutputUpdateCodeForAsyncTid">SLibDumpOutputUpdateCodeForAsyncTid</a>(tid)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <span class="tlc_bifunc">ISFIELD</span>(modelBlock, "CallerBlkInfo") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelBlock.CallerBlkInfo[fcnPortIdx].CallerBlkPortEl >= 0
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> callerBlkIdx = modelBlock.CallerBlkInfo[fcnPortIdx].CallerBlkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sfcnBlkEl    = modelBlock.CallerBlkInfo[fcnPortIdx].CallerBlkPortEl
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sfcnBlk      = System[callerBlkIdx[0]].Block[callerBlkIdx[2]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#SLibBlockExecuteSysFcn">SLibBlockExecuteSysFcn</a>(sfcnBlk, sfcnBlkEl, fcnType)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockAsyncFcnCallInput">CallModelBlockAsyncFcnCallInput</a>(modelBlock, fcnBuffer.FcnPortIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tid, fcnType)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;return SS_FCNCALL_NO_ERR;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnBuf
 <br>&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenerateFNIStubsForModelBlocks<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>non-inlined<span style="padding-left:9.5px"></span>s-function<span style="padding-left:9.5px"></span>calling<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>function-call
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>inputs,<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>wrapper<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>attach<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>s-function.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tMdlRefWithFcnOnDataAsVSSChoice.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenerateFNIStubsForModelBlocks" class="tlc_func">SLibGenerateFNIStubsForModelBlocks</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnBuff
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idIdx = ::CompiledModel.NumModelReferenceBlocks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkIdx    = ::CompiledModel.ModelReferenceBlocks[idIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlBlock  = ::CompiledModel.System[blkIdx[0]].Block[blkIdx[1]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(mdlBlock, "WrapperFcns")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibCreateWrapperForModelBlockFCI">SLibCreateWrapperForModelBlockFCI</a>(mdlBlock, "OutputUpdate")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibCreateWrapperForModelBlockFCI">SLibCreateWrapperForModelBlockFCI</a>(mdlBlock, "Enable")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibCreateWrapperForModelBlockFCI">SLibCreateWrapperForModelBlockFCI</a>(mdlBlock, "Disable")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnBuff
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnBuff
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibCallModelBlockFcnCallInput<span style="padding-left:9.5px"></span>====================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Called<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>s-functions<span style="padding-left:9.5px"></span>making<span style="padding-left:9.5px"></span>function-calls<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>blocks.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tMdlRefWithFcnOnDataAsVSSChoice.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibCallModelBlockFcnCallInput" class="tlc_func">SLibCallModelBlockFcnCallInput</a>(blkFcn, sysIdx, blkIdx, portIdx, ...
 <br>&nbsp;&nbsp;tid, callTaskTopBlk, modIdx, fcnIdx, blkFcnIdx) void
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isOutputs = (blkFcn == "Outputs")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevGenOutputs  = ::CompiledModel.GeneratingOutputsCode
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevBlockFcnIdx = ::CurrentBlockFcnIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevModuleIdx   = ::CurrentModuleIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevFunctionIdx = ::CurrentFunctionIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevRollThreshold = ::CompiledModel.RollThreshold
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentBlockFcnIdx = blkFcnIdx
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> ::CurrentModuleIdx == modIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentModuleIdx = modIdx
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> ::CurrentFunctionIdx == fcnIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentFunctionIdx = fcnIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.GeneratingOutputsCode = isOutputs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnBuff
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% To generate the right code for a branched/wide async fcn-call</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% initiator, we need to let the s-function make the call.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> callTaskTopBlk
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkIdx = [%<<span>sysIdx</span>>, %<<span>blkIdx</span>>, %<<span>portIdx</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> taskTopBlock = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/asynclib.html#FcnGetTaskTopSfcnBlock">FcnGetTaskTopSfcnBlock</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#SLibGetAsyncSysCodeForTaskTopBlk">SLibGetAsyncSysCodeForTaskTopBlk</a>(taskTopBlock, tid, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ModelReference", blkIdx)>/
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> system = System[sysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> system
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> block = Block[blkIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> block.OutputBlockFcnIdx = blkFcnIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> block
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkcode = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockAsyncFcnCallInput">CallModelBlockAsyncFcnCallInput</a>(block, portIdx, tid, blkFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(blkcode)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibIfVariantCondition">SLibIfVariantCondition</a>(block)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockAsyncFcnCallInput">CallModelBlockAsyncFcnCallInput</a>(block, portIdx, tid, blkFcn)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibEndIfVariantCondition">SLibEndIfVariantCondition</a>(block)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>  
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnBuff
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CompiledModel.GeneratingOutputsCode = prevGenOutputs
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentModuleIdx = prevModuleIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentFunctionIdx = prevFunctionIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CurrentBlockFcnIdx = prevBlockFcnIdx
 <br>&nbsp;<span class="tlc_return">%return</span> fcnBuff
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetModelBlockFcnCallInputInfo<span style="padding-left:9.5px"></span>=================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>FcnCallInfo<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>specified<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>fcnType<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>Model<span style="padding-left:9.5px"></span>block.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tMdlRefWithFcnOnDataAsVSSChoice.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetModelBlockFcnCallInputInfo" class="tlc_func">SLibGetModelBlockFcnCallInputInfo</a>(block, portIdx, fcnType) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(block)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCallInfo = []
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% We treat OutputUpdate as Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> fcnType == "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnType = "Output"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (portIdx != -1)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Check for the existance of FcnCallInputs. It is possible to run into this scenario for an</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% inactive variant function-call input of the model block when the model block also has Init/Reset</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% event ports (model block is present but no function-call inputs). </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% See TestPoint_mExportFcnInitSSTop in </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% TopTester: matlab/test/toolbox/simulink/variants/inlineVariants/modelref/tmdlref_basic.m</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "FcnCallInputs")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For now, loop over the info to find the one associated</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% with the port.  We should make this a direct index.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <span class="tlc_bifunc">SIZE</span>(blockInterface.FcnCallInputs, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> locCallInfo = blockInterface.FcnCallInputs[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> locCallInfo.PortIdx == portIdx &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;locCallInfo.FcnType == fcnType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCallInfo = locCallInfo
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCallInfo
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockInitializePortFunction<span style="padding-left:9.5px"></span>=================================
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockInitializePortFunction" class="tlc_func">CallModelBlockInitializePortFunction</a>(block, blockInterface, localTid) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "RegistrationFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"RegistrationFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface.RegistrationFcn, 0, localTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Restore PWorks, parameters, that are cached only once in the DWork</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% structure of the referenced model. These are wiped out by the registration</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% function above and need to be restored. There are two possibilites here.</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% (1) Referenced model is multi-instance. Here, we create another DWork on</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% the Model block to back up DWork after irst initialization.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitRestoreDataDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> restoreDataDWorkIdx = block.ParamSettings.InitRestoreDataDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(restoreDataDWorkIdx != -1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibModelBlockRTMAllocateInParent">SLibModelBlockRTMAllocateInParent</a>(block, blockInterface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rtmArg = block.Identifier
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"memcpy((void *) &amp;(%<<span>rtmArg</span>>), " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(void *) &amp;(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[restoreDataDWorkIdx],"","",0)>.rtm), " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sizeof(%<<span>rtmArg</span>>));"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"memcpy((void *) &amp;(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[0],"","",0)>), " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(void *) &amp;(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[restoreDataDWorkIdx],"","",0)>), " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sizeof(%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[0],"","",0)>));/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% (2) Referenced model is single instance. The DWork structure is hidden from</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% parent model. We create additional APIs in the sim target of the referenced</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% model to backup and restore the data.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> blockInterface.HasPrivateDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlName = block.ParamSettings.ReferencedModelName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibGetCopyFromInitRestoreDataFcnNameForModel">SLibGetCopyFromInitRestoreDataFcnNameForModel</a>(mdlName) + "();"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Initialize all output ports to ground value.</span>
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> block
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needIterVar = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> portIdx = NumDataOutputPorts
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalWidth">LibBlockOutputSignalWidth</a>(portIdx) > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needIterVar = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "{/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> iterVar = "i_%<block.BlockIdx[0]>_%<block.BlockIdx[2]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needIterVar
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "int_T %<<span>iterVar</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> portIdx = NumDataOutputPorts
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeId = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibBlockOutputSignalAliasedThruDataTypeId">LibBlockOutputSignalAliasedThruDataTypeId</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> groundVal = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetGroundValueFromId">LibGetGroundValueFromId</a>(dTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portWidth = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalWidth">LibBlockOutputSignalWidth</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalIsComplex">LibBlockOutputSignalIsComplex</a>(portIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> portWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"for (%<<span>iterVar</span>> = 0; %<<span>iterVar</span>> < %<<span>portWidth</span>>; %<<span>iterVar</span>>++) {/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, iterVar, "", 0)>.re = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, iterVar, "", 0)>.im = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, iterVar, "", 0)> = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, "", "", 0)>.re = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, "", "", 0)>.im = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portIdx, "", "", 0)> = %<<span>groundVal</span>>;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "StartFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"StartFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface.StartFcn, 0, localTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "SystemInitializeFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"SystemInitializeFcn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface.SystemInitializeFcn, 0, localTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "EnableFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"EnableFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface.EnableFcn, 0, localTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Call ParameterChangeEvent function.</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prmEventFcnInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelWideEventFcnInfo">GetModelWideEventFcnInfo</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, "ParameterChangeEvent", "")
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> prmEventFcnInfo.eventTid != -1 &amp;&amp; !<span class="tlc_bifunc">ISEMPTY</span>(prmEventFcnInfo.fcnName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"OutputFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">GETFIELD</span>(blockInterface, prmEventFcnInfo.fcnName), 0, prmEventFcnInfo.eventTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> = 1U;/n"
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="GetModelWideEventFcnInfo" class="tlc_func">GetModelWideEventFcnInfo</a>(blockInterface, eventType, eventID) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = -1
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcn = ""
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "ModelWideEvents")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(blockInterface.ModelWideEvents, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Terminate function, Reset function, or Reset With Init function</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (eventType == blockInterface.ModelWideEvents[mweIdx].eventType) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((eventType != "ResetEvent" &amp;&amp; eventType != "ResetWithInitEvent") || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventID == blockInterface.ModelWideEvents[mweIdx].id)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = blockInterface.ModelWideEvents[mweIdx].tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outFcn = "OutputTID" + <span class="tlc_bifunc">SPRINTF</span>("%d", tid) + "Fcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outUpdateFcn = "OutputUpdateTID" + <span class="tlc_bifunc">SPRINTF</span>("%d", tid) + "Fcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, outFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcn = outFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, outUpdateFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcn = outUpdateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> retVal {eventTid tid; fcnName fcn}
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockTerminatePortFunction<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockTerminatePortFunction" class="tlc_func">CallModelBlockTerminatePortFunction</a>(block, blockInterface, localTid) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> termInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelWideEventFcnInfo">GetModelWideEventFcnInfo</a>(blockInterface, "PowerDownEvent", "")  
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> termInfo.eventTid != -1 &amp;&amp; !<span class="tlc_bifunc">ISEMPTY</span>(termInfo.fcnName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"OutputFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">GETFIELD</span>(blockInterface, termInfo.fcnName), 0, termInfo.eventTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, "TerminateFcn")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"TerminateFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface.TerminateFcn, 0, localTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> = 0U;/n"
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%Function:<span style="padding-left:9.5px"></span>CallModelBlockResetPortFunction<span style="padding-left:9.5px"></span>====================================
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockResetPortFunction" class="tlc_func">CallModelBlockResetPortFunction</a>(block, blockInterface, eventPortName, localTid) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> resetInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelWideEventFcnInfo">GetModelWideEventFcnInfo</a>(blockInterface, "ResetEvent", eventPortName)  
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> resetInfo.eventTid != -1 &amp;&amp; !<span class="tlc_bifunc">ISEMPTY</span>(resetInfo.fcnName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"OutputFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">GETFIELD</span>(blockInterface, resetInfo.fcnName), 0, resetInfo.eventTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> resetWithInitInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelWideEventFcnInfo">GetModelWideEventFcnInfo</a>(blockInterface, "ResetWithInitEvent", eventPortName)  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> resetWithInitInfo.eventTid != -1 &amp;&amp; !<span class="tlc_bifunc">ISEMPTY</span>(resetWithInitInfo.fcnName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"OutputFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">GETFIELD</span>(blockInterface, resetWithInitInfo.fcnName), 0, resetWithInitInfo.eventTid, 0, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prmEventFcnInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelWideEventFcnInfo">GetModelWideEventFcnInfo</a>( ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, "ParameterChangeEvent", "")
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> prmEventFcnInfo.eventTid != -1 &amp;&amp; !<span class="tlc_bifunc">ISEMPTY</span>(prmEventFcnInfo.fcnName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"OutputFcn", blockInterface, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">GETFIELD</span>(blockInterface, prmEventFcnInfo.fcnName), 0, prmEventFcnInfo.eventTid, 0, "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockOutputUpdateFunction<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockOutputUpdateFunction" class="tlc_func">CallModelBlockOutputUpdateFunction</a>( ...
 <br>&nbsp;&nbsp;block, blockInterface, childTID, useTIDinFcnName) void
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Look for combined output-update function first.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> useTIDinFcnName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputUpdateFcn = "OutputUpdateTID" + <span class="tlc_bifunc">SPRINTF</span>("%d", childTID) + "Fcn"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputUpdateFcn = "OutputUpdateFcn"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, outputUpdateFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, "OutputUpdateFcn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, <span class="tlc_bifunc">GETFIELD</span>(blockInterface, outputUpdateFcn), 0, childTID, 0,"")
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If combined output-update function not found, look for individual output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% and update functions.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> useTIDinFcnName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputFcn = "OutputTID" + <span class="tlc_bifunc">SPRINTF</span>("%d", childTID) + "Fcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputFcn = "OutputFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, outputFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, "OutputFcn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, <span class="tlc_bifunc">GETFIELD</span>(blockInterface, outputFcn), 0, childTID, 0,"")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> useTIDinFcnName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateFcn = "UpdateTID" + <span class="tlc_bifunc">SPRINTF</span>("%d", childTID) + "Fcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateFcn = "UpdateFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(blockInterface, updateFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, "UpdateFcn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, <span class="tlc_bifunc">GETFIELD</span>(blockInterface, updateFcn), 0, childTID, 0,"")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockPeriodicEventPortFunction<span style="padding-left:9.5px"></span>=============================
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockPeriodicEventPortFunction" class="tlc_func">CallModelBlockPeriodicEventPortFunction</a>(block, blockInterface, childTID) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Find output, update, or combined output-update function for TID</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockOutputUpdateFunction">CallModelBlockOutputUpdateFunction</a>(block, blockInterface, childTID, TLC_TRUE)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEMPTY</span>(fcnCall) &amp;&amp; childTID == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If we cannot find the function to call, this may be a single rate</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% or sample time independent model. Find output, update, or combined</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% output-update function without using TID in the function name.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockOutputUpdateFunction">CallModelBlockOutputUpdateFunction</a>(block, blockInterface, childTID, TLC_FALSE)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockModelEventPortFunction<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Call<span style="padding-left:9.5px"></span>methods<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>wide<span style="padding-left:9.5px"></span>event<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>referenced
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockModelEventPortFunction" class="tlc_func">CallModelBlockModelEventPortFunction</a>(block, eventPortName, eventPortType, localTid) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(block)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> eventPortType == "INITIALIZE"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ================</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Initialize Event</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ================</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitStatusDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(initStatDWorkIdx != -1)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 1U) {/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefHasMdlTermPort">GetModelrefHasMdlTermPort</a>(block)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockTerminatePortFunction">CallModelBlockTerminatePortFunction</a>(block, blockInterface, localTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr_wrapper(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidMdlInitFcnCall/", 2,/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockInitializePortFunction">CallModelBlockInitializePortFunction</a>(block, blockInterface, localTid)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> eventPortType == "TERMINATE"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ===============</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Terminate Event</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ===============</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitStatusDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(initStatDWorkIdx != -1)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 0U) {/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr_wrapper(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidMdlTermFcnCall/", 2,/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockTerminatePortFunction">CallModelBlockTerminatePortFunction</a>(block, blockInterface, localTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> eventPortType == "RESET"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ===========</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Reset Event</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ===========</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitStatusDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(initStatDWorkIdx != -1)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 0U) {/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr_wrapper(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidMdlResetFcnCall/", 3,/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<span>eventPortName</span>>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockResetPortFunction">CallModelBlockResetPortFunction</a>(block, blockInterface, eventPortName, localTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ==============</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Periodic Event</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ==============</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitStatusDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (initStatDWorkIdx != -1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 0U) {/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidNonMdlEventFcnCall/", 4, /n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<span>eventPortName</span>>/", /n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/", /n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Figure out TID for periodic event port - Use EventPortTIDs parameter</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> mweIdx = <span class="tlc_bifunc">SIZE</span>(block.ParamSettings.ModelEventPortNames, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> block.ParamSettings.ModelEventPortTypes[mweIdx] == "PERIODIC" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;block.ParamSettings.ModelEventPortNames[mweIdx] == eventPortName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> childTid = block.ParamSettings.ModelEventPortTIDs[mweIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> childTid != -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockPeriodicEventPortFunction">CallModelBlockPeriodicEventPortFunction</a>(block, blockInterface, childTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ModelRefInitStatusCheckForFunctionCaller" class="tlc_func">ModelRefInitStatusCheckForFunctionCaller</a>(sysIdx, blkIdx, fcnName) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> block = System[sysIdx].Block[blkIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(initStatDWorkIdx != -1)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 0U) {/n"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr_wrapper(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidNonMdlEventSimulinkFcn/", 3,/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<span>fcnName</span>>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}"
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>CallModelBlockAsyncFcnCallInput<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Call<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>referenced<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/CondExecutedVSS/tContPortGecks.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CallModelBlockAsyncFcnCallInput" class="tlc_func">CallModelBlockAsyncFcnCallInput</a>(block, portIdx, localTid, ...
 <br>&nbsp;&nbsp;fcnType) void
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockInterface = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetModelrefInterface">GetModelrefInterface</a>(block)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = ""
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> portIdx >= block.NumDataInputPorts &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "ModelEventPortNames")
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (fcnType == "Output" || fcnType == "OutputUpdate")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> Accelerator
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/accellib.html#SLibCallModelBlockFcnCallInputInSimulink">SLibCallModelBlockFcnCallInputInSimulink</a>(block, portIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localTid, fcnType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Call functions via initialize/reset/terminate ports</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eventPortIdx = portIdx - block.NumDataInputPorts
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eventPortName = block.ParamSettings.ModelEventPortNames[eventPortIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eventPortType = block.ParamSettings.ModelEventPortTypes[eventPortIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#CallModelBlockModelEventPortFunction">CallModelBlockModelEventPortFunction</a>(block, eventPortName, eventPortType, localTid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCallInfo = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibGetModelBlockFcnCallInputInfo">SLibGetModelBlockFcnCallInputInfo</a>(block, portIdx, fcnType)
 <br>&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If we found a corresponding function in the referenced model, call</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% that function</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(fcnCallInfo)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> Accelerator
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/accellib.html#SLibCallModelBlockFcnCallInputInSimulink">SLibCallModelBlockFcnCallInputInSimulink</a>(block, portIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localTid, fcnType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block.ParamSettings, "InitStatusDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStatDWorkIdx = block.ParamSettings.InitStatusDWorkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(initStatDWorkIdx != -1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "if (%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#LibBlockDWork">LibBlockDWork</a>(block.DWork[initStatDWorkIdx],"","",0)> == 0U) {/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"void *errMsg = CreateDiagnosticAsVoidPtr_wrapper(/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"Simulink:FcnCall:InvalidNonMdlEventFcnCall/", 3,/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<span>fcnCallInfo.PortName</span>>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_STRING_TYPE, /"%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>/",/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"CODEGEN_SUPPORT_ARG_REAL_TYPE, %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "_ssSet_slErrMsg(%<::tSimStruct>, errMsg);/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "return;/n"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + "}/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCall = fcnCall + <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibCallModelBlockFunction">SLibCallModelBlockFunction</a>([], block, fcnCallInfo.TaskName, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;blockInterface, fcnCallInfo.TaskFcnInfo.FcnRec, 0, localTid, 0, "")
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnCall
 <br><span class="tlc_fkw">%endfunction</span>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>TopTester:<span style="padding-left:9.5px"></span>test/toolbox/simulink/variants/codevariants/tcodevariants9.m
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CppEncapMdlrefTimingDecArgs" class="tlc_func">CppEncapMdlrefTimingDecArgs</a>() <span class="tlc_fkw">void</span>  
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(::GenerateClassInterface &amp;&amp; <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceRTWTarget">IsModelReferenceRTWTarget</a>())  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = []      
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;::tMdlRefTimingBridgeAccessed
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = decArgs + "const rtTimingBridge *timingBridge"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::tMdlRefGlobalTIDMapAccessed
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#AddCppEncapMdlrefTIDArgs">AddCppEncapMdlrefTIDArgs</a>(decArgs)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> decArgs
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="AddCppEncapMdlrefTIDArgs" class="tlc_func">AddCppEncapMdlrefTIDArgs</a>(decArgs) <span class="tlc_fkw">void</span>  
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(::GenerateClassInterface &amp;&amp; <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceRTWTarget">IsModelReferenceRTWTarget</a>())    
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::tMdlRefNeedTIDArgs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefIsConstSampleBlock">MdlRefIsConstSampleBlock</a>() || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefHasParameterRate">MdlRefHasParameterRate</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Write out the declaration of the global TID map.  Note that for inherited</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% submodels, we will put the map into the rtModel.  This is because each</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% instance the submodel could get a different TID and we need the TID</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% for logging. see <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#FcnInitializeModelRefGlobalTimingEngine">FcnInitializeModelRefGlobalTimingEngine</a>().</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numTIDs = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibGetNumTIDsForGlobalTIDMap">SLibGetNumTIDsForGlobalTIDMap</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numTIDs 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% skip service task tid which is </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% used for service infrastructure only</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/servicelib.html#SLibIsServiceTaskTID">SLibIsServiceTaskTID</a>(idx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = decArgs + "int_T mdlref_TID%<<span>idx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = decArgs + "int_T mdlref_TID0"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#SLibModelNeedsTriggerTIDArg">SLibModelNeedsTriggerTIDArg</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> decArgs = decArgs + "int_T mdlref_TriggerTID"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> decArgs
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="IsSystemReusableParentBaseSys" class="tlc_func">IsSystemReusableParentBaseSys</a>(sysIdx)
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsBaseSystem">IsBaseSystem</a>(System[System[sysIdx].ReusedParentSystemIdx])
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetNumTIDsForGlobalTIDMap<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>elements<span style="padding-left:9.5px"></span>needed<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>store<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>TID<span style="padding-left:9.5px"></span>map<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>referenced
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>models.
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetNumTIDsForGlobalTIDMap" class="tlc_func">SLibGetNumTIDsForGlobalTIDMap</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> NumRuntimeExportedRates + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;NumAsynchronousSampleTimes + NumExplictTasksInUnionSampleTimes
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetProtectedBlockPath<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>When<span style="padding-left:9.5px"></span>protecting<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>standard<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>instead<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>full<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>path<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>protect<span style="padding-left:9.5px"></span>IP
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetProtectedBlockPath" class="tlc_func">SLibGetProtectedBlockPath</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "Block_in_protected_model"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibIsGeneratingSimTargetForProtectedModel<span style="padding-left:9.5px"></span>========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>SIM<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>either<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>protecting<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>submodel<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>being<span style="padding-left:9.5px"></span>protected.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Note<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>::ProtectedModelReferenceTarget<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>being<span style="padding-left:9.5px"></span>protected
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibIsGeneratingSimTargetForProtectedModel" class="tlc_func">SLibIsGeneratingSimTargetForProtectedModel</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceSimTarget">IsModelReferenceSimTarget</a>() &amp;&amp; CompiledModel.GenProtectedModelOrSubmodel
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_endif">%endif</span> <span class="tlc_comment">%%_MODELREFUTIL_</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html">modelrefutil.tlc</a>
</span> <br></body></html>