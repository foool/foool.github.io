<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>creates<span style="padding-left:9.5px"></span>model_reg.h<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>format.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>January<span style="padding-left:9.5px"></span>28,<span style="padding-left:9.5px"></span>1997
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2018<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>model_reg.h<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>created<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>follows:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>/*<span style="padding-left:9.5px"></span>File<span style="padding-left:9.5px"></span>banner<span style="padding-left:9.5px"></span>*/
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>User<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>.......................<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/hookslib.html#LibRegFileCustomCode">LibRegFileCustomCode</a>(buffer,<span style="padding-left:9.5px"></span>"header")
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>mdlInitializeSizes()
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>mdlInitializeSampleTimes()
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>mdlRTW()
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>#ifdef<span style="padding-left:9.5px"></span>MATLAB_MEX_FILE
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>#<span style="padding-left:9.5px"></span>include<span style="padding-left:9.5px"></span>"simulink.c"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>#else
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>#<span style="padding-left:9.5px"></span>include<span style="padding-left:9.5px"></span>"cg_sfun.h"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>#endif
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>User<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>.....................<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/hookslib.html#LibRegFileCustomCode">LibRegFileCustomCode</a>(buffer,<span style="padding-left:9.5px"></span>"trailer")
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>/*<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span>model_reg.h<span style="padding-left:9.5px"></span>*/
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_SFCNREG_") == 0
 <br><span class="tlc_assign">%assign</span> _SFCNREG_ = 1
 <br>&nbsp; <br><span class="tlc_realformat">%realformat</span> "CONCISE"
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Create<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>alias<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>child<span style="padding-left:9.5px"></span>SimStruct
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_assign">%assign</span> S = "%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetModelSS">RTMGetModelSS</a>()</span>>"
 <br>&nbsp; <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Top<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>custom<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_openfile">%openfile</span> tmpBuf
 <br>%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/hookslib.html#LibDumpTopOfRegFileUserCode">LibDumpTopOfRegFileUserCode</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> tmpBuf
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mdl_src_userTop", tmpBuf)>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>handling<span style="padding-left:9.5px"></span>buffer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_assign">%assign</span> prmHandlingInfo   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGenRTWSFcnParamHandlingFcns">SLibGenRTWSFcnParamHandlingFcns</a>()
 <br><span class="tlc_assign">%assign</span> numTunablePrms    = prmHandlingInfo[0]
 <br><span class="tlc_assign">%assign</span> prmHandlingBuffer = prmHandlingInfo[1]
 <br>&nbsp; <br><span class="tlc_openfile">%openfile</span> fcnsBuf
 <br><span class="tlc_if">%if</span> numTunablePrms > 0
 <br>&nbsp;&nbsp;%<<span>prmHandlingBuffer</span>>/
 <br><span class="tlc_endif">%endif</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MdlInitializeSizes
</span> <br><span class="tlc_comment">%%
</span> <br>#if defined(RT_MALLOC) || defined(MATLAB_MEX_FILE)
 <br>#  include "%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>()</span>>_mid.h"
 <br>#endif
 <br>&nbsp; <br><span class="tlc_assign">%assign</span> fcnAbstract = "Function to initialize sizes."
 <br><span class="tlc_assign">%assign</span> fcnName = "mdlInitializeSizes"
 <br><span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br><span class="tlc_assign">%assign</span> fcnParams = "SimStruct *%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetModelSS">RTMGetModelSS</a>()</span>>"
 <br><span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnreg.html">sfcnreg.tlc</a>"; Type "Initialize"}
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br><span class="tlc_undef">%undef</span> fcnRec
 <br>%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Outputs</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% (Cache into a buffer so the need for constant sample time can</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  be determined)</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> NeedConstantST = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> setU32Compliant = TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> extOutBuffer
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ExternalOutputs
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Number of output ports */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (!%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumOutputPorts", NumExternalOutputs)>) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> NumExternalOutputs > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> extOut       = ExternalOutput[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sysIdx       = extOut.Block[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkIdx       = extOut.Block[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outportBlock = System[sysIdx].Block[blkIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> outportBlock
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portIdx    = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/paramlib.html#LibBlockParamSetting">LibBlockParamSetting</a>("Outport", "PortNumber") -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> width      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalWidth">LibBlockInputSignalWidth</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nDims      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalNumDimensions">LibBlockInputSignalNumDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtId       = <a href="https://foool.github.io/r2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDataTypeId">LibBlockInputSignalDataTypeId</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalIsComplex">LibBlockInputSignalIsComplex</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFrame    = extOut.FrameData == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims       = <a href="https://foool.github.io/r2020a/rtw/c/tlc/public_api/blkio_api.html#LibBlockInputSignalDimensions">LibBlockInputSignalDimensions</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isBus      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dtId)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* outport number: %<<span>portIdx</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(extOut, "HasVarDims") &amp;&amp; !isBus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortDimensionsMode(S, %<<span>portIdx</span>>, VARIABLE_DIMS_MODE);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnlib.html#SLibDumpSfcnOutDims">SLibDumpSfcnOutDims</a>(S,portIdx,width,nDims,dims)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> setU32Compliant
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Be U32Bit Region Compliant</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the generated S-Function calls published fixedpoint API functions </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to handle 33+ fixed point data, it must call set this flag to be </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% U32BitRegionCompliant.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibIsNonBuiltInTypeNeededForFixpt">LibIsNonBuiltInTypeNeededForFixpt</a>(dtId) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssFxpSetU32BitRegionCompliant(S, 1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> setU32Compliant = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibSfunRegisterAndSetDataType">SLibSfunRegisterAndSetDataType</a>("output",S,portIdx,dtId,"namedObject")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> locBusObj = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/paramlib.html#LibBlockParamSetting">LibBlockParamSetting</a>("Outport", "BusObject")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">WHITE_SPACE</span>(locBusObj)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetBusObjectName(S, %<<span>portIdx</span>>, (void *)"%<<span>locBusObj</span>>");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetBusOutputAsStruct(S, %<<span>portIdx</span>>, /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/paramlib.html#LibBlockParamSetting">LibBlockParamSetting</a>("Outport", "OutputAsStructure")>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortComplexSignal(%<<span>S</span>>, %<<span>portIdx</span>>, COMPLEX_YES);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isFrame
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortFrameData(%<<span>S</span>>, %<<span>portIdx</span>>, FRAME_YES);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> AllSampleTimesInherited == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Do nothing.  This is a single rate discrete model so</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% don't touch the I/O.  The S-Function will be registered</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% with a (block based) inherited sample time.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortOptimOpts(%<<span>S</span>>, %<<span>portIdx</span>>, SS_REUSABLE_AND_LOCAL);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> !<span class="tlc_bifunc">ISEQUAL</span>(TID,"constant")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> period = SampleTime[TID].PeriodAndOffset[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offset = SampleTime[TID].PeriodAndOffset[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortSampleTime(%<<span>S</span>>, %<<span>portIdx</span>>, %<<span>period</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortOffsetTime(%<<span>S</span>>, %<<span>portIdx</span>>, %<<span>offset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortOptimOpts(%<<span>S</span>>, %<<span>portIdx</span>>, SS_REUSABLE_AND_LOCAL);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> NeedConstantST = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% *** Fix Port Based Sample Times</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortSampleTime(%<<span>S</span>>, %<<span>portIdx</span>>, %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibRealNonFinite">LibRealNonFinite</a>("inf")>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortOffsetTime(%<<span>S</span>>, %<<span>portIdx</span>>, 0.0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetOutputPortOptimOpts(%<<span>S</span>>, %<<span>portIdx</span>>, SS_NOT_REUSABLE_AND_LOCAL);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> sysIdx, blkIdx, portIdx
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> extOutBuffer
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Sample times</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 <span class="tlc_comment">%% NeedConstantST   *** Fix Port Based Sample Times</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumSampleTimes", (NumRuntimeExportedRates+1))>; /* Number of sample times */  
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nTs = AllSampleTimesInherited == "yes" ? 1 : NumRuntimeExportedRates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumSampleTimes", nTs)>; /* Number of sample times */  
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% States</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumContStates", NumContStates)>; /* Number of continuous states */
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (NumContStates > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumPeriodicContStates", NumPeriodicContStates)>; /* Number of periodic continuous states */
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Solver related setup</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> NumNonsampledZCs > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumNonsampledZCs", ZCVectorlength)>; /* Number of nonsampled ZCs */
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumNonsampledZCs", NumNonsampledZCs)>; /* Number of nonsampled ZCs */  
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SolverType == "VariableStep"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("ZCCacheNeedsReset", "%<<span>SolverResetInfo.ZCCacheNeedsReset</span>>")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("DerivCacheNeedsReset", "%<<span>SolverResetInfo.DerivCacheNeedsReset</span>>")>;
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Dump External Outputs </span>
 <br>&nbsp;&nbsp;%<<span>extOutBuffer</span>>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Inputs and direct feedthrough</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ExternalInputs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Number of input ports */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (!%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumInputPorts", NumExternalInputs)>) return;
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> NumExternalInputs > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> portIdx = NumExternalInputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> extInp    = ExternalInput[portIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtId      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordDataTypeId">LibGetRecordDataTypeId</a>(extInp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> width     = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordWidth">LibGetRecordWidth</a>(extInp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inputTid  = extInp.TID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordIsComplex">LibGetRecordIsComplex</a>(extInp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFrame   = extInp.FrameData == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isBus     = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dtId)        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> directFT  = extInp.DirectFeedThrough == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* inport number: %<<span>portIdx</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(extInp, "HasVarDims")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortRequiredContiguous(S, %<<span>portIdx</span>>, true);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isBus == TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortDimensionsMode(S, %<<span>portIdx</span>>, VARIABLE_DIMS_MODE);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims    = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordDimensions">LibGetRecordDimensions</a>(extInp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numDims = <span class="tlc_bifunc">SIZE</span>(%<<span>dims</span>>,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnlib.html#SLibDumpSfcnInpDims">SLibDumpSfcnInpDims</a>(S,portIdx,width,numDims,dims)>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> setU32Compliant
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Be U32Bit Region Compliant</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the generated S-Function calls published fixedpoint API functions </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to handle 33+ fixed point data, it must call set this flag to be </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% U32BitRegionCompliant.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibIsNonBuiltInTypeNeededForFixpt">LibIsNonBuiltInTypeNeededForFixpt</a>(dtId) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssFxpSetU32BitRegionCompliant(S, 1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> setU32Compliant = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibSfunRegisterAndSetDataType">SLibSfunRegisterAndSetDataType</a>("input",S,portIdx,dtId,"namedObject")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibDataTypeIsBus">LibDataTypeIsBus</a>(dtId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetBusInputAsStruct(S, %<<span>portIdx</span>>, 1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortComplexSignal(%<<span>S</span>>, %<<span>portIdx</span>>, COMPLEX_YES);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isFrame
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortFrameData(%<<span>S</span>>, %<<span>portIdx</span>>, FRAME_YES);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> directFT
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortDirectFeedThrough(%<<span>S</span>>, %<<span>portIdx</span>>, 1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> AllSampleTimesInherited == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Do nothing.  This is a single rate discrete model so</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% don't touch the I/O.  The S-Function will be registered</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% with a (block based) inherited sample time.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> period = SampleTime[inputTid].PeriodAndOffset[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offset = SampleTime[inputTid].PeriodAndOffset[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortSampleTime(%<<span>S</span>>, %<<span>portIdx</span>>, %<<span>period</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortOffsetTime(%<<span>S</span>>, %<<span>portIdx</span>>, %<<span>offset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortOverWritable(%<<span>S</span>>, %<<span>portIdx</span>>, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetInputPortOptimOpts(%<<span>S</span>>, %<<span>portIdx</span>>, SS_NOT_REUSABLE_AND_GLOBAL);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("RTWGeneratedSFcn", 1)>; /* Generated S-function */
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% DWork</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numDWorks = ::CompiledModel.DWorks.NumDWorks
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optimizedAwayDworks = 0
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dwIdx = numDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibOmitRecord">SLibOmitRecord</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optimizedAwayDworks = optimizedAwayDworks + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> numDWorks > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* DWork */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if ( !%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumDWork", numDWorks - optimizedAwayDworks)>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accDwIdx = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dwIdx = numDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibOmitRecord">SLibOmitRecord</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwId      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkDataTypeId">SLibDWorkDataTypeId</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtRec     = ::CompiledModel.DataTypes.DataType[dwId]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordIsComplex">LibGetRecordIsComplex</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dTypeEnum = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeEnumFromId">LibGetDataTypeEnumFromId</a>(dwId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> accDwIdx  = %<<span>accDwIdx</span>> + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGrBlockCommentName">SLibGrBlockCommentName</a>(dwRec.GrSrc)>: %<<span>dwRec.Name</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkName", accDwIdx, "/"DWORK%<<span>accDwIdx</span>>/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkWidth", accDwIdx, <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec))>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibIsNonBuiltInTypeNeededForFixpt">LibIsNonBuiltInTypeNeededForFixpt</a>(dwId) || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibDataTypeHasObject">SLibDataTypeHasObject</a>(dwId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> setU32Compliant
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Be U32Bit Region Compliant</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the generated S-Function calls published fixedpoint API functions </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to handle 33+ fixed point data, it must call set this flag to be </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% U32BitRegionCompliant.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssFxpSetU32BitRegionCompliant(S, 1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> setU32Compliant = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibSfunRegisterAndSetDataType">SLibSfunRegisterAndSetDataType</a>("dwork",S,accDwIdx,dwId,"namedObject")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> dTypeEnum==""  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% custom data type. Need to register it</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#if SS_SFCN_FOR_SIM
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int id = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMRegisterDataType">RTMRegisterDataType</a>("/"%<<span>dtRec.DTName</span>>/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (id == INVALID_DTYPE_ID ) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sizeStr = "sizeof(%<<span>dtRec.DTName</span>>)"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(!%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DataTypeSize", "id", "%<<span>sizeStr</span>>")>) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkDataType", accDwIdx, "id")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkDataTypeId">SLibDWorkDataTypeId</a>(dwRec) != tSS_DOUBLE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkDataType", accDwIdx, dTypeEnum)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkComplexSignal", accDwIdx, "COMPLEX_YES")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwRec.UsedAs == "DSTATE"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("DWorkUsedAsDState", accDwIdx, 1)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Data-Store registration</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnlib.html#SLibRegisterDataStores">SLibRegisterDataStores</a>("%<<span>S</span>>")>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;/* Tunable Parameters */
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("NumSFcnParams", ModelParameters.SfcnParamIdx)>;
 <br>&nbsp;&nbsp;/* Number of expected parameters */
 <br>&nbsp;&nbsp;#if defined(MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;if (%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a></a>("NumSFcnParams")> == %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a></a>("SFcnParamsCount")>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#if defined(MDL_CHECK_PARAMETERS)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;mdlCheckParameters(S);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif /* MDL_CHECK_PARAMETERS */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if( %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>> != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>> ) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return; /* Parameter mismatch will be reported by Simulink */
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;#endif /* MATLAB_MEX_FILE */
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% SS_OPTIONS</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optionStr = []
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optionStr = optionStr + "SS_OPTION_RUNTIME_EXCEPTION_FREE_CODE "
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> AllSampleTimesInherited == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Do nothing.  This is a single rate discrete model so</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% don't touch the I/O.  The S-Function will be registered</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% with a (block based) inherited sample time.</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> NeedConstantST  <span class="tlc_comment">%% *** Fix Port Based Sample Times</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> warntxt="Switching to block based sample times for the/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"generated S-Function because one or more model outputs are constant."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibReportWarning">LibReportWarning</a>(warntxt)>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optionStr = optionStr + "/nSS_OPTION_PORT_SAMPLE_TIMES_ASSIGNED "
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% S-function that accesses wrapper DWorks, or has inherited sample times</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% and dworks cannot have constant sample time</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0 || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(AllSampleTimesInherited == "yes" &amp;&amp; ::CompiledModel.DWorks.NumDWorks > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optionStr = optionStr +"/nSS_OPTION_DISALLOW_CONSTANT_SAMPLE_TIME "
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numStr = <span class="tlc_bifunc">SIZE</span>(optionStr, 1)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> numStr > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Options */
 <br><span class="tlc_openfile">%openfile</span> tmpBuf
 <br>(%<optionStr[0]>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> strIdx = numStr-1
 <br>| %<optionStr[strIdx+1]>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>)/
 <br><span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSet">RTMSet</a>("Options", tmpBuf)>;
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;#if SS_SFCN_FOR_SIM
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Register block's compliance with implicit iterator</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/implicititerssutil.html#SLibDumpSupportsMultipleExecInstancesFlag">SLibDumpSupportsMultipleExecInstancesFlag</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/implicititerssutil.html#SLibDumpHasStateInsideForEachSSFlag">SLibDumpHasStateInsideForEachSSFlag</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> AllSampleTimesInherited == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetModelReferenceSampleTimeInheritanceRule(%<<span>S</span>>, USE_DEFAULT_FOR_DISCRETE_INHERITANCE);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;#endif
 <br>}
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MdlInitializeSampleTimes
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_assign">%assign</span> fcnAbstract = "Function to initialize sample times."
 <br><span class="tlc_assign">%assign</span> fcnName = "mdlInitializeSampleTimes"
 <br><span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br><span class="tlc_assign">%assign</span> fcnParams = "SimStruct *%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetModelSS">RTMGetModelSS</a>()</span>>"
 <br><span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnreg.html">sfcnreg.tlc</a>"; Type "Initialize"}
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br><span class="tlc_undef">%undef</span> fcnRec
 <br>%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>{
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonreglib.html#LibDumpModelInitializeSampleTimes">LibDumpModelInitializeSampleTimes</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Add a constant sample time if needed</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> 0 <span class="tlc_comment">%% NeedConstantST   *** Fix Port Based Sample Times</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* additional sample time for constant sample time ports */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("SampleTime", NumRuntimeExportedRates, rtInf)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetIdxed">RTMSetIdxed</a>("OffsetTime", NumRuntimeExportedRates, 0.0)>;
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>}
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MdlSetWorkWidths
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_assign">%assign</span> genWrapperDWorks = ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0
 <br>&nbsp; <br><span class="tlc_if">%if</span> genWrapperDWorks
 <br><span class="tlc_assign">%assign</span> fcnName = "mdlSetWorkWidths"
 <br><span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br><span class="tlc_assign">%assign</span> fcnParams = "SimStruct *S"
 <br><span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract ""; ...
 <br>&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnreg.html">sfcnreg.tlc</a>"}
 <br>#define MDL_SET_WORK_WIDTHS
 <br>#if defined(MDL_SET_WORK_WIDTHS) &amp;&amp; defined(MATLAB_MEX_FILE)
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br><span class="tlc_undef">%undef</span> fcnRec
 <br>%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>{
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> genWrapperDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGenDataStoreChecks">SLibGenDataStoreChecks</a>("%<<span>S</span>>")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>}
 <br>#endif /* MDL_SET_WORK_WIDTHS */
 <br><span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MEX-glue
</span> <br><span class="tlc_comment">%%
</span> <br>#if defined(MATLAB_MEX_FILE)
 <br>&nbsp; <br># include "fixedpoint.c"
 <br># include "simulink.c"
 <br>&nbsp; <br>#else
 <br>&nbsp; <br># undef S_FUNCTION_NAME 
 <br># define S_FUNCTION_NAME %<<span>Name</span>> 
 <br><span class="tlc_if">%if</span> GenCPP
 <br>extern "C" {
 <br><span class="tlc_endif">%endif</span>
 <br># include "cg_sfun.h"
 <br><span class="tlc_if">%if</span> GenCPP
 <br>}
 <br><span class="tlc_endif">%endif</span>
 <br>#endif /* defined(MATLAB_MEX_FILE) */
 <br><span class="tlc_closefile">%closefile</span> fcnsBuf
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mdl_fcn_defn", fcnsBuf)>
 <br>&nbsp; <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Custom<span style="padding-left:9.5px"></span>trailer<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_openfile">%openfile</span> tmpBuf
 <br>%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/hookslib.html#LibDumpBottomOfRegFileUserCode">LibDumpBottomOfRegFileUserCode</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> tmpBuf
 <br>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mdl_src_userBottom", tmpBuf)>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Undef<span style="padding-left:9.5px"></span>aliases<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>consistency<span style="padding-left:9.5px"></span>checking
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_undef">%undef</span> S
 <br>&nbsp; <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_endif">%endif</span> <span class="tlc_comment">%% _SFCNREG_</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sfcnreg.html">sfcnreg.tlc</a>
</span> <br></body></html>