<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>File<span style="padding-left:9.5px"></span>:<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html">ertmdlrefabstime.tlc</a>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Each<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>its<span style="padding-left:9.5px"></span>own<span style="padding-left:9.5px"></span>timer.<span style="padding-left:9.5px"></span>Only<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>update<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>at<span style="padding-left:9.5px"></span>its<span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>rate.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>pure<span style="padding-left:9.5px"></span>integer<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>discrete<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>task.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(1)<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>marks<span style="padding-left:9.5px"></span>NeedAbsoluteTime<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>its<span style="padding-left:9.5px"></span>tid<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>true.<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>dumped<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>SImulink<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>.rtw<span style="padding-left:9.5px"></span>file.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(2)<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>logging<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>on,<span style="padding-left:9.5px"></span>NeedAsoluteTime<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>tid0<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>always<span style="padding-left:9.5px"></span>true.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(3)<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>exist<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>access<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>don't<span style="padding-left:9.5px"></span>claim<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>NeedAbsoluteTime,<span style="padding-left:9.5px"></span>obsolete<span style="padding-left:9.5px"></span>floating<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>backward<span style="padding-left:9.5px"></span>compatibility.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(4)<span style="padding-left:9.5px"></span>See<span style="padding-left:9.5px"></span>SLibSetupAbsoluteTime<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>more<span style="padding-left:9.5px"></span>info.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Issues:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(1)<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>uses<span style="padding-left:9.5px"></span>LibGetT,<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>multi-rate,<span style="padding-left:9.5px"></span>multi-tasking<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>may<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>tasks.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(2)<span style="padding-left:9.5px"></span>Rename<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>function:<span style="padding-left:9.5px"></span>SLibNeedObsAbsoluteTime.<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>state,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>during<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>block's<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>generation.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Timing<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>like<span style="padding-left:9.5px"></span>ert<span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>SLibIsObsAbsoluteTimeRequired
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(3)<span style="padding-left:9.5px"></span>Absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>tid0<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>tid1,<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>tid01<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>equal,<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>same.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Why<span style="padding-left:9.5px"></span>do<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>both?
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_ERT_MODELREF_ABS_TIME_") == 0
 <br><span class="tlc_assign">%assign</span> _ERT_MODELREF_ABS_TIME_ = 1
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibGenAbsTimeComment" class="tlc_func">SLibGenAbsTimeComment</a>(tid)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tsRec = SampleTime[tid]
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> tsRec.NeedFloatTime == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* The "clockTick%<<span>tid</span>>" counts the number of times the code of this task has 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* been executed. The absolute time is the multiplication of "clockTick%<<span>tid</span>>" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* and "Timing.stepSize%<<span>tid</span>>". Size of "clockTick%<<span>tid</span>>" ensures timer will not 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* overflow during the application lifespan selected.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibClockTickIsUnit32Pair">SLibClockTickIsUnit32Pair</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer of this task consists of two 32 bit unsigned integers. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The two integers represent the low bits Timing.clockTick%<<span>tid</span>> and the high bits 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timing.clockTickH%<<span>tid</span>>. When the low bit overflows to 0, the high bits increment. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* The "clockTick%<<span>tid</span>>" counts the number of times the code of this task has 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* been executed. The resolution of this integer timer is %<<span>tsRec.ClockTickStepSize</span>>, which is the step size 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* of the task. Size of "clockTick%<<span>tid</span>>" ensures timer will not overflow during the 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* application lifespan selected.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibClockTickIsUnit32Pair">SLibClockTickIsUnit32Pair</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timer of this task consists of two 32 bit unsigned integers. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* The two integers represent the low bits Timing.clockTick%<<span>tid</span>> and the high bits 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Timing.clockTickH%<<span>tid</span>>. When the low bit overflows to 0, the high bits increment. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>RTMUpdateAbsoluteTimeForTID<span style="padding-left:9.5px"></span>=================
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="RTMUpdateAbsoluteTimeForTID" class="tlc_func">RTMUpdateAbsoluteTimeForTID</a>(tid) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#SLibGenAbsTimeComment">SLibGenAbsTimeComment</a>(tid)>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SampleTime[tid].NeedFloatTime == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMUpdateRealAbsoluteTimeForTID">RTMUpdateRealAbsoluteTimeForTID</a>(tid)>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMUpdateIntegerAbsoluteTimeForTID">RTMUpdateIntegerAbsoluteTimeForTID</a>(tid)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> 
 <br>&nbsp; <br><span class="tlc_comment">%%Function<span style="padding-left:9.5px"></span>FcnUpdateAbsoluteTimeNonRateGrouping<span style="padding-left:9.5px"></span>=======================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>all<span style="padding-left:9.5px"></span>tids<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>required.
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnUpdateAbsoluteTimeNonRateGrouping" class="tlc_func">FcnUpdateAbsoluteTimeNonRateGrouping</a>(ssIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% RTMArgDef is accessed</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> absTimeDumped = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% enhanced absolute time</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibNeedAbsoluteTimeForTID">SLibNeedAbsoluteTimeForTID</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If tid 0 is continuous and is model reference Simstruc based,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% all continuous time related information is accessed from simstruct.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibIsContinuous">LibIsContinuous</a>(0) || !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We are not rate grouping, so we need to guard for TID 0.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Update absolute time for base rate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> guard = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibIsSampleHit">LibIsSampleHit</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> guard != "1"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>guard</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#RTMUpdateAbsoluteTimeForTID">RTMUpdateAbsoluteTimeForTID</a>(0)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>() &amp;&amp; guard != "1"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> absTimeDumped = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tidIdx = NumRuntimeExportedRates -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subRateIdx = tidIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibNeedAbsoluteTimeForTID">SLibNeedAbsoluteTimeForTID</a>(subRateIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidGuard = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibIsSampleHit">LibIsSampleHit</a>(subRateIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibControllableRateTID">SLibControllableRateTID</a>(subRateIdx) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseTID = ::CompiledModel.SampleTime[subRateIdx].CtrlRateBaseTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidGuard = ((baseTID == 1 &amp;&amp; FixedStepOpts.TID01EQ) || baseTID == 0) ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1" : <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibIsSpecialSampleHit">LibIsSpecialSampleHit</a>(baseTID, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidGuard = (subRateIdx == 1 &amp;&amp; FixedStepOpts.TID01EQ) ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"1" : <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibIsSpecialSampleHit">LibIsSpecialSampleHit</a>(subRateIdx, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> tidGuard == "1" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>tidGuard</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> period = ::CompiledModel.SampleTime[subRateIdx].PeriodAndOffset[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> offset = ::CompiledModel.SampleTime[subRateIdx].PeriodAndOffset[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Update absolute timer for sample time: [%<<span>period</span>>s, %<<span>offset</span>>s] */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#RTMUpdateAbsoluteTimeForTID">RTMUpdateAbsoluteTimeForTID</a>(subRateIdx)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> absTimeDumped = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> absTimeDumped
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = ::CompiledModel.System[ssIdx].Interface.RTMArgDef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(arg,"","")>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%%FcnUpdateAbsoluteTimeNonRateGrouping</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%Function<span style="padding-left:9.5px"></span>FcnUpdateAbsoluteTimeRateGrouping<span style="padding-left:9.5px"></span>=======================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>float<span style="padding-left:9.5px"></span>point<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>tid<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>NeedFloatTime.<span style="padding-left:9.5px"></span>See<span style="padding-left:9.5px"></span>SLibSetupAbsoluteTime<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>find<span style="padding-left:9.5px"></span>out
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>how<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>NeedFloatTime<span style="padding-left:9.5px"></span>logic<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>calculated.
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnUpdateAbsoluteTimeRateGrouping" class="tlc_func">FcnUpdateAbsoluteTimeRateGrouping</a>(ssIdx, subRateIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpBuf = ""
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibNeedAbsoluteTimeForTID">SLibNeedAbsoluteTimeForTID</a>(subRateIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(SampleTime[subRateIdx].NeedAbsoluteTime == "yes")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If tid 0 is continuous and is model reference Simstruc based,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% all continuous time related information is accessed from simstruct.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibIsContinuous">LibIsContinuous</a>(subRateIdx) || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceForASimstructBasedTarget">IsModelReferenceForASimstructBasedTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Update absolute time */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#RTMUpdateAbsoluteTimeForTID">RTMUpdateAbsoluteTimeForTID</a>(subRateIdx)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = ::CompiledModel.System[ssIdx].Interface.RTMArgDef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAddTIDtoAccessTIDList">SLibAddTIDtoAccessTIDList</a>(arg, ::BlockFcn, "",subRateIdx)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnUpdateAsyncTimeAtMinorMajorTimeStep<span style="padding-left:9.5px"></span>======================
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnUpdateAsyncTimeAtMinorMajorTimeStep" class="tlc_func">FcnUpdateAsyncTimeAtMinorMajorTimeStep</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>())
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumAsyncTasks">LibGetNumAsyncTasks</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = idx + NumRuntimeExportedRates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMAbsTimeNeedTransProtection">RTMAbsTimeNeedTransProtection</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibConcurrentTasks">SLibConcurrentTasks</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMContTDbBufIsReqFcn">RTMContTDbBufIsReqFcn</a>(%<<span>tid</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Base rate updates double buffers of absolute time at 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minor and major time step for asynchronous task %<<span>tid</span>>. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double buffers are used to ensure data integrity when 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchronous task reads absolute time.  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufReadBuf">SLibGetDbBufReadBuf</a>(tid)>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;case 0: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> =1; break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;case 1: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> =0; break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;default: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufLastBufWr">SLibGetDbBufLastBufWr</a>(tid)>; break;      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufContTForTID">SLibGetDbBufContTForTID</a>(tid)>[%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)>] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufLastBufWr">SLibGetDbBufLastBufWr</a>(tid)> = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> = 0xFF;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMContTH2LIsReqFcn">RTMContTH2LIsReqFcn</a>(tid) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Base rate updates double-buffer of absolute time 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at minor and major time step for asynchronous task %<<span>tid</span>>. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double buffers are used to ensure data integrity 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;when asynchronous task reads absolute time. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmH2LBufBeingRead is the index of the buffer being read
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by the asynchronous task %<<span>tid</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmH2LLastBufWr is the index of the buffer that is 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;written last. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LBufBeingRead">SLibGetH2LBufBeingRead</a>(tid)> != 0) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufContTForTID">SLibGetH2LDbBufContTForTID</a>(tid)>[0] = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LLastBufWr">SLibGetH2LLastBufWr</a>(tid)> = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufContTForTID">SLibGetH2LDbBufContTForTID</a>(tid)>[1] = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LLastBufWr">SLibGetH2LLastBufWr</a>(tid)> = 1;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMContTL2HIsReqFcn">RTMContTL2HIsReqFcn</a>() 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Base rate updates double buffers of absolute time at 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;minor and major time step for asynchronous task %<<span>tid</span>>. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Double buffers are used to ensure data integrity when 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchronous task reads absolute time.  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmL2HLastBufWr is the index of the buffer that is 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;written last.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean_T bufIdx = !%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HLastBufWr">SLibGetL2HLastBufWr</a>()</span>>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HDbBufContT">SLibGetL2HDbBufContT</a>()</span>>[bufIdx] = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetT">LibGetT</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HLastBufWr">SLibGetL2HLastBufWr</a>()</span>> = bufIdx;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% FcnUpdateAsyncTimeAtMinorMajorTimeStep </span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnUpdateAsyncTaskTimers<span style="padding-left:9.5px"></span>===========================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>asynchronous<span style="padding-left:9.5px"></span>tasks<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>don't<span style="padding-left:9.5px"></span>manage<span style="padding-left:9.5px"></span>own<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time,
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>obtained<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>To<span style="padding-left:9.5px"></span>insure<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>integrity,<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>obtaining<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>two<span style="padding-left:9.5px"></span>parts:<span style="padding-left:9.5px"></span>one<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>runs<span style="padding-left:9.5px"></span>at<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>part<span style="padding-left:9.5px"></span>runs
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>asynchronous<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>runs.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>runs<span style="padding-left:9.5px"></span>at<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>FcnAsyncTaskUpdatesTimersFromBaseRate<span style="padding-left:9.5px"></span>generates<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>that
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>runs<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>asynchronous<span style="padding-left:9.5px"></span>tasks.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>We<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>obtaint<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>does<span style="padding-left:9.5px"></span>NOT<span style="padding-left:9.5px"></span>manage<span style="padding-left:9.5px"></span>own<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>timer.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>There<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>three<span style="padding-left:9.5px"></span>cases:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1:<span style="padding-left:9.5px"></span>Asynchronous<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>priority<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>unknown.<span style="padding-left:9.5px"></span>Double<span style="padding-left:9.5px"></span>buffers<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>used
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>insure<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>integrity.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate<span style="padding-left:9.5px"></span>task:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>switch(ReadBuf()<span style="padding-left:9.5px"></span>{
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>case<span style="padding-left:9.5px"></span>0:<span style="padding-left:9.5px"></span>WriteBuf<span style="padding-left:9.5px"></span>=1;<span style="padding-left:9.5px"></span>break;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>case<span style="padding-left:9.5px"></span>1:<span style="padding-left:9.5px"></span>WriteBuf<span style="padding-left:9.5px"></span>=0;<span style="padding-left:9.5px"></span>break;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>default:<span style="padding-left:9.5px"></span>WriteBuf<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>LastBufWr;<span style="padding-left:9.5px"></span>break;<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>}
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>DbBuf_of_ClockTickForAsyncTID[WriteBuf]<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>time<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>LastBufWr<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>WriteBuf;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>WriteBuf<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>None;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>rate<span style="padding-left:9.5px"></span>task
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>switch(WriteBuf()<span style="padding-left:9.5px"></span>{
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>case<span style="padding-left:9.5px"></span>0:<span style="padding-left:9.5px"></span>ReadBuf<span style="padding-left:9.5px"></span>=1;<span style="padding-left:9.5px"></span>break;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>case<span style="padding-left:9.5px"></span>1:<span style="padding-left:9.5px"></span>ReadBuf<span style="padding-left:9.5px"></span>=0;<span style="padding-left:9.5px"></span>break;
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>default:<span style="padding-left:9.5px"></span>ReadBuf<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>!LastBufWr;<span style="padding-left:9.5px"></span>break;<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>}
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>ClockTickForAsyncTID<span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>DbBuf_of_ClockTickForAsyncTID[ReadBuf]
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>ReadBuf<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>=<span style="padding-left:9.5px"></span>None;
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2:<span style="padding-left:9.5px"></span>Asynchronous<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>priority<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>higher<span style="padding-left:9.5px"></span>than<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate.<span style="padding-left:9.5px"></span>Double<span style="padding-left:9.5px"></span>buffers
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>ensure<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>integrity.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate,<span style="padding-left:9.5px"></span>clockTick0<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>written<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>inactive<span style="padding-left:9.5px"></span>buffer.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>after<span style="padding-left:9.5px"></span>writting<span style="padding-left:9.5px"></span>process<span style="padding-left:9.5px"></span>complete,<span style="padding-left:9.5px"></span>update<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>flag
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>L2HLastBufWr<span style="padding-left:9.5px"></span>--<span style="padding-left:9.5px"></span>idx<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>last<span style="padding-left:9.5px"></span>written.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>sync<span style="padding-left:9.5px"></span>task,<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>reads<span style="padding-left:9.5px"></span>clockTick%<<span>tid</span>><span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>last<span style="padding-left:9.5px"></span>written
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>3:<span style="padding-left:9.5px"></span>Asynchronous<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>priority<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>lower<span style="padding-left:9.5px"></span>than<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate.<span style="padding-left:9.5px"></span>Double<span style="padding-left:9.5px"></span>buffers
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>ensure<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>integrity.<span style="padding-left:9.5px"></span>Two<span style="padding-left:9.5px"></span>flags:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>H2LLastBufWr<span style="padding-left:9.5px"></span>--<span style="padding-left:9.5px"></span>idx<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>last<span style="padding-left:9.5px"></span>written
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>H2LBufBeingRead<span style="padding-left:9.5px"></span>--<span style="padding-left:9.5px"></span>number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>asychronous<span style="padding-left:9.5px"></span>tasks<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>readding<span style="padding-left:9.5px"></span>buffer0
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>rate,<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>no<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>reading<span style="padding-left:9.5px"></span>buffer0,<span style="padding-left:9.5px"></span>clockTick0<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>written<span style="padding-left:9.5px"></span>into
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>buffer0,<span style="padding-left:9.5px"></span>otherwise<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>buffer1.<span style="padding-left:9.5px"></span>Then<span style="padding-left:9.5px"></span>update<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>flag<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>H2LLastBufWr<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>At<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task,<span style="padding-left:9.5px"></span>async<span style="padding-left:9.5px"></span>task<span style="padding-left:9.5px"></span>reads<span style="padding-left:9.5px"></span>clockTick%<<span>tid</span>><span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>last<span style="padding-left:9.5px"></span>written.<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>last<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>written
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>buffer0,<span style="padding-left:9.5px"></span>increase<span style="padding-left:9.5px"></span>H2LBufBeingRead<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>1<span style="padding-left:9.5px"></span>before<span style="padding-left:9.5px"></span>reading,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>decrease<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>1<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>reading<span style="padding-left:9.5px"></span>complete.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnUpdateAsyncTaskTimers" class="tlc_func">FcnUpdateAsyncTaskTimers</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>())
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tid = NumSampleTimes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMAbsTimeNeedTransProtection">RTMAbsTimeNeedTransProtection</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibConcurrentTasks">SLibConcurrentTasks</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRMutexOp">SLibCGIRMutexOp</a>(1,<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetTimerSemID">SLibGetTimerSemID</a>(tid))>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#S<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>BufForTID">S<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>BufForTID</a>(tid)> = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibClockTickIsUnit32Pair">SLibClockTickIsUnit32Pair</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetClockTickHBufForTID">SLibGetClockTickHBufForTID</a>(tid)> = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTickHigh">LibGetClockTickHigh</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRMutexOp">SLibCGIRMutexOp</a>(2,<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetTimerSemID">SLibGetTimerSemID</a>(tid))>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMClockTick0DbBufIsReqFcn">RTMClockTick0DbBufIsReqFcn</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufReadBuf">SLibGetDbBufReadBuf</a>(tid)>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;case 0: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> =1; break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;case 1: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> =0; break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;default: %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufLastBufWr">SLibGetDbBufLastBufWr</a>(tid)>; break;      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufClockTickForTID">SLibGetDbBufClockTickForTID</a>(tid)>[%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)>] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sutillib.html#SLibClockTickIsUnit32Pair">SLibClockTickIsUnit32Pair</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufClockTickHForTID">SLibGetDbBufClockTickHForTID</a>(tid)>[%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)>] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTickHigh">LibGetClockTickHigh</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufLastBufWr">SLibGetDbBufLastBufWr</a>(tid)> = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetDbBufWriteBuf">SLibGetDbBufWriteBuf</a>(tid)> = 0xFF;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMClockTick0H2LIsReqFcn">RTMClockTick0H2LIsReqFcn</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Base rate updates double buffers of absolute time for 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchronous task %<<span>tid</span>>. Double buffers are used to 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ensure data integrity when asynchronous task reads 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;absolute time.  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmH2LBufBeingRead is the index of the buffer being 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;read by the asynchronous task %<<span>tid</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmH2LLastBufWr is the index of the buffer that is 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;written last. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LBufBeingRead">SLibGetH2LBufBeingRead</a>(tid)> != 0) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufClockTickForTID">SLibGetH2LDbBufClockTickForTID</a>(tid)>[0] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#LongClockTickForTIDIsReqFcn">LongClockTickForTIDIsReqFcn</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufClockTickHForTID">SLibGetH2LDbBufClockTickHForTID</a>(tid)>[0] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTickHigh">LibGetClockTickHigh</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LLastBufWr">SLibGetH2LLastBufWr</a>(tid)> = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufClockTickForTID">SLibGetH2LDbBufClockTickForTID</a>(tid)>[1] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#LongClockTickForTIDIsReqFcn">LongClockTickForTIDIsReqFcn</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LDbBufClockTickHForTID">SLibGetH2LDbBufClockTickHForTID</a>(tid)>[1] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTickHigh">LibGetClockTickHigh</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetH2LLastBufWr">SLibGetH2LLastBufWr</a>(tid)> = 1;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#RTMClockTick0L2HIsReqFcn">RTMClockTick0L2HIsReqFcn</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Base rate updates double buffers of absolute time for 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;asynchronous task. Double buffers are used to ensure 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data integrity when asynchronous task reads absolute 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;time.  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- rtmL2HLastBufWr is the buffer index that is written last. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean_T bufIdx = !%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HLastBufWr">SLibGetL2HLastBufWr</a>()</span>>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HDbBufClockTick">SLibGetL2HDbBufClockTick</a>()</span>>[bufIdx] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTick">LibGetClockTick</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#LongClockTickForTIDIsReqFcn">LongClockTickForTIDIsReqFcn</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HDbBufClockTickH">SLibGetL2HDbBufClockTickH</a>()</span>>[bufIdx] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetClockTickHigh">LibGetClockTickHigh</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetL2HLastBufWr">SLibGetL2HLastBufWr</a>()</span>> = bufIdx;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end FcnUpdateAsyncTaskTimers</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibErtGenUpdateAbsoluteTimeCode<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(1)<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>rate<span style="padding-left:9.5px"></span>grouping<span style="padding-left:9.5px"></span>code,<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>tid<span style="padding-left:9.5px"></span>needs<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>specific<span style="padding-left:9.5px"></span>updatetimebuffer<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>tid.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>*<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>dumped<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>UPDATE<span style="padding-left:9.5px"></span>outputUpdate<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>tid.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(2)<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>non-rate<span style="padding-left:9.5px"></span>grouping<span style="padding-left:9.5px"></span>code,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>needs<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>updatetimebuffer.<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>updates<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>all<span style="padding-left:9.5px"></span>tids<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>need<span style="padding-left:9.5px"></span>absolute<span style="padding-left:9.5px"></span>time.<span style="padding-left:9.5px"></span>Code<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>guarded<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>IsSampleHit.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>*<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>will<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>dumped<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>UPDATE<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>outputupdate<span style="padding-left:9.5px"></span>function.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(3)<span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>obsolete<span style="padding-left:9.5px"></span>timer<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>required,<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>it.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>*<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>dumped<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>OUTPUT<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>outputUpdate<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>tid0
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(rate<span style="padding-left:9.5px"></span>grouping)<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>OUTPUT<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>output/update<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(non-rate<span style="padding-left:9.5px"></span>grouping).<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>backward<span style="padding-left:9.5px"></span>compatibility.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibErtGenUpdateAbsoluteTimeCode" class="tlc_func">SLibErtGenUpdateAbsoluteTimeCode</a>(ssIdx, buffsRec, isPeriodicRateGrouping) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::initBlockFcn = ::BlockFcn
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::BlockFcn = "Update"
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isPeriodicRateGrouping
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> subRateIdx = NumRuntimeExportedRates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> System[ssIdx].CurrentTID = subRateIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#FcnUpdateAbsoluteTimeRateGrouping">FcnUpdateAbsoluteTimeRateGrouping</a>(ssIdx, subRateIdx)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> subRateIdx == 0 &amp;&amp; !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#FcnUpdateAsyncTaskTimers">FcnUpdateAsyncTaskTimers</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> buffsRec UpdateAbsoluteTimeBuffer%<<span>subRateIdx</span>> tmpBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> System[ssIdx].CurrentTID = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpBuf0 = buffsRec.UpdateAbsoluteTimeBuffer0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpBuf1 = buffsRec.UpdateAbsoluteTimeBuffer1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buffsRec.UpdateAbsoluteTimeBuffer0 = tmpBuf0 + tmpBuf1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buffsRec.UpdateAbsoluteTimeBuffer1 = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> updateTimeBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#FcnUpdateAbsoluteTimeNonRateGrouping">FcnUpdateAbsoluteTimeNonRateGrouping</a>(ssIdx)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html#FcnUpdateAsyncTaskTimers">FcnUpdateAsyncTaskTimers</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> updateTimeBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> buffsRec UpdateAbsoluteTimeBuffer updateTimeBuffer
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  ::BlockFcn = initBlockFcn
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibErtGenUpdateAbsoluteTimeCode</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_endif">%endif</span> <span class="tlc_comment">%% _ERT_MODELREF_ABS_TIME_</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlrefabstime.html">ertmdlrefabstime.tlc</a>
</span> <br></body></html>