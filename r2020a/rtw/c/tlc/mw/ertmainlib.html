<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2019<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Library<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>sample<span style="padding-left:9.5px"></span>main<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>ERT<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>format
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_include">%include</span> "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmain_grtinterface.html">ertmain_grtinterface.tlc</a>"
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnMdlName" class="tlc_func">FcnMdlName</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> Name
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnNumST" class="tlc_func">FcnNumST</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> NumSynchronousSampleTimes
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGetPublicModelHeaderFile" class="tlc_func">FcnGetPublicModelHeaderFile</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlHeaderFile = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibGetFileNameForCode">SLibGetFileNameForCode</a>("mdl_hdr")
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "%<<span>mdlHeaderFile</span>>.h"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGetPeriodFromTID" class="tlc_func">FcnGetPeriodFromTID</a>(tid) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> SampleTime[tid].ClockTickStepSize
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnIsERTMalloc" class="tlc_func">FcnIsERTMalloc</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isERTMalloc = TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Please comment out this line to get back default ert target.</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isERTMalloc = TLC_FALSE &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MultiInstanceERTCode &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!GenerateErtSFunction &amp;&amp; !GenerateClassInterface &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!ExportFunctionsMode &amp;&amp; !GenerateGRTWrapper
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> isERTMalloc
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateRtOneStep" class="tlc_func">FcnGenerateRtOneStep</a>(callSite) 
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem = System[NumSystems-1]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> reqInsts = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#LibGetSystemField">LibGetSystemField</a>(rootSystem,"ReqRootPrmHdrDataInsts")
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateClassInterface 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramProto = "void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramName = ""
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnIsERTMalloc">FcnIsERTMalloc</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramProto = "model_data_struct* modelData"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramName =  "modelData"
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> !reqInsts.SimStructInst &amp;&amp; (!EmptyRealTimeObject || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsSelfUserDefinedAndStructured">SLibIsSelfUserDefinedAndStructured</a>())
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramProto = "%<::tSimStructType> *const %<::tSimStruct>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramName = "%<::tSimStruct>"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramProto = "void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> paramName = ""
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (callSite) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "rt_OneStep(%<<span>paramName</span>>)"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% generate function definition if it's not called from callSite</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnAbstract
 <br>%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnRTOneStepDescription">FcnRTOneStepDescription</a>()</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnAbstract
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name "rt_OneStep"; Returns "void"; Params paramProto; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Utility"; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GeneratedFor <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonbodlib.html#FcnGeneratedFor">FcnGeneratedFor</a>(rootSystem)}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnBanner = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnProtoType = "void rt_OneStep(%<<span>paramProto</span>>)"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> fcnBanner + "/n" + fcnProtoType + ";/n" + fcnProtoType
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateRtMdlPtr" class="tlc_func">FcnGenerateRtMdlPtr</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem = System[NumSystems-1]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> reqInsts = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#LibGetSystemField">LibGetSystemField</a>(rootSystem,"ReqRootPrmHdrDataInsts")
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnIsERTMalloc">FcnIsERTMalloc</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!reqInsts.SimStructInst &amp;&amp; (!EmptyRealTimeObject || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsSelfUserDefinedAndStructured">SLibIsSelfUserDefinedAndStructured</a>())
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<::tSimStructType> *%<::tSimStruct> = &amp;(modelData->%<<span>tSimStruct</span>>);
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Functions<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>creating<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>appropriate<span style="padding-left:9.5px"></span>scheduler
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenNonClassicInterfaceModelInitFcnBody" class="tlc_func">FcnGenNonClassicInterfaceModelInitFcnBody</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#GenerateModelInitFcnName">GenerateModelInitFcnName</a>()</span>>(%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("Initialize",TLC_TRUE,"")>);  
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateLocalModelInitializeFcn" class="tlc_func">FcnGenerateLocalModelInitializeFcn</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Export function doesn't support classic call interface</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsExportFcnDiagram">SLibIsExportFcnDiagram</a>() &amp;&amp; !GenerateClassInterface
 <br>&nbsp;&nbsp;/* Local function to initialize the model */
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenNonClassicInterfaceModelInitFcnBody">FcnGenNonClassicInterfaceModelInitFcnBody</a>()</span>>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateModelInitialize" class="tlc_func">FcnGenerateModelInitialize</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "CachedFPCVarsStdVectorResizeBuffer")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<::CompiledModel.CachedFPCVarsStdVectorResizeBuffer>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;/* Initialize model */
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !GenerateClassInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenNonClassicInterfaceModelInitFcnBody">FcnGenNonClassicInterfaceModelInitFcnBody</a>()</span>>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span> <span class="tlc_comment">%%in class gen mode</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<::CPPObjectName>.initialize();
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateModelRegistration" class="tlc_func">FcnGenerateModelRegistration</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> UsingMalloc
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("Registration",TLC_TRUE,"")
 <br>&nbsp;&nbsp;/* Allocate model data */
 <br>&nbsp;&nbsp;%<::tSimStruct> = %<<span>Name</span>>(%<<span>fcnParams</span>>);
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenNonClassicInterfaceModelTermFcnBody" class="tlc_func">FcnGenNonClassicInterfaceModelTermFcnBody</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#GenerateNonClassicInterfaceModelTermFcnName">GenerateNonClassicInterfaceModelTermFcnName</a>()</span>>(%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("Terminate",TLC_TRUE,"")>);
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateLocalModelTerminateFcn" class="tlc_func">FcnGenerateLocalModelTerminateFcn</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Export function doesn't support classic call interface</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsExportFcnDiagram">SLibIsExportFcnDiagram</a>() &amp;&amp; !GenerateClassInterface
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Should have selected the option to generate model terminate function</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> IncludeMdlTerminateFcn
 <br>&nbsp;&nbsp;/* Local function to terminate the model */
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenNonClassicInterfaceModelTermFcnBody">FcnGenNonClassicInterfaceModelTermFcnBody</a>()</span>>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateModelTerminate" class="tlc_func">FcnGenerateModelTerminate</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;/* Disable rt_OneStep() here */
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> IncludeMdlTerminateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Terminate model */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !GenerateClassInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenNonClassicInterfaceModelTermFcnBody">FcnGenNonClassicInterfaceModelTermFcnBody</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<::CPPObjectName>.terminate();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ERTSimulateOneStep" class="tlc_func">ERTSimulateOneStep</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  Simulate the model step behavior if </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  1. The MAT-file logging is selected;</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  2. External Mode option is selected;</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  3. ForceSimulatedRTOneStep is set;</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  4. StopReqestedFlag is accessed.</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> forceOneStep = <span class="tlc_bifunc">EXISTS</span>("ForceSimulatedRTOneStep")
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simulateStep = MatFileLogging || ExtMode || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">EXISTS</span>("ForceSimulatedRTOneStep") || <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMStopReqAccessed">RTMStopReqAccessed</a>()
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> simulateStep
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ERTStopCheck" class="tlc_func">ERTStopCheck</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMStopReqAccessed">RTMStopReqAccessed</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS == "VxWorksExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% use inverse logic</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "(%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>> != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>) || %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetStopRequested">RTMGetStopRequested</a>()</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "!extmodeSimulationComplete() &amp;&amp; !extmodeStopRequested()"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "(%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>> == %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>) &amp;&amp; !%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetStopRequested">RTMGetStopRequested</a>()</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS == "VxWorksExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% use inverse logic</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>> != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "!extmodeSimulationComplete()>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> stopCheck = "%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>> == %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> stopCheck
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="PrintERTStopCheckStatus" class="tlc_func">PrintERTStopCheckStatus</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMStopReqAccessed">RTMStopReqAccessed</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,"Error status: %s; Stop request: %d /n", %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>>,%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetStopRequested">RTMGetStopRequested</a>()</span>>);
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,"Error status: %s /n", %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>()</span>>);
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ERTGenCodeRunOneStep" class="tlc_func">ERTGenCodeRunOneStep</a>(simstructArg) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTSimulateOneStep">ERTSimulateOneStep</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* The MAT-file logging option selected; therefore, simulating 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* the model step behavior (in non real-time).  Running this
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* code produces results that can be loaded into MATLAB.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simulateStep = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* The External Mode option selected; therefore,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*  simulating the model step behavior (in non real-time). 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simulateStep = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMStopReqAccessed">RTMStopReqAccessed</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Simulating the model step behavior (in non real-time) to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*  simulate model behavior at stop time.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simulateStep = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <span class="tlc_bifunc">EXISTS</span>("ForceSimulatedRTOneStep")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Simulating step behavior */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simulateStep = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;while (%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTStopCheck">ERTStopCheck</a>()</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buffsRec   = ::CompiledModel.CachedCodeBuffsForRootSys
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(buffsRec,"ExtModeHeader") &amp;&amp; !<span class="tlc_bifunc">WHITE_SPACE</span>(buffsRec.ExtModeHeader)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>buffsRec.ExtModeHeader</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertextmode.html#FcnGenerateExtModeOneStep">FcnGenerateExtModeOneStep</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtOneStep">FcnGenerateRtOneStep</a>(TLC_TRUE)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> period = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGetPeriodFromTID">FcnGetPeriodFromTID</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Attach rt_OneStep to a timer or interrupt service routine with
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* period %<<span>period</span>> seconds (the model's base sample time) here.  The
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* call syntax for rt_OneStep is 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*  %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtOneStep">FcnGenerateRtOneStep</a>(TLC_TRUE)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;printf("Warning: The simulation will run forever. "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"Generated ERT main won't simulate model step behavior. "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"To change this behavior select the 'MAT-file logging' option./n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;fflush(%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateClassInterface &amp;&amp; (!RealTimeModelAccessed)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*  Perform other application tasks here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTStopCheck">ERTStopCheck</a>()</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*  Perform other application tasks here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnSimpleNonOSMain" class="tlc_func">FcnSimpleNonOSMain</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "int_T"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "int_T argc, const char *argv[]"
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.StandaloneSubsystemTesting == 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% The following file is in test/toolbox/rtw/targets/ert/standalone_subsystem</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_include">%include</span> "standalonetesting.tlc"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the standalone testing is on, we test memory initialization.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>FcnGenMainForMemInitTesting()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "main1"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = ""
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "main"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnAbstract
 <br>The example "main" function illustrates what is required by your
 <br>application code to initialize, execute, and terminate the generated code.
 <br>Attaching rt_OneStep to a real-time clock is target specific.  This example
 <br>illustrates how you do this relative to initializing the model.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnAbstract
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;Category "main"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Main"}
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem = System[NumSystems-1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> reqInsts = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#LibGetSystemField">LibGetSystemField</a>(rootSystem, "ReqRootPrmHdrDataInsts")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needRTMdl = !reqInsts.SimStructInst &amp;&amp; (!::CompiledModel.EmptyRealTimeObject || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsSelfUserDefinedAndStructured">SLibIsSelfUserDefinedAndStructured</a>())
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needMdlParam = !reqInsts.ParamsInst &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/prm_cacheutils.html#SLibPrmBufferIsEmpty">SLibPrmBufferIsEmpty</a>("SimulinkGlobal", "Instance")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnIsERTMalloc">FcnIsERTMalloc</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;model_data_struct *modelData;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needRTMdl
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<::tSimStructType> *%<::tSimStruct>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelData = (model_data_struct*) malloc(sizeof(*modelData));
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needRTMdl
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<::tSimStruct> = &amp;(modelData->%<<span>tSimStruct</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needMdlParam
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modelData->%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#LibGetParametersStruct">LibGetParametersStruct</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#LibGetParametersStruct">LibGetParametersStruct</a></a>()</span>> = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#LibGetParametersStruct">LibGetParametersStruct</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#LibGetParametersStruct">LibGetParametersStruct</a></a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MultiInstanceERTCode &amp;&amp; !UsingMalloc  &amp;&amp; !GenerateClassInterface ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; !<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsExportFcnDiagram">SLibIsExportFcnDiagram</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Local variable to suppress warning</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<::tSimStructType> *const %<::tSimStruct> = %<::tSimStructPtr>; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> UsingMalloc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> needRTMdl
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<::tSimStructType> *%<::tSimStruct>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !ExtModeXCP || ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* External mode */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtParseArgsForExtMode(argc, argv);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeErrorCode_T errorCode = EXTMODE_SUCCESS;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Parse External Mode command line arguments */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeParseArgs(argc, argv);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return (errorCode);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Unused arguments */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)(argc);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)(argv);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needRTMdl
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simstructArg = ::tSimStruct
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> simstructArg = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> UsingMalloc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelRegistration">FcnGenerateModelRegistration</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>simstructArg</span>> == NULL) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)fprintf(stderr,"Memory allocation error during model "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"registration");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (rtmGetErrorStatus(%<<span>simstructArg</span>>) != NULL) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)fprintf(stderr,"Error during model registration: %s/n",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtmGetErrorStatus(%<<span>simstructArg</span>>));
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelTerminate">FcnGenerateModelTerminate</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Pack model data into RTM</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertlib.html#FcnPackModelDataIntoRTM">FcnPackModelDataIntoRTM</a>()</span>>      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging &amp;&amp; SeparateRegistrationFcn      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Matfile logging */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/logsup.html#SLibGenLoggingStart">SLibGenLoggingStart</a>()</span>>      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelInitialize">FcnGenerateModelInitialize</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/servicelib.html#SLibEmitRootPortServiceInitForSampleMain">SLibEmitRootPortServiceInitForSampleMain</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertextmode.html#SLibGenERTExtModeInit">SLibGenERTExtModeInit</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTGenCodeRunOneStep">ERTGenCodeRunOneStep</a>(simstructArg)>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If SuppressErrorStatus is true, <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetErrStat">RTMGetErrStat</a>() </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is always (void 0). The following code is </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% dead code. Should not generate</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpbuf    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Matfile logging */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/logsup.html#SLibGenLoggingStop">SLibGenLoggingStop</a>("MATFILE")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelTerminate">FcnGenerateModelTerminate</a>()</span>>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* External Mode reset */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeReset();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* External mode */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeShutdown(%<<span>NumRuntimeExportedRates</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpbuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> SuppressErrorStatus &amp;&amp; !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMStopReqAccessed">RTMStopReqAccessed</a>() &amp;&amp; !UsingMalloc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">WHITE_SPACE</span>(tmpbuf)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* The option 'Remove error status field in real-time model data structure' 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* is selected, therefore the following code does not need to execute.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#if 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>tmpbuf</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>tmpbuf</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return 0;
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="GetErtModelFcnArgs" class="tlc_func">GetErtModelFcnArgs</a>(fcn,isCallSite,tid)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateContStates = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tlc_bifunc">ISEQUAL</span>(tid,0) || <span class="tlc_bifunc">ISEQUAL</span>(tid, "")) &amp;&amp; (NumContStates > 0)
 <br>&nbsp;&nbsp;<span class="tlc_switch">%switch</span> fcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "OutputUpdate"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> updateContStates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("UpdateContStates",isCallSite,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("OutputUpdate",isCallSite,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "Update"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> updateContStates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("UpdateContStates",isCallSite,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>("RootUpdate",isCallSite,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelFcnArgs">SLibModelFcnArgs</a>(fcn,isCallSite,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> argList
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnCallMdlStep" class="tlc_func">FcnCallMdlStep</a>(tid) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateSampleERTMain &amp;&amp; <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsAsyncTaskOnlyModel">SLibIsAsyncTaskOnlyModel</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibIsDeploymentDiagram">LibIsDeploymentDiagram</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% step function is empty, does not exist.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> 
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputReturn = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateFcnName = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateArgList = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> OriginalGenerateSampleERTMain = ConfigSet.GenerateSampleERTMain
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibIsDeploymentDiagram">LibIsDeploymentDiagram</a>() &amp;&amp; (GenerateSampleERTMain || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OriginalGenerateSampleERTMain || RateBasedStepFcn) &amp;&amp; (!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibGenerateNativeThreads">SLibGenerateNativeThreads</a>())
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/deploymentdiagram.html#SLibDeploymentCallERTEntryPoints">SLibDeploymentCallERTEntryPoints</a>(tid)>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (GenerateSampleERTMain || OriginalGenerateSampleERTMain || RateBasedStepFcn)...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibIsPeriodicRateGrouping">SLibIsPeriodicRateGrouping</a>() &amp;&amp; (!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibGenerateNativeThreads">SLibGenerateNativeThreads</a>())
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidSuffix = tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidSuffix = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> CombineOutputUpdateFcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputReturn = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelStepFcnReturn">SLibModelStepFcnReturn</a>("ReturnIdentifier")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputFcnName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibModelStepFcnName">SLibModelStepFcnName</a>(tidSuffix)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputArgList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#GetErtModelFcnArgs">GetErtModelFcnArgs</a>("OutputUpdate",TLC_TRUE,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputFcnName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertlib.html#FcnGetModelOutputFcnNameFromCoderDictionary">FcnGetModelOutputFcnNameFromCoderDictionary</a>(tidSuffix)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputArgList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#GetErtModelFcnArgs">GetErtModelFcnArgs</a>("Output",TLC_TRUE,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateFcnName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertlib.html#FcnGetModelUpdateFcnNameFromCoderDictionary">FcnGetModelUpdateFcnNameFromCoderDictionary</a>(tidSuffix)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> updateArgList = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#GetErtModelFcnArgs">GetErtModelFcnArgs</a>("Update",TLC_TRUE,tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(outputReturn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outputReturn  = outputReturn + " = "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>outputReturn</span>> %<<span>outputFcnName</span>>(%<<span>outputArgList</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Get model outputs here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% This is temporary code to support timing service in code gen. Will be removed later. </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% See g2060510.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibUsingTimingServices">SLibUsingTimingServices</a>() &amp;&amp; <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmisreqfcns.html#ClockTickForTIDIsReqFcn">ClockTickForTIDIsReqFcn</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Update the timing service */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;RTE_TimingService_private.clockTick[%<<span>tid</span>>]++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> updateFcnName != ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> buffsRec   = ::CompiledModel.CachedCodeBuffsForRootSys
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem = System[NumSystems-1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPeriodicRateGrouping = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibIsMultiRateAndPeriodicRateGrouping">SLibIsMultiRateAndPeriodicRateGrouping</a>(rootSystem)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !isPeriodicRateGrouping
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidTemp = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tidTemp = tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(buffsRec,"ExtModeTrailer%<<span>tidTemp</span>>") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="tlc_bifunc">WHITE_SPACE</span>(buffsRec.ExtModeTrailer%<<span>tidTemp</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpBuff = buffsRec.ExtModeTrailer%<<span>tidTemp</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>tmpBuff</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(tid, "") || <span class="tlc_bifunc">ISEQUAL</span>(tid, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(buffsRec,"LogBuffer") &amp;&amp; !<span class="tlc_bifunc">WHITE_SPACE</span>(buffsRec.LogBuffer)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>buffsRec.LogBuffer</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>updateFcnName</span>>(%<<span>updateArgList</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnRTOneStepDescription" class="tlc_func">FcnRTOneStepDescription</a>() <span class="tlc_fkw">Output</span>
 <br>Associating rt_OneStep with a real-time clock or interrupt service routine
 <br>is what makes the generated code "real-time".  The function rt_OneStep is
 <br>always associated with the base rate of the model.  Subrates are managed
 <br>by the base rate from inside the generated code.  Enabling/disabling
 <br>interrupts and floating point context switches are target specific.  This
 <br>example code indicates where these should take place relative to executing
 <br>the generated code step function.  Overrun behavior should be tailored to
 <br>your application needs.  This example simply sets an error status in the
 <br>real-time model and returns from rt_OneStep.
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnSingleRateWithoutOS" class="tlc_func">FcnSingleRateWithoutOS</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("main_util_incl")>  
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_data_defn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_TRUE,TLC_TRUE))>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Comments generation by FcnRTOneStepDescription is moved inside FcnGenerateRtOneStep</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtOneStep">FcnGenerateRtOneStep</a>(TLC_FALSE)>
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> firstTid = FixedStepOpts.TID01EQ? 1:0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface &amp;&amp; CombineOutputUpdateFcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeErrorCode_T errorCode = EXTMODE_SUCCESS;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeSimulationTime_T currentTime = (extmodeSimulationTime_T) 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;static boolean_T OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareFcnProtoCtlVariables">SLibDeclareFcnProtoCtlVariables</a>()</span>>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtMdlPtr">FcnGenerateRtMdlPtr</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Check for overrun */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlag) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateClassInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> RealTimeModelAccessed
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtmSetErrorStatus(%<<span>CPPObjectName</span>>.getRTM(), "Overrun");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetErrStat">RTMSetErrStat</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Save FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Re-enable timer or interrupt here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface &amp;&amp; CombineOutputUpdateFcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime = (extmodeSimulationTime_T) %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetTaskTimeForTID">RTMGetTaskTimeForTID</a>(firstTid)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (NumSynchronousSampleTimes == NumRuntimeExportedRates)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>("")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(0)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface &amp;&amp; CombineOutputUpdateFcns
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Trigger External Mode event */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeEvent(%<<span>firstTid</span>>,currentTime);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Code to handle External Mode event errors
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may be added here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Indicate task complete */ 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Restore FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Enable interrupts here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; (!ExtModeXCP || ExtModeXCPClassicInterface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeCheckEndTrigger();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_mainwithoutOS.html#FcnSimpleNonOSMain">FcnSimpleNonOSMain</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("")>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpFcnBuf
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SingleRateWithoutOS</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="LibInitStr" class="tlc_func">LibInitStr</a>(length) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStr = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma   = ""
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = length
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStr = initStr + "%<<span>comma</span>>0"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ","
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "{%<<span>initStr</span>>}"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnMultiRateSingletaskingWithoutOS" class="tlc_func">FcnMultiRateSingletaskingWithoutOS</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("main_util_incl")>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_data_defn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_TRUE,TLC_TRUE))>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtOneStep">FcnGenerateRtOneStep</a>(TLC_FALSE)>
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;static boolean_T OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareFcnProtoCtlVariables">SLibDeclareFcnProtoCtlVariables</a>()</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtMdlPtr">FcnGenerateRtMdlPtr</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Check for overrun */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlag) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetErrStat">RTMSetErrStat</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Save FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Re-enable timer or interrupt here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for base rate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(0)>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Indicate task complete */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlag = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Restore FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Enable interrupts here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; (!ExtModeXCP || ExtModeXCPClassicInterface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeCheckEndTrigger();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;}
 <br>&nbsp; <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_mainwithoutOS.html#FcnSimpleNonOSMain">FcnSimpleNonOSMain</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("")>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpFcnBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ERTMainCheckRTMTaskRunsThisBaseStep" class="tlc_func">ERTMainCheckRTMTaskRunsThisBaseStep</a>(idx)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SuppressMultiTaskScheduler
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "(taskCounter[%<<span>idx</span>>] == 0)"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "((boolean_T)%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMTaskRunsThisBaseStep">RTMTaskRunsThisBaseStep</a>(idx)>)"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="ERTMainGenSchedulerCode" class="tlc_func">ERTMainGenSchedulerCode</a>()
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SuppressMultiTaskScheduler
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% scheduler code in main </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = NumSynchronousSampleTimes-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> limit = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlreftiming.html#FcnComputeTaskTickLimit">FcnComputeTaskTickLimit</a>(i+1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;taskCounter[%<i+1>]++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (taskCounter[%<i+1>] == %< <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlreftiming.html#FcnComputeTaskTickLimit">FcnComputeTaskTickLimit</a>(i+1)>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;taskCounter[%<i+1>]=0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="EventFlagsFunction" class="tlc_func">EventFlagsFunction</a>(fcnPref,eventflags)
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid01Eq = FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() > 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (i = %<1+tid01Eq>; i < %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainCheckRTMTaskRunsThisBaseStep">ERTMainCheckRTMTaskRunsThisBaseStep</a>("i")> {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>eventflags</span>>[i]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[0] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[i] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Sampling too fast */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/codetemplatelib.html#LibSetRTModelErrorStatus">LibSetRTModelErrorStatus</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>eventflags</span>>[i] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() == 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> lstTid = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainCheckRTMTaskRunsThisBaseStep">ERTMainCheckRTMTaskRunsThisBaseStep</a>(lstTid)> {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span>eventflags</span>>[%<<span>lstTid</span>>]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[0] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[%<<span>lstTid</span>>] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Sampling too fast */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/codetemplatelib.html#LibSetRTModelErrorStatus">LibSetRTModelErrorStatus</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>eventflags</span>>[%<<span>lstTid</span>>] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainGenSchedulerCode">ERTMainGenSchedulerCode</a>()</span>>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "%<<span>fcnPref</span>>SetEventsForThisBaseStep"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> MultiInstanceERTCode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnName</span>>(%<<span>eventflags</span>>, %<::tSimStruct>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnName</span>>(%<<span>eventflags</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnCallEventFlagsFunction" class="tlc_func">FcnCallEventFlagsFunction</a>(fcnPref) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* For a bare-board target (i.e., no operating system), the 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* following code checks whether any subrate overruns, 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* and also sets the rates that need to run this time step.  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#EventFlagsFunction">EventFlagsFunction</a>(fcnPref,"eventFlags")>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* For a bare-board target (i.e., no operating system), the rates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* that execute this base step are buffered locally to allow for
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* overlapping preemption.  The generated code includes function
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* %<<span>fcnName</span>>() which sets the rates
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* that need to run this time step.  The return values are 1 and 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* for true and false, respectively.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#EventFlagsFunction">EventFlagsFunction</a>(fcnPref,"eventFlags")>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnInitializeTaskCounter" class="tlc_func">FcnInitializeTaskCounter</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStr = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma   = ""
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumSynchronousSampleTimes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initStr = initStr + "%<<span>comma</span>>%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmdlreftiming.html#FcnComputeTaskTickOffset">FcnComputeTaskTickOffset</a>(idx)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ","
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "{%<<span>initStr</span>>}"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Code<span style="padding-left:9.5px"></span>Configuration<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibERTMainDeclareVariables<span style="padding-left:9.5px"></span>=============
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Declare<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>ERT<span style="padding-left:9.5px"></span>main<span style="padding-left:9.5px"></span>function.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Arguments:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>globalVariables:<span style="padding-left:9.5px"></span>TLC_TRUE<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>declare<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>variables,<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>otherwise<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>variables
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>bareboard:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TLC_TRUE<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>declare<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>bareboard<span style="padding-left:9.5px"></span>ERT<span style="padding-left:9.5px"></span>main
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibERTMainDeclareVariables" class="tlc_func">LibERTMainDeclareVariables</a>(globalVariables, bareboard)
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> retBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !globalVariables
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> bareboard
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static boolean_T OverrunFlags[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibInitStr">LibInitStr</a>(NumSynchronousSampleTimes)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static  boolean_T eventFlags[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a></a>()</span>>] = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibInitStr">LibInitStr</a>(NumSynchronousSampleTimes)>; /* Model has %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a></a>()</span>> rates */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> SuppressMultiTaskScheduler
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static  int_T taskCounter[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>] = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnInitializeTaskCounter">FcnInitializeTaskCounter</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% local variables</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/codetemplatelib.html#LibNumDiscreteSampleTimes">LibNumDiscreteSampleTimes</a>() > 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T i;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean_T eventFlags[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a></a>()</span>>]; /* Model has %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a></a>()</span>> rates */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !globalVariables &amp;&amp; bareboard
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareFcnProtoCtlVariables">SLibDeclareFcnProtoCtlVariables</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> UsingMalloc &amp;&amp; globalVariables &amp;&amp; bareboard
 <br>&nbsp;&nbsp;&nbsp;&nbsp;const char *RT_MEMORY_ALLOCATION_ERROR = "memory allocation error"; 
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> retBuf
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> retBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnMultiRateMultitaskingWithoutOS" class="tlc_func">FcnMultiRateMultitaskingWithoutOS</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("main_util_incl")> 
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_data_defn", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_TRUE,TLC_TRUE))>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid01Eq = FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtOneStep">FcnGenerateRtOneStep</a>(TLC_FALSE)>
 <br>&nbsp; <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeErrorCode_T errorCode = EXTMODE_SUCCESS;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;extmodeSimulationTime_T currentTime = (extmodeSimulationTime_T) 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_FALSE,TLC_TRUE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateRtMdlPtr">FcnGenerateRtMdlPtr</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Check base rate for overrun */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlags[0]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetErrStat">RTMSetErrStat</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[0] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Save FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Re-enable timer or interrupt here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallEventFlagsFunction">FcnCallEventFlagsFunction</a>("%<<span>Name</span>>_")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs associated with base rate here */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for base rate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> NumContStates == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime = (extmodeSimulationTime_T) %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetTaskTimeForTID">RTMGetTaskTimeForTID</a>(0)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(0)>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> NumContStates == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the model contains continuous states, the extmodeEvent()</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% for the base rate needs to be invoked inside the modelStep0 </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Trigger External Mode event */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeEvent(%<<span>tid01Eq</span>>,currentTime);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Code to handle External Mode event errors
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may be added here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Indicate task for base rate complete */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[0] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() > 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Multiple subrates</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for any subrate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (i = %<1+tid01Eq>; i < %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* If task "i" is running, don't run any lower priority task */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlags[i]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (eventFlags[i]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlags[i]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetErrStat">RTMSetErrStat</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[i] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs associated with subrates here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for subrate "i" */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateSampleERTMain &amp;&amp; <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibIsPeriodicRateGrouping">SLibIsPeriodicRateGrouping</a>() 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch(i) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() - 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = idx + 1 + tid01Eq
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case %<<span>tid</span>> :
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime = (extmodeSimulationTime_T) %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetTaskTimeForTID">RTMGetTaskTimeForTID</a>(tid)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(tid)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Trigger External Mode event */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeEvent(%<<span>tid</span>>,currentTime);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Code to handle External Mode event errors
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may be added here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default : 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime = (extmodeSimulationTime_T) %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetTaskTimeForTID">RTMGetTaskTimeForTID</a>(i)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>("i")>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Trigger External Mode event */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeEvent(%<<span>i</span>>,currentTime);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Code to handle External Mode event errors
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may be added here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Indicate task complete for sample time "i" */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[i] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventFlags[i] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() == 2
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Single subrate</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* If task 1 is running, don't run any lower priority task */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlags[1]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for subrate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (eventFlags[%<<span>tid</span>>]) { 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (OverrunFlags[%<<span>tid</span>>]) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !SuppressErrorStatus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMSetErrStat">RTMSetErrStat</a>("/"Overrun/"")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[%<<span>tid</span>>] = %<GET_TYPE_ID_REPLACEMENT("true")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs associated with subrates here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for subrate %<<span>tid</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTime = (extmodeSimulationTime_T) %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetTaskTimeForTID">RTMGetTaskTimeForTID</a>(tid)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(tid)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; ExtModeXCP &amp;&amp; !ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Trigger External Mode event */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorCode = extmodeEvent(%<<span>tid</span>>,currentTime);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (errorCode != EXTMODE_SUCCESS) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Code to handle External Mode event errors
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may be added here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Indicate task complete for subrate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OverrunFlags[%<<span>tid</span>>] = %<GET_TYPE_ID_REPLACEMENT("false")>; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineSetEventsForThisBaseRateFcn
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;eventFlags[%<<span>tid</span>>] = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Disable interrupts here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Restore FPU context here (if necessary) */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Enable interrupts here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; (!ExtModeXCP || ExtModeXCPClassicInterface)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Ext mode check end trigger */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeCheckEndTrigger();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;}
 <br>&nbsp; <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_mainwithoutOS.html#FcnSimpleNonOSMain">FcnSimpleNonOSMain</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("")>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpFcnBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateMultitaskingOSCode" class="tlc_func">FcnGenerateMultitaskingOSCode</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid01Eq = FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() - 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tid = i + 1 + tid01Eq
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "tSubRate_%<<span>tid</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static int_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SEM_ID sem"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCategory = "main"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Abstract fcnAbstract; Category fcnCategory; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Step"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareFcnProtoCtlVariables">SLibDeclareFcnProtoCtlVariables</a>()</span>>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semTake(sem, WAIT_FOREVER);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs associated to subrate here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for sample time for tid */ 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(tid)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Write model outputs associated to subrate here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_TRUE,TLC_FALSE)>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "tBaseRate"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static int_T"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SEM_ID sem, SEM_ID startStopSem, SEM_ID taskSemList[]"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCategory = "main"
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;Abstract fcnAbstract; Category fcnCategory; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"}
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#LibERTMainDeclareVariables">LibERTMainDeclareVariables</a>(TLC_FALSE,TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;while(1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTStopCheck">ERTStopCheck</a>()</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#PrintERTStopCheckStatus">PrintERTStopCheckStatus</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semGive(startStopSem);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (semTake(sem,NO_WAIT) != ERROR) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;logMsg("Rate for BaseRate task too fast./n",0,0,0,0,0,0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semTake(sem, WAIT_FOREVER);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> firstSubrateTID = 1 + tid01Eq
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibGetNumSyncPeriodicTasks">LibGetNumSyncPeriodicTasks</a>() > 2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% multiple subrates</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ifarg = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainCheckRTMTaskRunsThisBaseStep">ERTMainCheckRTMTaskRunsThisBaseStep</a>("i")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (i = %<<span>firstSubrateTID</span>>; i < %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if %<<span>ifarg</span>> {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semGive(taskSemList[i]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (semTake(taskSemList[i],NO_WAIT) != ERROR) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logMsg("Rate for SubRate task %d is too fast./n",i,0,0,0,0,0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semGive(taskSemList[i]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Single subrate</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ifarg = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainCheckRTMTaskRunsThisBaseStep">ERTMainCheckRTMTaskRunsThisBaseStep</a>("%<<span>firstSubrateTID</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if %<<span>ifarg</span>> {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semGive(taskSemList[%<<span>firstSubrateTID</span>>]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (semTake(taskSemList[%<<span>firstSubrateTID</span>>],NO_WAIT) != ERROR) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;logMsg("Rate for SubRate task %d is too fast./n",%<<span>firstSubrateTID</span>>,0,0,0,0,0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semGive(taskSemList[%<<span>firstSubrateTID</span>>]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTMainGenSchedulerCode">ERTMainGenSchedulerCode</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs associated with base rate here */
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model for base rate */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(0)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* External mode */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeCheckEndTrigger();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateSingletaskingOSCode" class="tlc_func">FcnGenerateSingletaskingOSCode</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "tBaseRate"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static int_T"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SEM_ID sem, SEM_ID startStopSem"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnCategory = "main"
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;Abstract fcnAbstract; Category fcnCategory; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"}
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T i;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareFcnProtoCtlVariables">SLibDeclareFcnProtoCtlVariables</a>()</span>>/
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;while(1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTStopCheck">ERTStopCheck</a>()</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#PrintERTStopCheckStatus">PrintERTStopCheckStatus</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semGive(startStopSem);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (semTake(sem,NO_WAIT) != ERROR) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;logMsg("Rate for SingleRate task too fast./n",0,0,0,0,0,0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semTake(sem, WAIT_FOREVER);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Set model inputs here */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Step the model */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>() > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>(0)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnCallMdlStep">FcnCallMdlStep</a>("")>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* External mode */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeCheckEndTrigger();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;return(1);
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnSchedulerWithOS" class="tlc_func">FcnSchedulerWithOS</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("main_util_incl")>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> singleTasking = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>()
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;/* ANSI C headers */
 <br>&nbsp;&nbsp;#include <float.h>
 <br>&nbsp;&nbsp;#include <stdio.h>
 <br>&nbsp;&nbsp;#include <stdlib.h>
 <br>&nbsp;&nbsp;#include <string.h>
 <br>&nbsp;&nbsp;#include <ctype.h>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;/* VxWorks headers */
 <br>&nbsp;&nbsp;#include <vxWorks.h>
 <br>&nbsp;&nbsp;#include <taskLib.h>
 <br>&nbsp;&nbsp;#include <sysLib.h>
 <br>&nbsp;&nbsp;#include <semLib.h>
 <br>&nbsp;&nbsp;#include <rebootLib.h>
 <br>&nbsp;&nbsp;#include <logLib.h>
 <br>&nbsp; <br>&nbsp;&nbsp;/* this sets the standard stack size for spawned tasks used by the model.
 <br>&nbsp;&nbsp;&nbsp;* this can be changed by compiling with '-DSTACK_SIZE=nnn' where nnn is
 <br>&nbsp;&nbsp;&nbsp;* the stack size desired.
 <br>&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;#ifndef STACK_SIZE
 <br>&nbsp;&nbsp;#define STACK_SIZE 16384
 <br>&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% VxWorks needs this as a global</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;SEM_ID startStopSem;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "PrintUsageMsg"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnAbstract
 <br>Print message describing the usage of rt_main (i.e., how it should be
 <br>invoked - API).
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnAbstract
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "main"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Utility"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("/nInvalid command line arguments:/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf(
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Usage: "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/t %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnMdlName">FcnMdlName</a>()</span>>_main(priority, port, optStr, port)/n/nwhere:/n/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/tint_T  priority     The task priority for spawned tasks/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/tint_T  port         The TCP port used for external communication/n"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/tchar_T *optStr      Options/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("optStr is an option string of the form:/n/t"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"-option1 val1 -option2 val2 -option3/n/n");
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("/tValid options are:/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("/t-tf 20    - sets final time to 20 seconds/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("/t-w        - The simulation waits for the host to connect before starting/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} /* end PrintUsageMsg */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "CountStrs"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static int"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "const char_T *str"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = "Count the number of space delimited strings."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "main"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Utility"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int          count   = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const char_T *strPtr = str;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(*strPtr != '/0') {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* find substring */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (isspace(*strPtr)) strPtr++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;count++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strPtr++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* move over this substring */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ((!isspace(*strPtr)) &amp;&amp; (*strPtr != '/0')) strPtr++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(count);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} /* end CountStrs */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "GetNextStr"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static char_T *"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "char_T *str, char_T **strPtrNext"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnAbstract
 <br>Assuming an input string that consists of space seperators return a pointer
 <br>to the next string, replace the space delimiter with '/0' and return
 <br>a pointer to the next non-white space character (or NULL if end of string).
 <br>&nbsp; <br>str = "  cat dog";
 <br>&nbsp; <br>GetNextStr returns:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;strPtr     = pointer to 'c' (or NULL if no non-space char)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;strPtrNext = pointer to 'd' (or NULL if end of string)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnAbstract
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "main"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Utility"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>>%<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T  done    = %<GET_TYPE_ID_REPLACEMENT("true")>; /* assume */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_T *strPtr = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>; /* assume */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*strPtrNext = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>; /* assume */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Find beginning of this sub-string.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (isspace(*str)) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (*str == '/0') {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* reached end of string */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;goto EXIT_POINT;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strPtr = str++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Find end of this sub-string and make sure that it terminates with '/0'.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while (!isspace(*str) &amp;&amp; (*str != '/0')) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (*str != '/0') {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;done = %<GET_TYPE_ID_REPLACEMENT("false")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*str = '/0';
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Return a pointer to the next subString (or NULL) if at string end.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!done) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while(isspace(*str)) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;str++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (*str == '/0') {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*strPtrNext = (*str == '/0') ? %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>> : str;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;} else {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*strPtrNext = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXIT_POINT:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return(strPtr);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} /* end GetNextOptionStr */
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% ExtMode</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !singleTasking
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateMultitaskingOSCode">FcnGenerateMultitaskingOSCode</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateSingletaskingOSCode">FcnGenerateSingletaskingOSCode</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnMdlName">FcnMdlName</a>() + "_main"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "int_T"
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "int_T priority, char_T *optStr,int_T port"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "int_T priority"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnAbstract
 <br>Spawn %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnMdlName">FcnMdlName</a>()</span>>_main as an independent VxWorks task from your
 <br>application code, specifying its O/S priority
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnAbstract
 <br>&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;Category "main"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html">ertmainlib.tlc</a>"; Type "Main"}
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;const char *status;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;real_T requestedSR, actualSR;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;int_T  VxWorksTIDs[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;SEM_ID rtTaskSemaphoreList[%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% VxWorks needs to access tstartStopSem from other modules, so it is not</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% declared in the local scope here</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEM_ID rtClockSem;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int    optStrLen  = strlen(optStr);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int    argc       = 0;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_T **argv     = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SEM_ID rtClockSem, startStopSem;      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#ERTSimulateOneStep">ERTSimulateOneStep</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("Warning: The simulation will run forever. "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"To change this behavior select the 'MAT-file logging' option./n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fflush(%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% for VxWorks we need to parse the options string</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Parse option string.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if ((optStr != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>) &amp;&amp; (optStrLen > 0)) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int    i;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int    count;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_T *thisStr;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;char_T *nextStr;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Convert to lower case.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (i=0; i<optStrLen; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;optStr[i] = tolower(optStr[i]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* Convert error string to standard argc and argv format. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* count strings and allocate an argv */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argc = CountStrs(optStr) + 1;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argv = (char **)calloc(argc,sizeof(char *));
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (argv == %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void)fprintf(stderr,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Memory allocation error while parsing options string.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit(EXIT_FAILURE);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* populate argv &amp; terminate the individual substrings */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argv[0] = "dummyProgramName";
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i=1;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextStr = optStr;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while ((nextStr != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a></a>()</span>>) &amp;&amp; (thisStr = GetNextStr(nextStr, &amp;nextStr)) != %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>"><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a></a>()</span>> &amp;&amp; ( i < argc )) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argv[i] = thisStr;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i++;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtParseArgsForExtMode(argc, (const char_T **)argv);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeTornadoSetPortInExtUD(port);
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;free(argv);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;argv = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% ExtMode</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;if (priority <= 0 || priority > 255-(%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>()</span>>)+1) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;priority = 30;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;rtClockSem   = semBCreate(SEM_Q_PRIORITY, SEM_EMPTY);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;startStopSem = semBCreate(SEM_Q_PRIORITY, SEM_EMPTY);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelInitialize">FcnGenerateModelInitialize</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeTornadoStartup(%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGet">RTMGet</a>("RTWExtModeInfo")>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>NumRuntimeExportedRates</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(boolean_T *)&amp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMGetStopRequested">RTMGetStopRequested</a>()</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;priority,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STACK_SIZE,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;startStopSem);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> period = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGetPeriodFromTID">FcnGetPeriodFromTID</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;requestedSR = 1.0 / %<<span>period</span>>;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;sysAuxClkDisable();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;sysAuxClkRateSet((int_T)(requestedSR + 0.5));
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;actualSR = (real_T) sysAuxClkRateGet();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;printf("Actual sample rate in Hertz: %f/n",actualSR);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !singleTasking
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> firstSubrateTID = 1 + FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = NumSynchronousSampleTimes - firstSubrateTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx = i + firstSubrateTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> taskName = "tRate%<<span>idx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtTaskSemaphoreList[%<<span>idx</span>>] = semBCreate(SEM_Q_PRIORITY, SEM_EMPTY);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;VxWorksTIDs[%<<span>idx</span>>] = taskSpawn("%<<span>taskName</span>>",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;priority + %<<span>idx</span>>, VX_FP_TASK, STACK_SIZE, (FUNCPTR)tSubRate_%<<span>idx</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(int_T) rtTaskSemaphoreList[%<<span>idx</span>>], 0, 0, 0, 0, 0, 0, 0, 0, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;VxWorksTIDs[0] = taskSpawn("tBaseRate",
 <br>&nbsp;&nbsp;&nbsp;&nbsp;priority, VX_FP_TASK, STACK_SIZE, (FUNCPTR)tBaseRate, (int_T) rtClockSem, 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(int_T) startStopSem, (int_T) rtTaskSemaphoreList, 0, 0, 0, 0, 0, 0, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;if (sysAuxClkConnect((FUNCPTR) semGive, (int_T) rtClockSem) == OK) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rebootHookAdd((FUNCPTR) sysAuxClkDisable);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printf("/nSimulation starting/n");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sysAuxClkEnable();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;semTake(startStopSem, WAIT_FOREVER);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;sysAuxClkDisable();
 <br>&nbsp;&nbsp;&nbsp;&nbsp;taskDelete(VxWorksTIDs[0]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;semDelete(rtClockSem);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;semDelete(startStopSem);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtExtModeTornadoCleanup(%<<span>NumRuntimeExportedRates</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> firstSubrateTID = 1 + FixedStepOpts.TID01EQ
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnNumST">FcnNumST</a>() > firstSubrateTID ) &amp;&amp; !singleTasking
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> i = NumSynchronousSampleTimes - firstSubrateTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx = i + firstSubrateTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;taskDelete(VxWorksTIDs[%<<span>idx</span>>]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;semDelete(rtTaskSemaphoreList[%<<span>idx</span>>]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateModelTerminate">FcnGenerateModelTerminate</a>()</span>>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;return(EXIT_SUCCESS);
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/mathlib.html#SetCurrentUtilsIncludesIdx">SetCurrentUtilsIncludesIdx</a>("")>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpFcnBuf
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGenerateMainFunctions" class="tlc_func">FcnGenerateMainFunctions</a>(retDesc) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> singleTasking = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSingleTasking">SLibSingleTasking</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> delim = "*   "
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibGenerateNativeThreads">SLibGenerateNativeThreads</a>() || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">ISEQUAL</span>(TargetOS, "NativeThreadsExample"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Generate threaded ert main. </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !retDesc  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPC = <span class="tlc_bifunc">FEVAL</span>("ispc")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isPC  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_include">%include</span> "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertwinthread.html">ertwinthread.tlc</a>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_include">%include</span> "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertposixthread.html">ertposixthread.tlc</a>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example for multicore system/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>to be deployed on a operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertposixthread.html#SLibGenerateThreadedMain">SLibGenerateThreadedMain</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> NumSynchronousSampleTimes == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Single rate</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS != "BareBoardExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example single rate main/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>to be deployed on a multitasking operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnSchedulerWithOS">FcnSchedulerWithOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example single rate main assuming/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>no operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_singleratesingletasking.html#FcnSingleRateWithoutOS">FcnSingleRateWithoutOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> !singleTasking
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Multirate/Multitasking</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS != "BareBoardExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example multiple rate main tailored/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>to the VxWorks operating system.  This example code contains a/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>deterministic implementation of a rate monotonic scheduler deployed/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>on a multitasking operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnSchedulerWithOS">FcnSchedulerWithOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example multiple rate main assuming/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>no operating system.  This example code contains a deterministic/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>implementation of a rate monotonic scheduler./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_multiratemultitasking.html#FcnMultiRateMultitaskingWithoutOS">FcnMultiRateMultitaskingWithoutOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Multirate/Singletasking</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS != "BareBoardExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example multiple rate main tailored/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>to the VxWorks operating system.  This example code contains an/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>inplementation of a singletasking process implemented on a multitasking/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnSchedulerWithOS">FcnSchedulerWithOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retDesc ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>Embedded Coder example multi-rate singletasking/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>delim</span>>main assuming no operating system./n" : ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/toolbox/target/codertarget/rtw/codertarget_multiratesingletasking.html#FcnMultiRateSingletaskingWithoutOS">FcnMultiRateSingletaskingWithoutOS</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibDeclareImportedChildCoderDataGroups" class="tlc_func">SLibDeclareImportedChildCoderDataGroups</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(::CompiledModel.CoderDataGroups)  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> instanceIdx = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = <span class="tlc_bifunc">SIZE</span>(::CompiledModel.CoderDataGroups.CoderDataGroup, 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group = ::CompiledModel.CoderDataGroups.CoderDataGroup[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (group.AsStructure == "Standalone") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;group.IsInstanceSpecific &amp;&amp; !group.SingleInstanceDefiner
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* %<<span>group.Identification</span>> for %<<span>group.GraphicalPath</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static %<<span>group.Type</span>> %<<span>group.Name</span>>_%<<span>instanceIdx</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> instanceIdx = instanceIdx + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>  
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibCreateSampleMain" class="tlc_func">SLibCreateSampleMain</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::GeneratingMainFunction = TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem = System[NumSystems-1]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibIsAsyncTaskOnlyModel">SLibIsAsyncTaskOnlyModel</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = 0
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> ::GenerateClassInterface &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">EXISTS</span>(NumServicePorts) &amp;&amp; NumServicePorts>0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootSystem.CurrentTID = ""
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnIsERTMalloc">FcnIsERTMalloc</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeDef = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareModelFcnArgs">SLibDeclareModelFcnArgs</a>(TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mdlFcnArgs_typedef", typeDef)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> reqInsts = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#LibGetSystemField">LibGetSystemField</a>(rootSystem, "ReqRootPrmHdrDataInsts")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> needMdlParam = !reqInsts.ParamsInst &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/prm_cacheutils.html#SLibPrmBufferIsEmpty">SLibPrmBufferIsEmpty</a>("SimulinkGlobal", "Instance")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> needMdlParam
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;static %<::tParametersType> %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/fcniolib.html#LibGetParametersStruct">LibGetParametersStruct</a>()</span>> = {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/prm_cacheutils.html#SLibGetPrmBuffer">SLibGetPrmBuffer</a>("SimulinkGlobal", "Instance")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}; 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareModelFcnArgs">SLibDeclareModelFcnArgs</a>(TLC_TRUE)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#SLibDeclareImportedChildCoderDataGroups">SLibDeclareImportedChildCoderDataGroups</a>()</span>>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/servicelib.html#SLibEmitMessageQueueFunctions">SLibEmitMessageQueueFunctions</a>()</span>>/
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmodelarg.html#SLibDeclareGlobalVariablesForCPPClass">SLibDeclareGlobalVariablesForCPPClass</a>()</span>>/
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_data_defn", tmpFcnBuf)>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;* Auto generated example main program for model: %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnMdlName">FcnMdlName</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;* Simulink Coder version : %<<span>Version</span>>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> GenerateFullHeader
 <br>&nbsp;&nbsp;&nbsp;* %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#CorCPPForBuildLogsandComments">CorCPPForBuildLogsandComments</a>()</span>> source code generated on : %<<span>TLC_TIME</span>>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;* Description:
 <br>&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateMainFunctions">FcnGenerateMainFunctions</a>(1)>/
 <br>&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;* For more information:
 <br>&nbsp;&nbsp;&nbsp;*   o Simulink Coder User's Guide
 <br>&nbsp;&nbsp;&nbsp;*   o Embedded Coder User's Guide
 <br>&nbsp;&nbsp;&nbsp;*   o matlabroot/rtw/c/ert/ert_main.c
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> TargetOS == "VxWorksExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (ExtMode == 1) &amp;&amp; (ExtModeXCP == 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithId">SLibReportErrorWithId</a>("RTW:tlc:ExtModeXCPVxWorks")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> warnTxt="The 'VxWorksExample' option for 'TargetOS' parameter will be removed in a future release."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibReportWarning">LibReportWarning</a>(warnTxt)>/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;*   o Type 'ecodertutorial' in MATLAB
 <br>&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (TargetOS == "BareBoardExample") || (TargetOS == "NativeThreadsExample")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* For a real-time operating system deployment example, reconfigure the
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "Target operating system" option to "VxWorksExample".
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> TargetOS == "VxWorksExample"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* For a bare board (i.e., no real-time operating system) deployment
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* example, reconfigure the "Target operating system" option to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* "BareBoardExample".
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errTxt = "Unknown TargetOS: %<<span>TargetOS</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errTxt)>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_ban", tmpFcnBuf)>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_fcn_defn", <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGenerateMainFunctions">FcnGenerateMainFunctions</a>(0))>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpFcnBuf
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>  (TargetOS == "BareBoardExample") || (TargetOS == "NativeThreadsExample")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#include <stdio.h> /* This ert_main.c example uses printf/fflush */
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;#include "%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/ertmainlib.html#FcnGetPublicModelHeaderFile">FcnGetPublicModelHeaderFile</a>()</span>>" /* Model's header file */
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibIncludeUsedCoderTypesFilenames">SLibIncludeUsedCoderTypesFilenames</a>()</span>>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ExtMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !ExtModeXCP || ExtModeXCPClassicInterface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include "ext_work.h" /* External mode header file */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include "ext_mode.h" /* External mode header file */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> MatFileLogging
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#include "rt_logging.h"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.RTWStatesLogging==1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include "rt_logging_mmi.h"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpFcnBuf
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_incl", tmpFcnBuf)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("mainSrc_defines", <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#LibDeclareERTDefines">LibDeclareERTDefines</a>(NumSystems-1))>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::GeneratingMainFunction = TLC_FALSE
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br></body></html>