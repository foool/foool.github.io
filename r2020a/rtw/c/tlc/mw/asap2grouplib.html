<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2016<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>Library<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>generating<span style="padding-left:9.5px"></span>groups<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>ASAP2<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2CreateGroup<span style="padding-left:9.5px"></span>====================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Creates<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>given<span style="padding-left:9.5px"></span>groupName.<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>created<span style="padding-left:9.5px"></span>group.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>exists,<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>existing<span style="padding-left:9.5px"></span>group.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>groupName:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>created<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>STRING)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>groupLongIdentifier:<span style="padding-left:9.5px"></span>A<span style="padding-left:9.5px"></span>comment<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>STRING)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>A<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2CreateGroup" class="tlc_func">LibASAP2CreateGroup</a>(groupName, groupLongIdentifier, maskType) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tlcName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#SLibMakeGroupName">SLibMakeGroupName</a>(groupName)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>tlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> asapGroups                   /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ASAP2Group {                              /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Name               groupName            /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LongIdentifier     groupLongIdentifier  /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tlcName            tlcName              /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Annotation         ""                   /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Root               TLC_FALSE            /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefCharacteristics {}                   /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefMeasurements    {}                   /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SubGroups          {}                   /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IsValid            TLC_FALSE            /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MaskType           maskType             /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> asapGroups G_%<<span>tlcName</span>> %<<span>asapGroups.NumASAP2Groups</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups.NumASAP2Groups = asapGroups.NumASAP2Groups + 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> asapGroups.ASAP2Group[asapGroups.G_%<<span>tlcName</span>>]
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LibASAP2SetGroupIsRoot<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Set<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>ROOT.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Argument(s)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>group:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2SetGroupIsRoot" class="tlc_func">LibASAP2SetGroupIsRoot</a>(group) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>group.tlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups.ASAP2Group[ASAP2Groups.G_%<<span>group.Name</span>>].Root = TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = group.Name + " is an invalid GROUP"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LibASAP2SetGroupAnnotation<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Set<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>grou's<span style="padding-left:9.5px"></span>annotation
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Argument(s)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>group:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>annotation:<span style="padding-left:9.5px"></span>annotation<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group.<span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>String)<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2SetGroupAnnotation" class="tlc_func">LibASAP2SetGroupAnnotation</a>(group, annotation) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>group.tlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups.ASAP2Group[ASAP2Groups.G_%<<span>group.Name</span>>].Annotation = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;annotation
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = group.Name + " is an invalid GROUP"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2SAddSubGroupToGroup<span style="padding-left:9.5px"></span>============
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Adds<span style="padding-left:9.5px"></span>subGroup<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>SUB_GROUP<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>group.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>group:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>subGroup:The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>subgroup.(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2AddSubGroupToGroup" class="tlc_func">LibASAP2AddSubGroupToGroup</a>(group, subGroup) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(group, subGroup)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>   <span class="tlc_comment">%% do nothing</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>group.tlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> subGroup.Root
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = subGroup.Name + " is a Root. Cannot add as subgroup."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group = asapGroups.ASAP2Group[ASAP2Groups.G_%<<span>group.tlcName</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrouptlcName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#SLibMakeGroupName">SLibMakeGroupName</a>(subGroup.Name)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(group.SubGroups, "SG_%<<span>subGrouptlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> group.SubGroups SG_%<<span>subGrouptlcName</span>> subGroup.Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = group.Name + " is an invalid GROUP"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2AddCharacteristicToGroup<span style="padding-left:9.5px"></span>=======
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Adds<span style="padding-left:9.5px"></span>characteristicName<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>REF_CHARACTERISTIC<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>group
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>group:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>characteristicName:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>identifier<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>characteristic.(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>String)<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2AddCharacteristicToGroup" class="tlc_func">LibASAP2AddCharacteristicToGroup</a>(group, characteristicName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>group.tlcName</span>>")
 <br><span class="tlc_comment">%%breakpoint
</span> <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group = asapGroups.ASAP2Group[ASAP2Groups.G_%<<span>group.tlcName</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Convert characteristicName to a valid TLC name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> charTLCName = <span class="tlc_bifunc">FEVAL</span>("regexprep",characteristicName, "[^//w+]","_")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(group.RefCharacteristics, "Char_%<<span>charTLCName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> group.RefCharacteristics Char_%<<span>charTLCName</span>> ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;characteristicName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = group.Name + " is an invalid GROUP"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2AddMeasurementToGroup<span style="padding-left:9.5px"></span>==========
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Adds<span style="padding-left:9.5px"></span>measurementName<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>REF_MEASUREMENT<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>group.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>group:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>measurementName:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>identifier<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>measurement.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>String)<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2AddMeasurementToGroup" class="tlc_func">LibASAP2AddMeasurementToGroup</a>(group, measurementName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asapGroups = ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(asapGroups, "G_%<<span>group.tlcName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group = asapGroups.ASAP2Group[ASAP2Groups.G_%<<span>group.tlcName</span>>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Convert measurementName to a valid TLC name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> measTLCName = <span class="tlc_bifunc">FEVAL</span>("regexprep",measurementName, "[^//w+]","_")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(group.RefMeasurements, "Meas_%<<span>measTLCName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> group.RefMeasurements Meas_%<<span>measTLCName</span>> measurementName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = group.Name + " is an invalid GROUP"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportFatalError">LibReportFatalError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LibASAP2CreateGraphicalGroups<span style="padding-left:9.5px"></span>=====================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>Creates<span style="padding-left:9.5px"></span>groups<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>subgroups.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>A<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>created<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>graphical<span style="padding-left:9.5px"></span>subsystem<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>graphical<span style="padding-left:9.5px"></span>hierarchy<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>reflected<span style="padding-left:9.5px"></span>via<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>SUB_GROUPS.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>2)<span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>model_dwork_dependency.list<span style="padding-left:9.5px"></span>file.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>rtw.asap2MergeMdlRefs<span style="padding-left:9.5px"></span>function
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>None
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2CreateGraphicalGroups" class="tlc_func">LibASAP2CreateGraphicalGroups</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> DWORKDEPLIST = "%<::CompiledModel.Name>_dwork_dependency.list"
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Write DWork name to dependency list</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> genMdlRefDWork = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelRefScalableBuild">IsModelRefScalableBuild</a>() || ::CompiledModel.GenSingleInstanceMdlRefDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystem = ::CompiledModel.System[<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> genMdlRefDWork || !baseSystem.HasDWorkArg
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 %<<span>baseSystem.Interface.tsysMdlrefDWork</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0 %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/opaquelib.html#FcnSysVarGroupNonreusedName">FcnSysVarGroupNonreusedName</a>(baseSystem, "DWork")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;0 %<::CompiledModel.GlobalScope.tDWork>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Create a root GROUP</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% -------------------</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rootGroup = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>("%<::CompiledModel.Name>", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<::CompiledModel.Name>", "")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2SetGroupIsRoot">LibASAP2SetGroupIsRoot</a>(rootGroup)
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.BlockHierarchyMap
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> sysIdx = NumSubsystems
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (Subsystem[sysIdx].NumBlocks < 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grpName      = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#FcnConvertSLNameToASAP2Name">FcnConvertSLNameToASAP2Name</a>(Subsystem[sysIdx].Name)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grBlkIdx     = Subsystem[sysIdx].SubsystemBlockIndex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grpComment   = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibMangledGrBlockPath">SLibMangledGrBlockPath</a>(grBlkIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maskType     = Subsystem[sysIdx].MaskType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> thisGrp      = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>(grpName,grpComment,maskType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentSysIdx = grBlkIdx[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (parentSysIdx == -1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentGrp = rootGroup
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentSys  = Subsystem[parentSysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#FcnConvertSLNameToASAP2Name">FcnConvertSLNameToASAP2Name</a>(parentSys.Name)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> maskType   = Subsystem[parentSysIdx].MaskType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentGrp  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>(parentName, "", maskType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2AddSubGroupToGroup">LibASAP2AddSubGroupToGroup</a>(parentGrp, thisGrp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check for referenced model blocks and add to subgroup    </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> Subsystem[sysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> blkIdx = NumBlocks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(Block[blkIdx].Type,"ModelReference")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sbIdx = Block[blkIdx]._blkref
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Create referenced model placeholder pattern</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% E.g. "mr_grp2link_modelName"</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refMdlName = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(Block[blkIdx], "CodeVariantModelRefSysBlockRef")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sbCVidxArr = Block[blkIdx].CodeVariantModelRefSysBlockRef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Create subgroups for each model reference variant</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Also dump dwork dependency for each model reference variant</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> refIdx = <span class="tlc_bifunc">SIZE</span>(<span class="tlc_bifunc">FIELDNAMES</span>(sbCVidxArr),1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> flName = <span class="tlc_bifunc">FIELDNAMES</span>(sbCVidxArr)[refIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sbCVidx = <span class="tlc_bifunc">GETFIELD</span>(sbCVidxArr, flName)  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sysBlk = ::CompiledModel.System[sbCVidx[0]].Block[sbCVidx[1]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refMdlName = sysBlk.ParamSettings.ReferencedModelName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpName = "mr_grp2link" + "_" + refMdlName  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(sysBlk, "DWork") 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sysBlk.NumDWork > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>                  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dIdx  = sysBlk.DWork.FirstRootIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2lib.html#FcnGetDWorkTypeNameForIdx">FcnGetDWorkTypeNameForIdx</a>(dIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Add DWork name to placeholder pattern</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% E.g. "mr_grp2link_modelName_DWorkName"</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> validTypeName = <span class="tlc_bifunc">FEVAL</span>("regexprep",typeName, "[^//w+]","_")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpName = subGrpName + "_" + validTypeName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeName</span>>@%<<span>refMdlName</span>>                   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>(subGrp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrp.Name = subGrpName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = subGrp {Name subGrpName; Root 0}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2AddSubGroupToGroup">LibASAP2AddSubGroupToGroup</a>(thisGrp, subGrp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% refIdx       </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span> 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refMdlName = ::CompiledModel.System[sbIdx[0]]....
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Block[sbIdx[2]].ParamSettings.ReferencedModelName            
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpName = "mr_grp2link" + "_" + refMdlName        
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For multi-instance referenced models add DWork name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(Block[blkIdx], "DWork") 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ModelReference blocks with multiple DWords are not supported</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% (for e.g. multi-instance referenced models in a 'For Loop </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Subsystem', multi-instance referenced models with a </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% variable-dimensions IO)</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ModelReference blocks with a self structure do not need to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% record its DWork since it will be contained within this struct</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% NOTE: Simulink Coder does not allow test points inside 'For Each</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Subsystem'. It also does not allow non-Auto storage class </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% objects inside multi-instance referenced models.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> Block[blkIdx].NumDWorks > 1 || <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetUseRTMcgType">SLibGetUseRTMcgType</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dIdx  = Block[blkIdx].DWork._idx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> typeName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2lib.html#FcnGetDWorkTypeNameForIdx">FcnGetDWorkTypeNameForIdx</a>(dIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Add DWork name to placeholder pattern</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% E.g. "mr_grp2link_modelName_DWorkName"</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> validTypeName = <span class="tlc_bifunc">FEVAL</span>("regexprep",typeName, "[^//w+]","_")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpName = subGrpName + "_" + validTypeName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>typeName</span>>@%<<span>refMdlName</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>(subGrp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrp.Name = subGrpName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = subGrp {Name subGrpName; Root 0}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2AddSubGroupToGroup">LibASAP2AddSubGroupToGroup</a>(thisGrp, subGrp)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_closefile">%closefile</span> DWORKDEPLIST
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2AddCharacteristicToGraphicalGroups
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>Characteristic<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>one<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>more<span style="padding-left:9.5px"></span>groups<span style="padding-left:9.5px"></span>reflecting<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>locations<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Simulink<span style="padding-left:9.5px"></span>model.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>NOTE:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TO<span style="padding-left:9.5px"></span>BE<span style="padding-left:9.5px"></span>INVOKED/CALLED<span style="padding-left:9.5px"></span>ONLY<span style="padding-left:9.5px"></span>FROM<span style="padding-left:9.5px"></span>THE<span style="padding-left:9.5px"></span>FOLLOWING<span style="padding-left:9.5px"></span>TEMPLATE<span style="padding-left:9.5px"></span>FUNCTIONS
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>ASAP2UserFcnWriteCharacteristic_Scalar
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>ASAP2UserFcnWriteCharacteristic_Lookup1D
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>ASAP2UserFcnWriteCharacteristic_Lookup2D
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>param:<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>characteristic.<span style="padding-left:9.5px"></span>(Type:<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>Record)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2AddCharacteristicToGraphicalGroups" class="tlc_func">LibASAP2AddCharacteristicToGraphicalGroups</a>(param) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(param,"BlkGrRef")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Scalar: ::CompiledModel.GlobalMemoryMap.ModelParameters.ModelParameter.Instance</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> BlkRefs = param.BlkGrRef
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <span class="tlc_bifunc">ISFIELD</span>(param,"GraphicalRef")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% New lookup tables: ::CompiledModel.ModelParameters.Parameter</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> BlkRefs = param.GraphicalRef
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Old lookup tables are not supported</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numBlocks = <span class="tlc_bifunc">SIZE</span>(BlkRefs, 0)
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numBlocks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkRef  = BlkRefs[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ( (blkRef[1] != -1) &amp;&amp; (blkRef[0] != -1) )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grSubSys =  ::CompiledModel.BlockHierarchyMap.Subsystem[blkRef[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Only add CHARACTERISTICs belonging to current model to the GROUP </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> grSubSys.Block[blkRef[1]].Type != "ModelReference"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#FcnConvertSLNameToASAP2Name">FcnConvertSLNameToASAP2Name</a>(grSubSys.Name)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentGrp  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>(parentName, "", "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2AddCharacteristicToGroup">LibASAP2AddCharacteristicToGroup</a>( parentGrp, <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2lib.html#LibASAP2GetSymbol">LibASAP2GetSymbol</a>(param) )>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>DocFunction{Other<span style="padding-left:9.5px"></span>Useful<span style="padding-left:9.5px"></span>Functions}:<span style="padding-left:9.5px"></span>LibASAP2AddMeasurementToGraphicalGroup
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>measurement<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>group<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>subgroups<span style="padding-left:9.5px"></span>reflecting<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>location<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>signal/state<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>Simulink<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>NOTE:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TO<span style="padding-left:9.5px"></span>BE<span style="padding-left:9.5px"></span>INVOKED/CALLED<span style="padding-left:9.5px"></span>ONLY<span style="padding-left:9.5px"></span>FROM<span style="padding-left:9.5px"></span>THE<span style="padding-left:9.5px"></span>FOLLOWING<span style="padding-left:9.5px"></span>TEMPLATE<span style="padding-left:9.5px"></span>FUNCTION
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>ASAP2UserFcnWriteMeasurement
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Arguments
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>1)<span style="padding-left:9.5px"></span>signal:<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>measurement.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Nothing/Void
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibASAP2AddMeasurementToGraphicalGroup" class="tlc_func">LibASAP2AddMeasurementToGraphicalGroup</a>(signal) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentGrp = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>("%<::CompiledModel.Name>", "", "")
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(signal, "GrSrc")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkRef  = signal.GrSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ( (blkRef[1] != -1) &amp;&amp; (blkRef[0] != -1) )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grSubSys   = ::CompiledModel.BlockHierarchyMap.Subsystem[blkRef[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#FcnConvertSLNameToASAP2Name">FcnConvertSLNameToASAP2Name</a>(grSubSys.Name)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parentGrp  = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2CreateGroup">LibASAP2CreateGroup</a>(parentName, "", "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html#LibASAP2AddMeasurementToGroup">LibASAP2AddMeasurementToGroup</a>( parentGrp, <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2lib.html#LibASAP2GetSymbol">LibASAP2GetSymbol</a>(signal) )>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibMakeGroupName<span style="padding-left:9.5px"></span>=================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>regular<span style="padding-left:9.5px"></span>expression<span style="padding-left:9.5px"></span>rreplacement<span style="padding-left:9.5px"></span>returns<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>without
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>these<span style="padding-left:9.5px"></span>characters:<span style="padding-left:9.5px"></span>[]<>-*+.<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>they<span style="padding-left:9.5px"></span>can<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>tlc<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>name.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibMakeGroupName" class="tlc_func">SLibMakeGroupName</a>(id)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> id = <span class="tlc_bifunc">FEVAL</span>("regexprep", id, "[//[//]//<//>//-//+//*//.]", "_")
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> id
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>====<span style="padding-left:9.5px"></span>Local<span style="padding-left:9.5px"></span>Functions<span style="padding-left:9.5px"></span>ONLY<span style="padding-left:9.5px"></span>=====
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>===============================
</span> <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibOutputGroups<span style="padding-left:9.5px"></span>==================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Outputs<span style="padding-left:9.5px"></span>GROUPS<span style="padding-left:9.5px"></span>based<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>cache<span style="padding-left:9.5px"></span>generated.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibOutputGroups" class="tlc_func">SLibOutputGroups</a>() <span class="tlc_fkw">Output</span>
 <br><span class="tlc_with">%with</span> ::CompiledModel.ASAP2Groups
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Update IsValid flags for GROUPs</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumASAP2Groups
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grpIdx = NumASAP2Groups-idx-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group  = ASAP2Group[grpIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grpMaskIsValid =...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="tlc_bifunc">FEVAL</span>("isBlockFilteredFromGroup", group.MaskType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Enable IsValid flag based on SUB_GROUP IsValid flags</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(group.SubGroups)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpNames   = <span class="tlc_bifunc">FIELDNAMES</span>(group.SubGroups)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numNames      = <span class="tlc_bifunc">SIZE</span>(subGrpNames,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> nameIdx = numNames
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subName = <span class="tlc_bifunc">GETFIELD</span>(group.SubGroups, subGrpNames[nameIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Skip referenced model place holder SUB_GROUP</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(<span class="tlc_bifunc">FEVAL</span>("strfind", subName, "mr_grp2link"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Remove first character 'S'</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> snames = <span class="tlc_bifunc">FEVAL</span>("eval", "feval(@(x)x(2:end), '" + subGrpNames[nameIdx] + "')") 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subIdx   = <span class="tlc_bifunc">GETFIELD</span>(::CompiledModel.ASAP2Groups, snames)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subMaskIsValid =...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="tlc_bifunc">FEVAL</span>("isBlockFilteredFromGroup", ASAP2Group[subIdx].MaskType)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ASAP2Group[subIdx].IsValid &amp;&amp; grpMaskIsValid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SUB_GROUP is valid enable IsValid flag</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ASAP2Group[grpIdx].IsValid = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SUB_GROUP is invalid remove the field</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <span class="tlc_bifunc">REMOVEFIELD</span>(ASAP2Group[grpIdx].SubGroups,...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subGrpNames[nameIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Move CHARACTERISTIC and MEASUREMENT to current group</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !subMaskIsValid ||...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(!grpMaskIsValid &amp;&amp; subMaskIsValid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Move SUB_GROUP's characteristic to current group</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(ASAP2Group[subIdx].RefCharacteristics)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refPar   = ASAP2Group[subIdx].RefCharacteristics
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> parNames = <span class="tlc_bifunc">FIELDNAMES</span>(refPar)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> pIdx = <span class="tlc_bifunc">SIZE</span>(parNames,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(ASAP2Group[grpIdx].RefCharacteristics, parNames[pIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ASAP2Group[grpIdx].RefCharacteristics ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<parNames[pIdx]> "%<<span class="tlc_bifunc">GETFIELD</span>(refPar, parNames[pIdx])>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <span class="tlc_bifunc">REMOVEFIELD</span>(ASAP2Group[subIdx]....
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefCharacteristics,parNames[pIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Move SUB_GROUP's measurement to current group</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(ASAP2Group[subIdx].RefMeasurements)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refSig   = ASAP2Group[subIdx].RefMeasurements
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigNames = <span class="tlc_bifunc">FIELDNAMES</span>(refSig)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> sIdx = <span class="tlc_bifunc">SIZE</span>(sigNames,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISFIELD</span>(ASAP2Group[grpIdx].RefMeasurements, sigNames[sIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ASAP2Group[grpIdx].RefMeasurements ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<sigNames[sIdx]> "%<<span class="tlc_bifunc">GETFIELD</span>(refSig, sigNames[sIdx])>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> tmpVar = <span class="tlc_bifunc">REMOVEFIELD</span>(ASAP2Group[subIdx]....
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RefMeasurements,sigNames[sIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Set SUB_GROUP IsValid flag to false</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ASAP2Group[subIdx].IsValid = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Enable IsValid based on CHARACTERISTIC, MEASUREMENT and mask type</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (grpMaskIsValid &amp;&amp;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(!<span class="tlc_bifunc">ISEMPTY</span>(group.RefCharacteristics) || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="tlc_bifunc">ISEMPTY</span>(group.RefMeasurements) ||...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!<span class="tlc_bifunc">ISEMPTY</span>(group.SubGroups))) 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ASAP2Group[grpIdx].IsValid = TLC_TRUE  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Output GROUPs to ASAP2 file</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumASAP2Groups
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> group = ASAP2Group[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (group.IsValid == TLC_TRUE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/begin GROUP 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Name                   */       %<<span>group.Name</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Long identifier        */       "%<<span>group.LongIdentifier</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<span class="tlc_bifunc">ISEMPTY</span>(group.Annotation)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Annotation             */       "%<<span>group.Annotation</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> group.Root
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Root                    */       ROOT
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subGrpNames = <span class="tlc_bifunc">FIELDNAMES</span>(group.SubGroups)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numNames  = <span class="tlc_bifunc">SIZE</span>(subGrpNames)[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (numNames > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/begin SUB_GROUP
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> nameIdx = numNames
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span class="tlc_bifunc">GETFIELD</span>(group.SubGroups, subGrpNames[nameIdx])>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/end SUB_GROUP
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refCharNames = <span class="tlc_bifunc">FIELDNAMES</span>(group.RefCharacteristics)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numNames = <span class="tlc_bifunc">SIZE</span>(refCharNames)[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (numNames > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/begin REF_CHARACTERISTIC
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> nameIdx = numNames
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span class="tlc_bifunc">GETFIELD</span>(group.RefCharacteristics, refCharNames[nameIdx])>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/end REF_CHARACTERISTIC
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> refMeasNames = <span class="tlc_bifunc">FIELDNAMES</span>(group.RefMeasurements)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numNames  = <span class="tlc_bifunc">SIZE</span>(refMeasNames)[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (numNames > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/begin REF_MEASUREMENT
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> nameIdx = numNames
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span class="tlc_bifunc">GETFIELD</span>(group.RefMeasurements, refMeasNames[nameIdx])>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/end REF_MEASUREMENT
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;/end GROUP
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br><span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnConvertSLNameToASAP2Name<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Strips<span style="padding-left:9.5px"></span>off<span style="padding-left:9.5px"></span>white<span style="padding-left:9.5px"></span>character,<span style="padding-left:9.5px"></span>special<span style="padding-left:9.5px"></span>characters<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>coverts<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>valid
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>ASAP2<span style="padding-left:9.5px"></span>identifier.<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>valid<span style="padding-left:9.5px"></span>identifier
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnConvertSLNameToASAP2Name" class="tlc_func">FcnConvertSLNameToASAP2Name</a>(slName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEQUAL</span>(slName, "<Root>") || <span class="tlc_bifunc">ISEQUAL</span>(slName, "%<::CompiledModel.Name>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "%<::CompiledModel.Name>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> BlockCommentType == "BlockPathComment"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sysName = <span class="tlc_bifunc">SYSNAME</span>(slName)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rtwName = <span class="tlc_bifunc">FEVAL</span>("coder.internal.convertBlockSIDNameToRTWName", "%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>()</span>>", slName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sysName = <span class="tlc_bifunc">SYSNAME</span>(rtwName)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sExpr   = sysName[0] + "_" + sysName[1]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> str = "char(bitor(bitand('%<<span>sExpr</span>>'>='0','%<<span>sExpr</span>>'<='9')," + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"bitor(bitand('%<<span>sExpr</span>>'>='a','%<<span>sExpr</span>>'<='z'),bitand('%<<span>sExpr</span>>'>='A'," + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"'%<<span>sExpr</span>>'<='Z'))).*'%<<span>sExpr</span>>' + ~bitor(bitand('%<<span>sExpr</span>>'>='0','%<<span>sExpr</span>>'<='9')" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;",bitor(bitand('%<<span>sExpr</span>>'>='a','%<<span>sExpr</span>>'<='z'),bitand('%<<span>sExpr</span>>'>='A'," + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"'%<<span>sExpr</span>>'<='Z'))).*'_')"
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <span class="tlc_bifunc">FEVAL</span>("eval", str)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/asap2grouplib.html">asap2grouplib.tlc</a>
</span> <br></body></html>