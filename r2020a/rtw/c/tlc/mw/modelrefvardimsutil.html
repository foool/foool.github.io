<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>system<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>helper<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>support<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>signals
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2017<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_MODELREFVARDIMSUTIL_") == 0
 <br><span class="tlc_assign">%assign</span> _MODELREFVARDIMSUTIL_ = 1
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetArgUseCanDimSizeDW<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>uses
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetArgUseCanDimSizeDW" class="tlc_func">SLibGetArgUseCanDimSizeDW</a>(arg)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <span class="tlc_bifunc">ISFIELD</span>(arg, "CanonicalDimSizeDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetArgUseCanDimSizeDW</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetCanDimSizeDWIdxForArg<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>uses
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetCanDimSizeDWIdxForArg" class="tlc_func">SLibGetCanDimSizeDWIdxForArg</a>(arg)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(arg))
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> arg.CanonicalDimSizeDWorkIdx
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetCanDimSizeDWIdxForArg</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetArgUseSharedDimSizeDW<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>uses
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>shared<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetArgUseSharedDimSizeDW" class="tlc_func">SLibGetArgUseSharedDimSizeDW</a>(arg)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <span class="tlc_bifunc">ISFIELD</span>(arg, "DimSizeDWork")
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetArgUseSharedDimSizeDW</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetArgIsVarDims<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>mode<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>nonvirtual<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>variable-size<span style="padding-left:9.5px"></span>element
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetArgIsVarDims" class="tlc_func">SLibGetArgIsVarDims</a>(arg)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(arg) || <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseSharedDimSizeDW">SLibGetArgUseSharedDimSizeDW</a>(arg)
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetArgIsVarDims</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetExternalIOIsVarDims<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>mode<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>nonvirtual<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>variable-size<span style="padding-left:9.5px"></span>element.<span style="padding-left:9.5px"></span>Canonical
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>cannot<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>DimSizeDWork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetExternalIOIsVarDims" class="tlc_func">SLibGetExternalIOIsVarDims</a>(canIO)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(canIO)
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetExternalIOIsVarDims</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetCanIOIsVarDims<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>mode.<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>nonvirtual<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>variable-size<span style="padding-left:9.5px"></span>element.<span style="padding-left:9.5px"></span>Canonical
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>input/output<span style="padding-left:9.5px"></span>cannot<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>field<span style="padding-left:9.5px"></span>DimSizeDWork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetCanIOIsVarDims" class="tlc_func">SLibGetCanIOIsVarDims</a>(canIO)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(canIO)
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetCanIOIsVarDims</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetCanDWorkIsCanDimSizeDWork<span style="padding-left:9.5px"></span>=================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetCanDWorkIsCanDimSizeDWork" class="tlc_func">SLibGetCanDWorkIsCanDimSizeDWork</a>(cdwIdx)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(CanonicalDWorkArgDef[cdwIdx], "IsCanDimSizeDWork")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isDimSizeDWork = CanonicalDWorkArgDef[cdwIdx].IsCanDimSizeDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Loop through all canonical inputs and outputs to check if </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% any of them use this canonical dwork as canonical dimsize dwork</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isDimSizeDWork = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% check if it is used as an input dim size canonical dwork</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx = NumCanonicalInputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = CanonicalInputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(ci) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cdwIdx == <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isDimSizeDWork = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% NumCanonicalInputArgDefs</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !isDimSizeDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% check if it is used as an output dim size canonical</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% dwork for an output port with lower index</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx = NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(co) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cdwIdx == <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isDimSizeDWork = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% end NumCanonicalInputArgDefs</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> CanonicalDWorkArgDef[cdwIdx] IsCanDimSizeDWork isDimSizeDWork
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> isDimSizeDWork
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetCanDWorkIsCanDimSizeDWork</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetDWorkIsCanDimSizeDWorkInBaseSys<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>ever<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>system.<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>If<span style="padding-left:9.5px"></span>so,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>won't<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>other<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>DWork<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>system
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetDWorkIsCanDimSizeDWorkInBaseSys" class="tlc_func">SLibGetDWorkIsCanDimSizeDWorkInBaseSys</a>(dwIdx)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(::CompiledModel.DWorks.DWork[dwIdx], "IsCanDimSizeDWorkInBaseSysem")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isCanDimSizeDWork = ::CompiledModel.DWorks.DWork[dwIdx].IsCanDimSizeDWorkInBaseSystem
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% find the canonical dwork point to this dwork and check</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% if it is used as a canonical dimsize dwork</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isCanDimSizeDWork = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSys = ::CompiledModel.System[baseSysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> baseSys.Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> cdwIdx = NumCanonicalDWorkArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDW = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> canDW.FirstSignalSrc == dwIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDWorkIsCanDimSizeDWork">SLibGetCanDWorkIsCanDimSizeDWork</a>(cdwIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isCanDimSizeDWork = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> ::CompiledModel.DWorks.DWork[dwIdx] IsCanDimSizeDWorkInBaseSysem isCanDimSizeDWork
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> isCanDimSizeDWork
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetDWorkIsCanDimSizeDWorkInBaseSys</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetDimSizeDWorkFullPath<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>full<span style="padding-left:9.5px"></span>path<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetDimSizeDWorkFullPath" class="tlc_func">SLibGetDimSizeDWorkFullPath</a>(dimSizeDWorkIdx)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkRec        = ::CompiledModel.DWorks.DWork[dimSizeDWorkIdx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(dworkRec, "VarGroupIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroup        = ::CompiledModel.VarGroups.VarGroup[dworkRec.VarGroupIdx[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = varGroup.CGTypeIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupType    = ::CompiledModel.CGTypes.CGType[varGroupTypeIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberId        = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(varGroupTypeIdx, dworkRec.VarGroupIdx[1])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberTypeIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberCGTypeIdx">LibCGTypeMemberCGTypeIdx</a>(varGroupTypeIdx, dworkRec.VarGroupIdx[1])
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name = varGroup.LocalName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name = varGroup.Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() || varGroup.IsPointer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = name + "->" + memberId
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = name + "." + memberId
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> width = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeWidth">LibCGTypeWidth</a>(memberTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> width == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = "&amp;" + fullpath
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> width > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = "&amp;" + fullpath + "[0]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataLayout   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/globalmaplib.html#SLibGetDataLayout">SLibGetDataLayout</a>(dworkRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name         = dworkRec.Identifier
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer    = dworkRec.StorageClass == "ImportedExternPointer" ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLC_TRUE : TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (isPointer)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath   = "%<<span>name</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath   = "&amp;%<<span>name</span>>%<dataLayout[3]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fullpath
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetDimSizeDWorkFullPath</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetDimSizeDWorkFullPathForFcnArg<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>full<span style="padding-left:9.5px"></span>path<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>non-canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetDimSizeDWorkFullPathForFcnArg" class="tlc_func">SLibGetDimSizeDWorkFullPathForFcnArg</a>(dimSizeDWorkIdx, baseIdx, cross)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkRec        = ::CompiledModel.DWorks.DWork[dimSizeDWorkIdx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(dworkRec, "VarGroupIdx") &amp;&amp; !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/datagrouplib.html#SLibIsLegacyStorageClassForDataRecord">SLibIsLegacyStorageClassForDataRecord</a>(dworkRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroup        = ::CompiledModel.VarGroups.VarGroup[dworkRec.VarGroupIdx[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = varGroup.CGTypeIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupType    = ::CompiledModel.CGTypes.CGType[varGroupTypeIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberId        = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(varGroupTypeIdx, dworkRec.VarGroupIdx[1])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberTypeIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberCGTypeIdx">LibCGTypeMemberCGTypeIdx</a>(varGroupTypeIdx, dworkRec.VarGroupIdx[1])
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SLibCGIRVarGroupPath doesn't work for non-hierarchical var groups.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% thus we need to generate prefix by ourselves if the input size</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is from root inport.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(dworkRec.VarGroupIdx[0]) == "ExternalInputSize"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = varGroup.Name + "."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRVarGroupPath">SLibCGIRVarGroupPath</a>(dworkRec.VarGroupIdx[0], baseIdx, cross)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = fullpath + memberId
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> width = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeWidth">LibCGTypeWidth</a>(memberTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> width == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = "&amp;" + fullpath
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> width > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = "&amp;" + fullpath + "[0]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/datagrouplib.html#SLibIsLegacyStorageClassForDataRecord">SLibIsLegacyStorageClassForDataRecord</a>(dworkRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataLayout   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/globalmaplib.html#SLibGetDataLayout">SLibGetDataLayout</a>(dworkRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name         = dworkRec.Identifier
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer    = dworkRec.StorageClass == "ImportedExternPointer" ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLC_TRUE : TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (isPointer)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath   = "%<<span>name</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath   = "&amp;%<<span>name</span>>%<dataLayout[3]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fullpath = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomData">LibCustomData</a>(dworkRec, "address", "", "")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> fullpath
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetDimSizeDWorkFullPath</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetBlockOutputVarDimsIdentifierFromRecord
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>From<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>.rtw<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>BlockOutputs<span style="padding-left:9.5px"></span>Record<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>its<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>identifier<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>I/O<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>accessed<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>within<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>accessSysIdx
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetBlockOutputVarDimsIdentifierFromRecord" class="tlc_func">SLibGetBlockOutputVarDimsIdentifierFromRecord</a>(dimSizeDWorkIdx, accessSysIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkRec        = ::CompiledModel.DWorks.DWork[dimSizeDWorkIdx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(dworkRec, "VarGroupIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupIdx     = dworkRec.VarGroupIdx[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroup        = ::CompiledModel.VarGroups.VarGroup[dworkRec.VarGroupIdx[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = varGroup.CGTypeIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsMatrix">LibCGTypeIsMatrix</a>(varGroupTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/implicititerssutil.html#SLibGetBaseTypeForVarGroupUsedAsMatrix">SLibGetBaseTypeForVarGroupUsedAsMatrix</a>(varGroupTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberId  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(varGroupTypeIdx, dworkRec.VarGroupIdx[1])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SLibCGIRVarGroupPath doesn't work for non-hierarchical var groups.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% thus we need to generate prefix by ourselves if the input size</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is from root inport.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(dworkRec.VarGroupIdx[0]) == "ExternalInputSize"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identiPath = varGroup.Name + "."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identiPath =  <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRVarGroupPath">SLibCGIRVarGroupPath</a>(varGroupIdx,accessSysIdx,TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identipath = identiPath + memberId
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataLayout   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/globalmaplib.html#SLibGetDataLayout">SLibGetDataLayout</a>(dworkRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> name         = dworkRec.Identifier
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer    = dworkRec.StorageClass == "ImportedExternPointer" ? ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TLC_TRUE : TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (isPointer)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identipath   = "%<<span>name</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identipath   = "&amp;%<<span>name</span>>%<dataLayout[3]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> identipath
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetBlockOutputVarDimsIdentifierFromRecord</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetExternalOutputVarDimsIdentifierFromRecord
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>From<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>.rtw<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>ExternalOutputs<span style="padding-left:9.5px"></span>Record<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>its<span style="padding-left:9.5px"></span>varGroupIdx<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>varGroupMemberIdx
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>construct<span style="padding-left:9.5px"></span>identipath
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetExternalOutputVarDimsIdentifierFromRecord" class="tlc_func">SLibGetExternalOutputVarDimsIdentifierFromRecord</a>(SizeVarGroupIdx, accessSysIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupIdx = SizeVarGroupIdx[0]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupMemberIdx = SizeVarGroupIdx[1]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroup        = ::CompiledModel.VarGroups.VarGroup[varGroupIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = varGroup.CGTypeIdx
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsMatrix">LibCGTypeIsMatrix</a>(varGroupTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varGroupTypeIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/implicititerssutil.html#SLibGetBaseTypeForVarGroupUsedAsMatrix">SLibGetBaseTypeForVarGroupUsedAsMatrix</a>(varGroupTypeIdx)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> memberId  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#FcnSLibCGIRGetVarGroupMemberName">FcnSLibCGIRGetVarGroupMemberName</a>(varGroupIdx, varGroupMemberIdx)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% SLibCGIRVarGroupPath doesn't work for non-hierarchical var groups.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% thus we need to generate prefix by ourselves if the input size</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% is from root inport.</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/vargrouplib.html#LibGetVarGroupCategory">LibGetVarGroupCategory</a>(varGroupIdx) == "ExternalOutputSize"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identiPath = varGroup.Name + "."
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identiPath =  <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/opaquelib.html#SLibCGIRVarGroupPath">SLibCGIRVarGroupPath</a>(varGroupIdx,accessSysIdx,TLC_FALSE)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identipath = identiPath + memberId
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> identipath
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetExternalOutputVarDimsIdentifierFromRecord</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetStructDWorkIdxForModelRefBlk<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>index<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>fixed-dims<span style="padding-left:9.5px"></span>signals,<span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>only<span style="padding-left:9.5px"></span>one<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>packed<span style="padding-left:9.5px"></span>structure.<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>var-dims<span style="padding-left:9.5px"></span>output,
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>extra<span style="padding-left:9.5px"></span>dworks<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>shared<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetStructDWorkIdxForModelRefBlk" class="tlc_func">SLibGetStructDWorkIdxForModelRefBlk</a>(block)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(block, "StructDWorkIdx")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> structDWorkIdx = block.StructDWorkIdx
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> structDWorkIdx = -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dworkIdx = block.NumDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsUnknown">LibCGTypeIsUnknown</a>(::CompiledModel.DWorks.DWork[block.DWork[dworkIdx].FirstRootIdx].CGTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> structDWorkIdx = dworkIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_addtorecord">%addtorecord</span> block StructDWorkIdx structDWorkIdx
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> structDWorkIdx
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetStructDWorkIdxForModelRefBlk</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>FcnAddNeededCanDimSizeDWForCanInp<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>FcnAddNeededParameters
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnAddNeededCanDimSizeDWForCanInp" class="tlc_func">FcnAddNeededCanDimSizeDWForCanInp</a>(sysFcn, sysIdx, idx, ...
 <br>&nbsp;&nbsp;skipCanDWork) void
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = CanonicalInputArgDef[idx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 0
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">IDNUM</span>(ci.SignalSrc[0])[0] == "F"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 1
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">IDNUM</span>(ci.SignalSrc[0])[0] == "L"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (sysFcn != "Output" &amp;&amp; sysFcn!= "Update" &amp;&amp;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sysFcn!= "RootUpdate" &amp;&amp; sysFcn!= "OutputUpdate")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> skipThisArg==0   
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !skipCanDWork[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdw = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cTID = System[sysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRG = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(System[sysIdx], sysFcn)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SysFcnArgNeeded">SysFcnArgNeeded</a>(sysFcn, cdw, cTID, isRG)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identi   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(cdw)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = ::CompiledModel.DWorks.DWork[cdw.FirstSignalSrc]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = "const " + <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "") + " "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef = identi + "[%<<span>dwWidth</span>>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef = "*" + identi
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#FcnAddParameter">FcnAddParameter</a>(dataType, argDef)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% if SysFcnArgNeeded</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% if !skipCanDWork</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% if ISFIELD</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end FcnAddNeededCanDimSizeDWForCanInp</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>FcnAddNeededCanDimSizeDWForCanOut<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>FcnAddNeededParameters
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnAddNeededCanDimSizeDWForCanOut" class="tlc_func">FcnAddNeededCanDimSizeDWForCanOut</a>(sysFcn, sysIdx, idx, ...
 <br>&nbsp;&nbsp;skipCanDWork) void
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[idx]
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(co)    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !skipCanDWork[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdw = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cTID = System[sysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRG = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(System[sysIdx], sysFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SysFcnArgNeeded">SysFcnArgNeeded</a>(sysFcn, cdw, cTID, isRG)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identi   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(cdw)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = ::CompiledModel.DWorks.DWork[cdw.FirstSignalSrc]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "") + " "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef = identi + "[%<<span>dwWidth</span>>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef = "*" + identi
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#FcnAddParameter">FcnAddParameter</a>(dataType, argDef)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% if SysFcnArgNeeded</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% if !skipCanDWork</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% </span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end FcnAddNeededCanDimSizeDWForCanOut</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnGetModelRefDWork" class="tlc_func">FcnGetModelRefDWork</a>(aArgClass, aCanIOIdx, aCanDWorkIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% call site</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[aCanDWorkIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx    = canDWork.FirstSignalSrc <span class="tlc_comment">%% global idx</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "&amp;" + aArgClass + "VarDims_%<<span>aCanIOIdx</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> aArgClass + "VarDims_%<<span>aCanIOIdx</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>FcnGetAdditionalCanDimSizeDWForCanInp<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>FcnGetAdditionalArgs
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGetAdditionalCanDimSizeDWForCanInp" class="tlc_func">FcnGetAdditionalCanDimSizeDWForCanInp</a>(sysFcn, sysIdx, ...
 <br>&nbsp;&nbsp;accessSysIdx, callSiteIdx, idx, comma, args, skipCanDWork) void
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalInputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cTID = System[sysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRG = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(System[sysIdx], sysFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> candIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(CanonicalInputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !skipCanDWork[candIdx] &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SysFcnArgNeeded">SysFcnArgNeeded</a>(sysFcn, CanonicalDWorkArgDef[candIdx], cTID, isRG)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We need to be able to access data in the system that</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is writing out this function-call (cs[0].  Previously this was</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% %with System[accessSysIdx], but the HStructDeclSystem for</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% accessSysIdx and cs[0] is always the same.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cs = System[sysIdx].CallSites[callSiteIdx]      
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[cs[0]].HStructDeclSystemIdx == ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[accessSysIdx].HStructDeclSystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> System[cs[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ssBlk = System[cs[2]].Block[cs[3]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ssBlk <span class="tlc_comment">%% subsystem block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = System[sysIdx].Interface.CanonicalInputArgDef[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">IDNUM</span>(ci.SignalSrc[0])[0] == "F"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">IDNUM</span>(ci.SignalSrc[0])[0] == "L"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (sysFcn != "Output" &amp;&amp; sysFcn!= "Update" &amp;&amp;...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sysFcn!= "RootUpdate" &amp;&amp; sysFcn!= "OutputUpdate")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> skipThisArg = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !skipThisArg
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% genModelRef</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() &amp;&amp; accessSysIdx == NumSystems-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + comma + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#FcnGetModelRefDWork">FcnGetModelRefDWork</a>("In", idx, candIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span>          ci = CallSiteInfo.CanonicalInputArg[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span>       idNum = <span class="tlc_bifunc">IDNUM</span>(ci.SignalSrc[0])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span>   interface = System[System[cs[0]].HStructDeclSystemIdx].Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canInputArg = interface.CanonicalInputArgDef[idNum[1]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + comma + <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(interface.CanonicalDWorkArgDef[candIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(interface.CanonicalDWorkArgDef[candIdx],"",...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[accessSysIdx].CurrentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span> <span class="tlc_comment">%% subsystem block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span> <span class="tlc_comment">%% System[sysIdx]</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ["%<<span>comma</span>>", "%<<span>args</span>>"]  
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end FcnGetAdditionalCanDimSizeDWForCanInp</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>FcnGetAdditionalCanDimSizeDWForCanOut<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>FcnGetAdditionalArgs
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGetAdditionalCanDimSizeDWForCanOut" class="tlc_func">FcnGetAdditionalCanDimSizeDWForCanOut</a>(sysFcn, sysIdx, ...
 <br>&nbsp;&nbsp;accessSysIdx, callSiteIdx, idx, comma, args, skipCanDWork) void
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalOutputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cTID = System[sysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRG = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(System[sysIdx], sysFcn)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> candIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(CanonicalOutputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !skipCanDWork[candIdx] &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SysFcnArgNeeded">SysFcnArgNeeded</a>(sysFcn, CanonicalDWorkArgDef[candIdx], cTID, isRG)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We need to be able to access data in the system that</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is writing out this function-call (cs[0].  Previously this was</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% %with System[accessSysIdx], but the HStructDeclSystem for</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% accessSysIdx and cs[0] is always the same.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cs = System[sysIdx].CallSites[callSiteIdx]    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> System[cs[0]].HStructDeclSystemIdx == ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[accessSysIdx].HStructDeclSystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> System[cs[0]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ssBlk = System[cs[2]].Block[cs[3]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ssBlk <span class="tlc_comment">%% subsystem block</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% getModelRef</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>() &amp;&amp; accessSysIdx == NumSystems-1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + comma + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#FcnGetModelRefDWork">FcnGetModelRefDWork</a>("Out", idx, candIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interface = System[System[cs[0]].HStructDeclSystemIdx].Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idNum = <span class="tlc_bifunc">IDNUM</span>(CallSiteInfo.CanonicalDWorkArg[candIdx].SignalSrc)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(<span class="tlc_bifunc">ISEQUAL</span>(idNum[0], "dp"))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdIdx = idNum[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> args = args + comma + <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(interface.CanonicalDWorkArgDef[cdIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(interface.CanonicalDWorkArgDef[cdIdx],"",...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System[accessSysIdx].CurrentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ["%<<span>comma</span>>", "%<<span>args</span>>"]
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end FcnGetAdditionalCanDimSizeDWForCanOut</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibDumpSfcnInpDimsMode<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Set<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>s-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>input
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibDumpSfcnInpDimsMode" class="tlc_func">SLibDumpSfcnInpDimsMode</a>(idx)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetExternalIOIsVarDims">SLibGetExternalIOIsVarDims</a>(ExternalInput[idx]) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsStruct">LibCGTypeIsStruct</a>(ExternalInput[idx].CGTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Function SLibGetExternalIOIsVarDims only checks if the record</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% contains canonical dimsize dwork index. For bus signal with vardims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% element(s), the dimensions mode of the signal should be fixed rather</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% than variable.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "ssSetInputPortDimensionsMode(S, %<<span>idx</span>>, VARIABLE_DIMS_MODE);"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "ssSetInputPortDimensionsMode(S, %<<span>idx</span>>, FIXED_DIMS_MODE);"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibDumpSfcnInpDimsMode</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibDumpSfcnOutDimsMode<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Set<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>s-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>output
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibDumpSfcnOutDimsMode" class="tlc_func">SLibDumpSfcnOutDimsMode</a>(idx)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetExternalIOIsVarDims">SLibGetExternalIOIsVarDims</a>(ExternalOutput[idx]) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;!<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsStruct">LibCGTypeIsStruct</a>(ExternalOutput[idx].CGTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Function SLibGetExternalIOIsVarDims only checks if the record</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% contains canonical dimsize dwork index. For bus signal with vardims</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% element(s), the dimensions mode of the signal should be fixed rather</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% than variable.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "ssSetOutputPortDimensionsMode(S, %<<span>idx</span>>, VARIABLE_DIMS_MODE);"
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "ssSetOutputPortDimensionsMode(S, %<<span>idx</span>>, FIXED_DIMS_MODE);"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibDumpSfcnOutDimsMode</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibModelHasVarDimsInput" class="tlc_func">SLibModelHasVarDimsInput</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsInp = TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ExternalInputs
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumExternalInputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetExternalIOIsVarDims">SLibGetExternalIOIsVarDims</a>(ExternalInput[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsInp = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> hasVarDimsInp
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibModelHasVarDimsOutput" class="tlc_func">SLibModelHasVarDimsOutput</a>()
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsOut = TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ExternalOutputs
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetExternalIOIsVarDims">SLibGetExternalIOIsVarDims</a>(ExternalOutput[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsOut = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> hasVarDimsOut
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibModelOutputSizeDependOnlyInputSize" class="tlc_func">SLibModelOutputSizeDependOnlyInputSize</a>()
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibModelHasVarDimsInput">SLibModelHasVarDimsInput</a>() &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">ISFIELD</span>(::CompiledModel, "SignalSizeComputeType") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">ISEQUAL</span>(::CompiledModel.SignalSizeComputeType, "FromInputSize")
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp;&nbsp; <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="GenerateModelRefSetDimsCall" class="tlc_func">GenerateModelRefSetDimsCall</a>(subsys, type) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnInfo = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#LibGetFcnInfo">LibGetFcnInfo</a>(subsys, type, subsys.CurrentTID)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> type == "SetDims"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibGenSubsystemFcnCall">LibGenSubsystemFcnCall</a>(["outIdx", "ruleIdx"], fcnInfo, SystemIdx, subsys.SystemIdx, 0)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/syslib.html#LibGenSubsystemFcnCall">LibGenSubsystemFcnCall</a>([], fcnInfo, SystemIdx, subsys.SystemIdx, 0)
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="WriteModelrefSFunctionVarDimsSetDimsMethods" class="tlc_func">WriteModelrefSFunctionVarDimsSetDimsMethods</a>(type) <span class="tlc_fkw">Output</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibModelOutputSizeDependOnlyInputSize">SLibModelOutputSizeDependOnlyInputSize</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnEmpty = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> type == "SetDims" &amp;&amp; !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibModelHasVarDimsOutput">SLibModelHasVarDimsOutput</a>() || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type == "FinalizeDims" &amp;&amp; <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonbodlib.html#LibSystemFcnIsEmpty">LibSystemFcnIsEmpty</a>(System[baseSysIdx], "FinalizeDims")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnEmpty = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !fcnEmpty
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> type == "SetDims" 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "mdlSetOutputDimsRuleFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SimStruct *S, int outIdx, int ruleIdx"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> type == "FinalizeDims"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "mdlFinalizeDimsFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SimStruct *S"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract ""; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html">modelrefvardimsutil.tlc</a>"; Type "FinalizeDims"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> System[baseSysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* call to reusable function */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx=NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgIsVarDims">SLibGetArgIsVarDims</a>(CanonicalOutputArgDef[argIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx = CanonicalOutputArgDef[argIdx].RootOutputIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(co, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dataType</span>> *OutPort_%<<span>argIdx</span>> = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(%<<span>dataType</span>> *) ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssGetOutputPortSignal(S, %<<span>idx</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> vardimsDeclInit = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#CommonDeclarationAndInitCanIOVarDims">CommonDeclarationAndInitCanIOVarDims</a>(TLC_FALSE, "", 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasDwork = %<<span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#ModelrefBlockNeedsDwork">ModelrefBlockNeedsDwork</a>()</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hasDwork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> !<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelRefScalableBuild">IsModelRefScalableBuild</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>tsysMdlrefDWorkType</span>> *dw = (%<<span>tsysMdlrefDWorkType</span>> *) ssGetDWork(S, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<vardimsDeclInit[0]> /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<vardimsDeclInit[1]> /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> System[NumSystems-1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> subsys = System[NumSystems-2]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#GenerateModelRefSetDimsCall">GenerateModelRefSetDimsCall</a>(subsys, type)> /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cTID = System[baseSysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRG = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(System[baseSysIdx], type)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGenOutportCurrentDimsWrites">SLibGenOutportCurrentDimsWrites</a>(type, cTID, isRG)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetInputCurrentDimensions<span style="padding-left:9.5px"></span>==============================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Dump<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>dimensions.<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>recursively
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>calls<span style="padding-left:9.5px"></span>itself<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>element(s)<span style="padding-left:9.5px"></span>whose<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>size<span style="padding-left:9.5px"></span>is
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>stored<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>STRUCT
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetInputCurrentDimensions" class="tlc_func">GetInputCurrentDimensions</a>(cgTypeId, dst, inpIdx, startOffset) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = startOffset
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> CGTypes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsStruct">LibCGTypeIsStruct</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in a struct</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idxE = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeNumMembers">LibCGTypeNumMembers</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eDTypeId = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberCGTypeIdx">LibCGTypeMemberCGTypeIdx</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#GetInputCurrentDimensions">GetInputCurrentDimensions</a>(eDTypeId, dst+"."+eName, inpIdx, eOffset)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsMatrix">LibCGTypeIsMatrix</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in an array</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eWidth = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeWidth">LibCGTypeWidth</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = CGType[<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeBaseIndex">LibCGTypeBaseIndex</a>(cgTypeId)].Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimIdx = eWidth
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dst</span>>[%<<span>dimIdx</span>>] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(%<<span>dataType</span>>)ssGetCurrentInputPortDimensions(S, %<<span>inpIdx</span>>, %<<span>eOffset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is a scalar of built-in type</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = CGType[cgTypeId].Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dst</span>> = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(%<<span>dataType</span>>)ssGetCurrentInputPortDimensions(S, %<<span>inpIdx</span>>, %<<span>eOffset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> %<<span>eOffset</span>>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>GetOutputCurrentDimensions<span style="padding-left:9.5px"></span>==============================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Dump<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>dimensions.<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>recursively
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>calls<span style="padding-left:9.5px"></span>itself<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>element(s)<span style="padding-left:9.5px"></span>whose<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>size<span style="padding-left:9.5px"></span>is
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>stored<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>STRUCT
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetOutputCurrentDimensions" class="tlc_func">GetOutputCurrentDimensions</a>(cgTypeId, dst, outIdx, startOffset) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = startOffset
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> CGTypes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsStruct">LibCGTypeIsStruct</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in a struct</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idxE = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeNumMembers">LibCGTypeNumMembers</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eDTypeId = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberCGTypeIdx">LibCGTypeMemberCGTypeIdx</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#GetOutputCurrentDimensions">GetOutputCurrentDimensions</a>(eDTypeId, dst+"."+eName, outIdx, eOffset)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsMatrix">LibCGTypeIsMatrix</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in an array</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eWidth = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeWidth">LibCGTypeWidth</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = CGType[<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeBaseIndex">LibCGTypeBaseIndex</a>(cgTypeId)].Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimIdx = eWidth
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dst</span>>[%<<span>dimIdx</span>>] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(%<<span>dataType</span>>)ssGetCurrentOutputPortDimensions(S, %<<span>outIdx</span>>, %<<span>eOffset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is a scalar of built-in type</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = CGType[cgTypeId].Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dst</span>> = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(%<<span>dataType</span>>)ssGetCurrentOutputPortDimensions(S, %<<span>outIdx</span>>, %<<span>eOffset</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> %<<span>eOffset</span>>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>CommonDeclarationAndInitCanIOVarDims<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Declare<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>arrays<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>run-time<span style="padding-left:9.5px"></span>dimension<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>input
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>output.<span style="padding-left:9.5px"></span>Initialize<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>arrays<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>input(s).<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Note:<span style="padding-left:9.5px"></span>Because<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>run-time<span style="padding-left:9.5px"></span>dimension<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>int32<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>it<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>int<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>Simulink,<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>cannot<span style="padding-left:9.5px"></span>use<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>point<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>vardims
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>buffer<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>Simulink.<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>different<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>how<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>handle<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>IO.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="CommonDeclarationAndInitCanIOVarDims" class="tlc_func">CommonDeclarationAndInitCanIOVarDims</a>(checkAccess, tid, isPeriodicRateGrouping)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ioVarDimsDeclBuffer = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ioVarDimsInitBuffer = ""
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inportVarDimsNamePrefix = "InVarDims_"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outportVarDimsNamePrefix = "OutVarDims_"
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsIO = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> ioVarDimsDeclBuffer
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx=NumCanonicalInputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = CanonicalInputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdIdx    = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !checkAccess || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, tid, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inputPortInfo = ci.SignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> u_str_idx     = <span class="tlc_bifunc">IDNUM</span>(inputPortInfo[0])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> u_idx         = u_str_idx[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx         = canDWork.FirstSignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec         = DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth       = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dataType</span>> %<<span>inportVarDimsNamePrefix</span>>%<<span>argIdx</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dataType</span>> %<<span>inportVarDimsNamePrefix</span>>%<<span>argIdx</span>>[%<<span>dwWidth</span>>];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsIO = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% The var-dims array should also be initialized because the reusable</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% function does not always update the output var-dims at each call</span>
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx=NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !checkAccess || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, tid, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx      = co.RootOutputIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx    = canDWork.FirstSignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dataType</span>> %<<span>outportVarDimsNamePrefix</span>>%<<span>argIdx</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dataType</span>> %<<span>outportVarDimsNamePrefix</span>>%<<span>argIdx</span>>[%<<span>dwWidth</span>>];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasVarDimsIO = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> hasVarDimsIO
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> ioVarDimsInitBuffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasConstOutput = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#MdlRefHasConstantOutput">MdlRefHasConstantOutput</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> asyncTID = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#LibAsynchronousTriggeredTID">LibAsynchronousTriggeredTID</a>(tid)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hasConstOutput &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((NumCanonicalInputArgDefs > 0) || (NumCanonicalOutputArgDefs > 0)) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(::BlockFcn == "Output" || ::BlockFcn == "OutputUpdate") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!asyncTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% g738207: When executing modelref S-function's Const Output function,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% the current port dimensions (vardims) need not be accessed since</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% vardims signals can never run at constant rate and do not need to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% be run during Const Output. tid is passed in as empty when invoked</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% during construction of mdlOutputs.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (%<::CompiledModel.GlobalScope.tTID> != CONSTANT_TID) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx=NumCanonicalInputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = CanonicalInputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !checkAccess || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, tid, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inputPortInfo = ci.SignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> u_str_idx     = <span class="tlc_bifunc">IDNUM</span>(inputPortInfo[0])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> u_idx         = u_str_idx[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx         = canDWork.FirstSignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec         = DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType      = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Get current dimensions of input port %<<span>u_idx</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sizeDWName = "%<<span>inportVarDimsNamePrefix</span>>%<<span>argIdx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#GetInputCurrentDimensions">GetInputCurrentDimensions</a>(DWorks.DWork[dwIdx].CGTypeIdx, sizeDWName, u_idx, 0)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx=NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[argIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !checkAccess || <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, tid, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx      = co.RootOutputIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx    = canDWork.FirstSignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Get current dimensions of output port %<<span>idx</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sizeDWName = "%<<span>outportVarDimsNamePrefix</span>>%<<span>argIdx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#GetOutputCurrentDimensions">GetOutputCurrentDimensions</a>(DWorks.DWork[dwIdx].CGTypeIdx, sizeDWName, idx, 0)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hasConstOutput &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;((NumCanonicalInputArgDefs > 0) || (NumCanonicalOutputArgDefs > 0)) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(::BlockFcn == "Output" || ::BlockFcn == "OutputUpdate") &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;!asyncTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% end if(tid != CONSTANT_TID)</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> ioVarDimsInitBuffer
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span>  ioVarDimsDeclBuffer
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> ["%<<span>ioVarDimsDeclBuffer</span>>", "%<<span>ioVarDimsInitBuffer</span>>"]
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end CommonDeclarationAndInitCanIOVarDims</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>GetBlockInputCanDimSizeDWInterface<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>input
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>interface
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBlockInputCanDimSizeDWInterface" class="tlc_func">GetBlockInputCanDimSizeDWInterface</a>(sysIdx, sysFcn, tid)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  inDWStr = ""
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> thisSystem = System[sysIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentTID     = tid
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPeriodicRateGrouping = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(thisSystem, sysFcn)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  comma = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  inCounter = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  numInputs = ExternalInputs.NumExternalInputs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx = NumCanonicalInputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibGetModelRefRootInputIdx">SLibGetModelRefRootInputIdx</a>(sysIdx, argIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% fill 0 for unused inputs</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numZeroToAdd = idx - inCounter
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>  numZeroToAdd > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inDWStr = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#AppendZeroToString">AppendZeroToString</a>(inDWStr, comma, numZeroToAdd)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma   = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inCounter = idx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalInputArgDef[argIdx]) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(CanonicalDWorkArgDef[<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(CanonicalInputArgDef[argIdx])], ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTID,isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inDWStr = "%<<span>inDWStr</span>>%<<span>comma</span>>1"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inDWStr = "%<<span>inDWStr</span>>%<<span>comma</span>>0"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inCounter = inCounter + 1
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numZeroToAdd = numInputs - inCounter
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>  numZeroToAdd > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inDWStr = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#AppendZeroToString">AppendZeroToString</a>(inDWStr, comma, numZeroToAdd)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma   = ", "
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> inCounter = numInputs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "%<<span>inDWStr</span>>"
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end GetBlockInputCanDimSizeDWInterface</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>GetBlockOutputCanDimSizeDWInterface<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>information<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>interface
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="GetBlockOutputCanDimSizeDWInterface" class="tlc_func">GetBlockOutputCanDimSizeDWInterface</a>(sysIdx, sysFcn, tid)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  outDWStr = ""
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> thisSystem = System[sysIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentTID     = tid
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPeriodicRateGrouping = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/sysbodlib.html#SLibSystemFcnPeriodicRateGrouping">SLibSystemFcnPeriodicRateGrouping</a>(thisSystem, sysFcn)
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma  = ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outCounter = 0
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  numOutputs = ExternalOutputs.NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx = NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#SLibGetModelRefRootOutputIdx">SLibGetModelRefRootOutputIdx</a>(sysIdx, argIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% fill 0 for unused outputs</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numZeroToAdd = idx - outCounter
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>  numZeroToAdd > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outDWStr = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#AppendZeroToString">AppendZeroToString</a>(outDWStr, comma, numZeroToAdd)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma    = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outCounter = idx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalOutputArgDef[argIdx]) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(CanonicalDWorkArgDef[<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(CanonicalOutputArgDef[argIdx])], ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;currentTID,isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outDWStr = "%<<span>outDWStr</span>>%<<span>comma</span>>1"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outDWStr = "%<<span>outDWStr</span>>%<<span>comma</span>>0"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma = ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outCounter = outCounter + 1
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numZeroToAdd = numOutputs - outCounter
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span>  numZeroToAdd > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outDWStr = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefsfcnlib.html#AppendZeroToString">AppendZeroToString</a>(outDWStr, comma, numZeroToAdd)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> comma    = ", "
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> outCounter = numOutputs
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> "%<<span>outDWStr</span>>"
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end GetBlockOutputCanDimSizeDWInterface</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>AppendModelReferenceRegFcnInputCanDimSizeDWArgs<span style="padding-left:9.5px"></span>=====================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>SLibModelReferenceRegFcnArgs
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="AppendModelReferenceRegFcnInputCanDimSizeDWArgs" class="tlc_func">AppendModelReferenceRegFcnInputCanDimSizeDWArgs</a>(idx, currentTID, ...
 <br>&nbsp;&nbsp;isPeriodicRateGrouping, recArgs)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalInputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ci = CanonicalInputArgDef[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(ci)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, currentTID, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx    = canDWork.FirstSignalSrc <span class="tlc_comment">%% global idx</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identi   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canDWork)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef   = "const " + dataType + " " + identi + "[%<<span>dwWidth</span>>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef   = "const " + dataType + " *" + identi
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> recArgs  = recArgs  +  argDef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> recArgs
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end AppendModelReferenceRegFcnInputCanDimSizeDWArgs</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>AppendModelReferenceRegFcnOutputCanDimSizeDWArgs<span style="padding-left:9.5px"></span>====================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>SLibModelReferenceRegFcnArgs
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="AppendModelReferenceRegFcnOutputCanDimSizeDWArgs" class="tlc_func">AppendModelReferenceRegFcnOutputCanDimSizeDWArgs</a>(idx, currentTID, ...
 <br>&nbsp;&nbsp;isPeriodicRateGrouping, recArgs)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalOutputArgDef[idx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> co = CanonicalOutputArgDef[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(co)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#FcnArgNeeded">FcnArgNeeded</a>(canDWork, currentTID, isPeriodicRateGrouping)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx    = canDWork.FirstSignalSrc <span class="tlc_comment">%% global idx</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec    = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> identi   = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canDWork)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataType = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef   = dataType + " " + identi + "[%<<span>dwWidth</span>>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> argDef   = dataType + " *" + identi
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> recArgs
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end AppendModelReferenceRegFcnOutputCanDimSizeDWArgs</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibGetDimsFromIF" class="tlc_func">SLibGetDimsFromIF</a>(block, portIdx, kind) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/utillib.html#SLibInvokeTLCInterface">SLibInvokeTLCInterface</a>(block, kind, portIdx, 0, TLC_FALSE, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"", "", 0, "")
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGetInputCanDimSizeDWForFunctionStr<span style="padding-left:9.5px"></span>============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>GetFunctionStr
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetInputCanDimSizeDWForFunctionStr" class="tlc_func">SLibGetInputCanDimSizeDWForFunctionStr</a>(block, portIdx, fcnInfo, ...
 <br>&nbsp;&nbsp;sysFcnName) void
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = []  
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canInDWorkInfo = fcnInfo.InDimSizeDW
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> canInDWorkInfo[portIdx] > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetDimsFromIF">SLibGetDimsFromIF</a>(block, portIdx, "InputDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystemIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystem = ::CompiledModel.System[baseSystemIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataPort = block.DataInputPort[portIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgIsVarDims">SLibGetArgIsVarDims</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ownerSysIdx = block.BlockIdx[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentTID = ::CompiledModel.System[ownerSysIdx].CurrentTID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sysFcnName == "RegistrationFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(baseSystem.Interface,"CanonicalDWorkArgDef")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = baseSystem.Interface.CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = "%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canDWork)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(canDWork, "", currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx = dataPort.DimSizeDWorkMR
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cross = baseSystem.CrossNoArgFcnBound
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetDimSizeDWorkFullPathForFcnArg">SLibGetDimSizeDWorkFullPathForFcnArg</a>(cdwIdx, baseSystemIdx, cross)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(baseSystem.Interface.DWorkArgDef,"","")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hstructSysIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.System[BlockIdx[1]].HStructDeclSystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interface = ::CompiledModel.System[hstructSysIdx].Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork  = interface.CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> System[BlockIdx[1]].CrossNoArgFcnBound
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = "%<<span>canDWork.GlobalIdentifier</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(canDWork, "Global", currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = "%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canDWork)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(canDWork, "", currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseSharedDimSizeDW">SLibGetArgUseSharedDimSizeDW</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkSysIdx = ::CompiledModel.System[BlockIdx[1]].SystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx = dataPort.DimSizeDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cross = ::CompiledModel.System[blkSysIdx].CrossNoArgFcnBound
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg   = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetDimSizeDWorkFullPathForFcnArg">SLibGetDimSizeDWorkFullPathForFcnArg</a>(dwIdx, blkSysIdx, cross)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sysFcnName == "RegistrationFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(baseSystem.Interface.DWorkArgDef,"","")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hstructSysIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;::CompiledModel.System[BlockIdx[1]].HStructDeclSystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hstructSys = ::CompiledModel.System[hstructSysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwArgDef = hstructSys.Interface.DWorkArgDef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(dwArgDef, "", hstructSys.CurrentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> arg
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end AppendInputCanDimSizeDWForFunctionStr</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function<span style="padding-left:9.5px"></span>SLibGetOutputCanDimSizeDWForFunctionStr<span style="padding-left:9.5px"></span>============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Add<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>dimsize<span style="padding-left:9.5px"></span>dwork<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>canonical<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>argument<span style="padding-left:9.5px"></span>list.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>called<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>GetFunctionStr
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGetOutputCanDimSizeDWForFunctionStr" class="tlc_func">SLibGetOutputCanDimSizeDWForFunctionStr</a>(block, portIdx, fcnInfo, ...
 <br>&nbsp;&nbsp;sysFcnName) void
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = []
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canOutDWorkInfo = fcnInfo.OutDimSizeDW
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> canOutDWorkInfo[portIdx] > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetDimsFromIF">SLibGetDimsFromIF</a>(block, portIdx, "OutputDims")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystemIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSystem = ::CompiledModel.System[baseSystemIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataPort = block.DataOutputPort[portIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseCanDimSizeDW">SLibGetArgUseCanDimSizeDW</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sysFcnName == "RegistrationFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork = baseSystem.Interface.CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkSysIdx = System[BlockIdx[1]].HStructDeclSystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> interface = System[blkSysIdx].Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> canDWork  = interface.CanonicalDWorkArgDef[cdwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentTID = ::CompiledModel.System[BlockIdx[1]].CurrentTID 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> System[BlockIdx[1]].CrossNoArgFcnBound
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = "%<<span>canDWork.GlobalIdentifier</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(canDWork, "Global", currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = "%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(canDWork)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(canDWork,"",currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetArgUseSharedDimSizeDW">SLibGetArgUseSharedDimSizeDW</a>(dataPort)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkSysIdx = ::CompiledModel.System[BlockIdx[1]].SystemIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cross = ::CompiledModel.System[blkSysIdx].CrossNoArgFcnBound
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx = dataPort.DimSizeDWork
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> arg = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetDimSizeDWorkFullPathForFcnArg">SLibGetDimSizeDWorkFullPathForFcnArg</a>(dwIdx, blkSysIdx, cross)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sysFcnName == "RegistrationFcn"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dworkArgDef = baseSystem.Interface.DWorkArgDef
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SLibAccessArgHelper">SLibAccessArgHelper</a>(dworkArgDef, "", currentTID)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> arg
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% end SLibGetOutputCanDimSizeDWForFunctionStr</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SetOutputCurrentDimensions<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Dump<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>set<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>dimensions.<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>recursively
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>calls<span style="padding-left:9.5px"></span>itself<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>bus<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>vardims<span style="padding-left:9.5px"></span>element(s)<span style="padding-left:9.5px"></span>whose<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>size<span style="padding-left:9.5px"></span>is
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>stored<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>STRUCT
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SetOutputCurrentDimensions" class="tlc_func">SetOutputCurrentDimensions</a>(cgTypeId, src, outIdx, startOffset) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = startOffset
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> CGTypes
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsStruct">LibCGTypeIsStruct</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in a struct</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idxE = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeNumMembers">LibCGTypeNumMembers</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eName = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberName">LibCGTypeMemberName</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eDTypeId = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeMemberCGTypeIdx">LibCGTypeMemberCGTypeIdx</a>(cgTypeId, idxE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SetOutputCurrentDimensions">SetOutputCurrentDimensions</a>(eDTypeId, src+"."+eName, outIdx, eOffset)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeIsMatrix">LibCGTypeIsMatrix</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is stored in an array</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eWidth = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/dtypelib.html#LibCGTypeWidth">LibCGTypeWidth</a>(cgTypeId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimIdx = eWidth
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetCurrentOutputPortDimensions(S, %<<span>outIdx</span>>, %<<span>eOffset</span>>, (int)%<<span>src</span>>[%<<span>dimIdx</span>>]);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Current size is a scalar of built-in type</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetCurrentOutputPortDimensions(S, %<<span>outIdx</span>>, %<<span>eOffset</span>>, (int)%<<span>src</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = eOffset + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> %<<span>eOffset</span>>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenOutportCurrentDimsWrites<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>dimension<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenOutportCurrentDimsWrites" class="tlc_func">SLibGenOutportCurrentDimsWrites</a>(sysFcn, cTID, isRG) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> baseSysIdx = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefutil.html#GetBaseSystemIdx">GetBaseSystemIdx</a>()
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> System[baseSysIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> Interface
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> argIdx = NumCanonicalOutputArgDefs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the canonical output is vardims and the vardims local array</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is passed to the model reference reusable function, set the</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% current output dimension based on the values in the vardims </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% local array</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanIOIsVarDims">SLibGetCanIOIsVarDims</a>(CanonicalOutputArgDef[argIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> idx     = CanonicalOutputArgDef[argIdx].RootOutputIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cdwIdx  = <a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SLibGetCanDimSizeDWIdxForArg">SLibGetCanDimSizeDWIdxForArg</a>(CanonicalOutputArgDef[argIdx])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/sysarglib.html#SysFcnArgNeeded">SysFcnArgNeeded</a>(sysFcn, CanonicalDWorkArgDef[cdwIdx], cTID, isRG)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx   = CanonicalDWorkArgDef[cdwIdx].FirstSignalSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec   = DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth = <a href="https://foool.github.io/r2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Set current dimensions for output port %<<span>idx</span>> */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sizeDWName = "OutVarDims_%<<span>argIdx</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> eOffset = %<<a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html#SetOutputCurrentDimensions">SetOutputCurrentDimensions</a>(DWorks.DWork[dwIdx].CGTypeIdx, sizeDWName, idx, 0)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% NumCanonicalOutputArgDefs</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibGenOutportCurrentDimsWrites</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_endif">%endif</span> <span class="tlc_comment">%% _MODELREFVARDIMSUTIL_</span>
 <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/r2020a/rtw/c/tlc/mw/modelrefvardimsutil.html">modelrefvardimsutil.tlc</a>
</span> <br></body></html>