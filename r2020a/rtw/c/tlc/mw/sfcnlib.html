<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>1994-2019<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br>&nbsp; <br><span class="tlc_selectfile">%selectfile</span> NULL_FILE
 <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_SFCNLIB_") == 0
 <br><span class="tlc_assign">%assign</span> _SFCNLIB_ = 1
 <br>&nbsp; <br><span class="tlc_include">%include</span> "<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnutil.html">sfcnutil.tlc</a>"
 <br><span class="tlc_include">%include</span> "<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/prm_sfcntunable.html">prm_sfcntunable.tlc</a>"
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibDumpSfcnInpDims<span style="padding-left:9.5px"></span>===============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Shared<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>dump<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>various<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>formats
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibDumpSfcnInpDims" class="tlc_func">SLibDumpSfcnInpDims</a>(S, pIdx, width, nDims, dims) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> %<<span>nDims</span>> == matrixDimensionThreshhold
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!ssSetInputPortMatrixDimensions(%<<span>S</span>>, %<<span>pIdx</span>>, %<dims[0]>, %<dims[1]>)) /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> %<<span>nDims</span>> > matrixDimensionThreshhold
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DimsInfo_T inpDims;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = "{"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dIdx = nDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dIdx != 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "%<dims[dIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "}"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T inpDimsVals[%<<span>nDims</span>>] = %<<span>dimsStr</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inpDims.width   = %<<span>width</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inpDims.numDims = %<<span>nDims</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inpDims.dims    = inpDimsVals;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inpDims.nextSigDims = %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!ssSetInputPortDimensionInfo(%<<span>S</span>>, %<<span>pIdx</span>>, &amp;inpDims)) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!ssSetInputPortVectorDimension(%<<span>S</span>>, %<<span>pIdx</span>>, %<<span>width</span>>)) return;
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibDumpSfcnInpDims</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibDumpSfcnOutDims<span style="padding-left:9.5px"></span>===============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Shared<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>dump<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>various<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>formats
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibDumpSfcnOutDims" class="tlc_func">SLibDumpSfcnOutDims</a>(S, pIdx, width, nDims, dims) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> %<<span>nDims</span>> == matrixDimensionThreshhold
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!ssSetOutputPortMatrixDimensions(%<<span>S</span>>, %<<span>pIdx</span>>, %<dims[0]>, %<dims[1]>)) /
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> %<<span>nDims</span>> > matrixDimensionThreshhold
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DimsInfo_T outDims;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = "{"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dIdx = nDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dIdx != 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + ", "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "%<dims[dIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "}"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T outDimsVals[%<<span>nDims</span>>] = %<<span>dimsStr</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outDims.width   = %<<span>width</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outDims.numDims = %<<span>nDims</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outDims.dims    = outDimsVals;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outDims.nextSigDims = %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!ssSetOutputPortDimensionInfo(%<<span>S</span>>, %<<span>pIdx</span>>, &amp;outDims)) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;if(!ssSetOutputPortVectorDimension(%<<span>S</span>>, %<<span>pIdx</span>>, %<<span>width</span>>)) return;
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibDumpSfcnOutDims</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibLocalSDeclaration<span style="padding-left:9.5px"></span>=============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibLocalSDeclaration" class="tlc_func">SLibLocalSDeclaration</a>(usingStatic) <span class="tlc_fkw">void</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibLocalSRegistration<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibLocalSRegistration" class="tlc_func">SLibLocalSRegistration</a>(usingStatic) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuffer
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% "Local SimStruct" cached in SimStruct's user data</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;/* Local SimStruct for the generated S-Function */
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> usingStatic
 <br>&nbsp;&nbsp;&nbsp;&nbsp;static LocalS slS;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;LocalS *lS = &amp;slS;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssSetUserData(%<::tSimStruct>, lS);
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;LocalS *lS = (LocalS *) malloc(sizeof(LocalS));
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMChkMemAndReturnIfErr">RTMChkMemAndReturnIfErr</a>("lS")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> ::GenCPP == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void) %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/mathlib.html#LibGenMemFcnCall">LibGenMemFcnCall</a>("memset", "(char *) lS", "0", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sizeof(LocalS)")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetUserData(%<::tSimStruct>, lS);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/private_api/systemslib.html#SLibIsRTMZeroInitCppEnabled">SLibIsRTMZeroInitCppEnabled</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void) %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/mathlib.html#LibGenMemFcnCall">LibGenMemFcnCall</a>("memset", "(void *) lS", "0", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"sizeof(LocalS)")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetUserData(%<::tSimStruct>, lS);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetUserData(%<::tSimStruct>, lS);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalBlockIO(%<::tSimStruct>, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalDefaultParam(%<::tSimStruct>, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalNonContDerivSig(%<::tSimStruct>, 0);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>  
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Local block I/O</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonhdr_blkiolib.html#LibBlockIOStructIsEmpty">LibBlockIOStructIsEmpty</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* block I/O */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varName = "b"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> usingStatic
 <br>&nbsp;&nbsp;&nbsp;&nbsp;static %<::tBlockIOType> sfcnB;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>varName</span>> = (real_T *) &amp;sfcnB;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>varName</span>> = malloc(sizeof(%<::tBlockIOType>));
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMChkMemAndReturnIfErr">RTMChkMemAndReturnIfErr</a>(varName)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalBlockIO(%<::tSimStruct>, %<<span>varName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> unused = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#SLibInitBlockIO">SLibInitBlockIO</a>(varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Invariant Block Outputs</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonhdr_blkiolib.html#LibConstBlockIOStructIsEmpty">LibConstBlockIOStructIsEmpty</a>()
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;_ssSetConstBlockIO(%<::tSimStruct>, &amp;%<::tInvariantSignals>);
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/prm_simulinkglobal.html#LibParametersStructIsEmpty">LibParametersStructIsEmpty</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* model parameters */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalDefaultParam(%<::tSimStruct>, (real_T *) &amp;%<::tDefaultParameters>);
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% NonContDerivSig</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SolverType == "VariableStep" &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;SolverResetInfo.NumNonContDerivSignals > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dU = "nonContDerivSigCache_%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>()</span>>_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varName = "pNonContDerivSig"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> usingStatic
 <br>&nbsp;&nbsp;&nbsp;&nbsp;static %<<span>dU</span>> nonContDerivSigs;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>varName</span>> = (void *) &amp;nonContDerivSigs;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;void *%<<span>varName</span>> = (void *)malloc(sizeof(%<<span>dU</span>>));
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMChkMemAndReturnIfErr">RTMChkMemAndReturnIfErr</a>(varName)>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(void) %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/mathlib.html#LibGenMemFcnCall">LibGenMemFcnCall</a>("memset", "(char *) %<<span>varName</span>>", "0", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"sizeof(%<<span>dU</span>>)")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetLocalNonContDerivSig(%<::tSimStruct>, %<<span>varName</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Previous zero-crossing states</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonhdr_cstatelib.html#LibPrevZCStatesStructIsEmpty">LibPrevZCStatesStructIsEmpty</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prevZCStatesInRTM = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib.html#FcnGetPrevZCSigStateType">FcnGetPrevZCSigStateType</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;/* previous zero-crossing states */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int_T i;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> usingStatic
 <br>&nbsp;&nbsp;&nbsp;&nbsp;static %<::tPrevZCStateType> %<::tPrevZCState>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>prevZCStatesInRTM</span>> *zc = (%<<span>prevZCStatesInRTM</span>> *) &amp;%<::tPrevZCState>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>prevZCStatesInRTM</span>> *zc = (%<<span>prevZCStatesInRTM</span>> *) malloc(sizeof(%<::tPrevZCStateType>));
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/rtmdllib_obs.html#RTMChkMemAndReturnIfErr">RTMChkMemAndReturnIfErr</a>("zc")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;_ssSetPrevZCSigState(%<::tSimStruct>, zc);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for(i = 0; i < %<<span>NumZCEvents</span>>; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;zc[i] = UNINITIALIZED_ZCSIG;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Model mapping info for ParameterTuning</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonmaplib.html#SLibDumpModelMappingInfo">SLibDumpModelMappingInfo</a>()</span>>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Checksums</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;/* model checksums */
 <br>&nbsp;&nbsp;ssSetChecksumVal(%<::tSimStruct>, 0, %<ModelChecksum[0]>);
 <br>&nbsp;&nbsp;ssSetChecksumVal(%<::tSimStruct>, 1, %<ModelChecksum[1]>);
 <br>&nbsp;&nbsp;ssSetChecksumVal(%<::tSimStruct>, 2, %<ModelChecksum[2]>);
 <br>&nbsp;&nbsp;ssSetChecksumVal(%<::tSimStruct>, 3, %<ModelChecksum[3]>);
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuffer
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> tmpBuffer
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="FcnContextErr" class="tlc_func">FcnContextErr</a>(simStructName,curContext, generatedContext) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;ssSetErrorStatus(%<<span>simStructName</span>>, "This Simulink Coder generated " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"S-Function cannot be used in a simulation with " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>curContext</span>> " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"because this S-Function was created from a model with " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>generatedContext</span>>. " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"See the Solver page of the simulation parameters dialog.");
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenerateSolverChecks<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenerateSolverChecks" class="tlc_func">SLibGenerateSolverChecks</a>(simStructName) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> SolverType == "FixedStep"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibIsContinuous">LibIsContinuous</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Make sure this S-Function isn't used in a variable-step model</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Check for invalid switching between solver types */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ssIsVariableStepSolver(%<<span>simStructName</span>>)) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnContextErr">FcnContextErr</a>(simStructName,"a solver type of variable-step", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"solver type of fixed-step and it has continuous time blocks")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (FixedStepOpts.SolverMode == "SingleTasking") &amp;&amp; (NumSynchronousSampleTimes > 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Building S-Function as SingleTasking so check that</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% MultiTasking mode is not later used in a simulation.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ssGetSolverMode(%<<span>simStructName</span>>) == SOLVER_MODE_MULTITASKING) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnContextErr">FcnContextErr</a>(simStructName,"solver mode set to auto or multitasking", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"solver mode set to singletasking")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sysbodlib.html#SLibIsPeriodicRateGrouping">SLibIsPeriodicRateGrouping</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Rate grouped code sfcn code. </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% SingleTasking mode is not later used in a simulation.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ssGetSolverMode(%<<span>simStructName</span>>) == SOLVER_MODE_SINGLETASKING) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnContextErr">FcnContextErr</a>(simStructName,"solver mode set to singletasking", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"solver mode set to auto or multitasking")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (FixedStepOpts.DoRTWSFcnTID01EQCheck)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fs = FixedStepOpts.FixedStep
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (fabs(ssGetFixedStepSize(%<::tSimStruct>) - %<<span>fs</span>>) > mxGetEps()*100*%<<span>fs</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnContextErr">FcnContextErr</a>(simStructName, "the current fixed step size", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"a fixed step size of %<<span>FixedStepOpts.FixedStep</span>> and had both /"/n" ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"/"continuous blocks and discrete blocks running at this rate")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibIsContinuous">LibIsContinuous</a>(0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Make sure this S-Function isn't used in a fixed-step model</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/* Check for invalid switching between solver types */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!ssIsVariableStepSolver(%<<span>simStructName</span>>)) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnContextErr">FcnContextErr</a>(simStructName,"a solver type of fixed-step", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"solver type of variable-step solver and it has continuous time blocks")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LibDumpSfunTargetChecks<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>checks<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>mdlStart<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>target
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LibDumpSfunTargetChecks" class="tlc_func">LibDumpSfunTargetChecks</a>() <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nonFinitesBuffer = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnutil.html#SLibGetSFcnNonFinite">SLibGetSFcnNonFinite</a>()
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;/* instance underlying S-Function data */
 <br>&nbsp;&nbsp;#if defined(RT_MALLOC) || defined(MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;#  if defined(MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;%<<span>nonFinitesBuffer</span>>/
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGenerateSolverChecks">SLibGenerateSolverChecks</a>(::tSimStruct)>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;#  endif
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>()</span>>_malloc(%<::tSimStruct>);
 <br>&nbsp;&nbsp;if( ssGetErrorStatus(%<::tSimStruct>) != %<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibGetNullDefinitionFromTfl">SLibGetNullDefinitionFromTfl</a>()</span>> ) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% LibDumpSfunTargetChecks</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibCreateSfcnTunablePrmWSVariable<span style="padding-left:9.5px"></span>================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Create<span style="padding-left:9.5px"></span>Tunable<span style="padding-left:9.5px"></span>Parameters<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>Target<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>MATLAB<span style="padding-left:9.5px"></span>workspace
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Used<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>build<span style="padding-left:9.5px"></span>procedure(rtw_c)<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>create<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>block.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibCreateSfcnTunablePrmWSVariable" class="tlc_func">SLibCreateSfcnTunablePrmWSVariable</a>(mdlName, numTunablePrms, prmIdxVec) <span class="tlc_fkw">void</span>
 <br>&nbsp;<span class="tlc_assign">%assign</span> GenCodeOnly = <span class="tlc_bifunc">FEVAL</span>("get_param",mdlName,"RTWGenerateCodeOnly")
 <br>&nbsp;<span class="tlc_if">%if</span> GenCodeOnly != "on"
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base","clear global rtwsfcn_%<<span>mdlName</span>>")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Initialize global variable for storing name &amp; value strings</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> numTunablePrms > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base","global rtwsfcn_%<<span>mdlName</span>>")
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Cache name &amp; value strings for each parameter.</span>
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ModelParameters
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> prmIdx = numTunablePrms
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnCacheNameAndValueStrForSFcnParam">FcnCacheNameAndValueStrForSFcnParam</a>(mdlName, prmIdxVec[prmIdx])>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibCreateSfcnTunablePrmWSVariable</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>LegacyFixptValueConversion<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>adds<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>fixed<span style="padding-left:9.5px"></span>point<span style="padding-left:9.5px"></span>value<span style="padding-left:9.5px"></span>conversion<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>value
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>string.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="LegacyFixptValueConversion" class="tlc_func">LegacyFixptValueConversion</a>(aDataTypeIdx, aValueStr)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Account for scaling / bias of fixed-point parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Used with the ERT S-Function (not generated S-Function)</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> (GenerateErtSFunction == 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% *** aValueStr represents the stored-integer value ***</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = aValueStr
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dType = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(aDataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Perform operations to account for scaling and bias</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%    RealWorldValue = Bias + Slope*StoredIntValue</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (dType.FixedExp > 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "(2^%<<span>dType.FixedExp</span>>)*%<<span>valueStr</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> (dType.FixedExp < 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "(2^(%<<span>dType.FixedExp</span>>))*%<<span>valueStr</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (dType.FracSlope != 1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "%<<span>dType.FracSlope</span>>*%<<span>valueStr</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (dType.Bias != 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "%<<span>dType.Bias</span>> + %<<span>valueStr</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% *** valueStr now represents the real-world value ***</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% NOTE: We do not need to cast this value string to the appropriate</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% data type because it will get transformed to this data type when</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% the ERT S-Function registers it as a run-time parameter.    </span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> valueStr
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibGetFxptValueStr" class="tlc_func">SLibGetFxptValueStr</a>(aMLType, aIsSigned, aNumBits, aFracSlope, ...
 <br>&nbsp;&nbsp;aFixedExp, aBias, aValueStr, aIsComplex, numElements) void
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", aValueStr, "(", "")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, ")", "")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"MIN_" + aMLType + "_T", "intmin('" + aMLType + "')")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"MAX_" + aMLType + "_T", "intmax('" + aMLType + "')")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isLargeInt = (aNumBits > 53)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> isLargeInt || aFracSlope != 1 || aFixedExp != 0 || aBias != 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fiCall = "fi([], %<<span>aIsSigned</span>>, %<<span>aNumBits</span>>, " ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>aFracSlope</span>>, %<<span>aFixedExp</span>>, %<<span>aBias</span>>, 'int', "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> aIsComplex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("regexprep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"((-|)[0-9]+)//s*//+//s*((-|)[0-9]+)//s*//*//s*i", "complex($1, $2)")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isLargeInt  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("regexprep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(//(|//[| )((-|)[0-9]+)", "$1%<<span>fiCall</span>>%<<span>aMLType</span>>($2))")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("regexprep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(//(|//[| )((-|)[0-9]+)", "$1%<<span>fiCall</span>>$2)")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isLargeInt  
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("regexprep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(//[| )((-|)[0-9]+)", "$1%<<span>aMLType</span>>($2)")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = fiCall + valueStr + ")"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% fi(v,s,w,slopeadjustmentfactor,fixedexponent,bias, 'int', [stored int])</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> valueStr
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="SLibGetMLIntegerValueStr" class="tlc_func">SLibGetMLIntegerValueStr</a>(aDataTypeIdx, aMLType, aValueStr, ...
 <br>&nbsp;&nbsp;aIsComplex, numEl) void
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", "%<<span>aValueStr</span>>","U", "")      
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr,      "L", "")
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(aDataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dType = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/fixpt/fixptlib.html#FixPt_GetDataTypeFromIndex">FixPt_GetDataTypeFromIndex</a>(aDataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dType.RequiredBits > 53
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetFxptValueStr">SLibGetFxptValueStr</a>(aMLType, dType.IsSigned, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dType.RequiredBits, dType.FracSlope, dType.FixedExp, dType.Bias, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueStr, aIsComplex, numEl)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#LegacyFixptValueConversion">LegacyFixptValueConversion</a>(aDataTypeIdx, valueStr)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> aMLType == "int64"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetFxptValueStr">SLibGetFxptValueStr</a>(aMLType, 1, 64, 1, 0, 0, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueStr, aIsComplex, numEl)
 <br>&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> aMLType == "uint64"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetFxptValueStr">SLibGetFxptValueStr</a>(aMLType, 0, 64, 1, 0, 0, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;valueStr, aIsComplex, numEl)
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(MIN_" + aMLType + "_T)", "intmin('" + aMLType + "')")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"(MAX_" + aMLType + "_T)", "intmax('" + aMLType + "')")    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = aMLType + "(" + valueStr + ")"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> valueStr
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnCacheNameAndValueStrForSFcnParam<span style="padding-left:9.5px"></span>===============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>&amp;<span style="padding-left:9.5px"></span>value<span style="padding-left:9.5px"></span>strings<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>by
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>(or<span style="padding-left:9.5px"></span>ERT)<span style="padding-left:9.5px"></span>S-Function.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>NOTE:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>These<span style="padding-left:9.5px"></span>strings<span style="padding-left:9.5px"></span>get<span style="padding-left:9.5px"></span>cached<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>MATLAB<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>(accessed<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>rtw_c.m)
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnCacheNameAndValueStrForSFcnParam" class="tlc_func">FcnCacheNameAndValueStrForSFcnParam</a>(modelName, mdlPrmIdx) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlPrm = ModelParameters.Parameter[mdlPrmIdx]
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataTypeIdx = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeIdAliasedThruToFromId">LibGetDataTypeIdAliasedThruToFromId</a>(mdlPrm.OriginalDataTypeIdx)
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% --- Create the name string for this parameter -------------------------</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%%  Mask Editor dialogs for S-Function blocks can display tunable parameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  by name or by value in the edit fields.  Generated S-Function targets support a</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  configuration checkbox that gives users the choice of propagating</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  parameter names or parameter values to the masks of generated S-Function</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  blocks.  For ERT targets, generation of S-Function</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  blocks does not support this option and parameters are always propagated</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  to the mask editor by name.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  Check if the 'UseParamValues' option exists in the config set, and</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%  if it does, respect it.  Otherwise, default to using parameter names.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnParamMatchesVariableInGlobalScope">FcnParamMatchesVariableInGlobalScope</a>(pName,mdlPrm) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(!<span class="tlc_bifunc">EXISTS</span>(ConfigSet.UseParamValues) || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="tlc_bifunc">EXISTS</span>(ConfigSet.UseParamValues) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConfigSet.UseParamValues == 0)))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> (<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnIsParamAlias">FcnIsParamAlias</a>(mdlPrm))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nameStr  = mdlPrm.WorkspaceVarName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nameStr  = pName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = ""
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Resulting value could be the result of executing an expression that</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% uses a combination of functions and variables from multiple workspaces</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% and may also include a transformation due to scaling/bias.  Therefore</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% we can not reliably use the parameter name in the generated S-Fcn.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% --> Always use numeric (stored integer) value directly.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> nameStr = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% --- Create the value string for this parameter ------------------------</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordIsComplex">LibGetRecordIsComplex</a>(mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get value string and replace TLC-specific tokens</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlPrmValue = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/paramlib.html#SLibGetValueFromParamRec">SLibGetValueFromParamRec</a>(mdlPrm, TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = FEATURE("expandparameter", mdlPrmValue)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsNonBuiltInTypeNeededForFixpt">LibIsNonBuiltInTypeNeededForFixpt</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% remove white space before i.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep","%<<span>valueStr</span>>"," i","/*i")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeMultiWordFixpt">LibIsDataTypeMultiWordFixpt</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("fixptGetMultiWordValue", valueStr, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;IntegerSizes.LongNumBits)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnReshapeValueStr">FcnReshapeValueStr</a>(valueStr, mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsDataTypeFixpt">LibIsDataTypeFixpt</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#LegacyFixptValueConversion">LegacyFixptValueConversion</a>(dataTypeIdx, valueStr)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsEnumDataType">LibIsEnumDataType</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(dataTypeIdx), valueStr, isComplex, <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordWidth">LibGetRecordWidth</a>(mdlPrm))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnReshapeValueStr">FcnReshapeValueStr</a>(valueStr, mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numElement = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordWidth">LibGetRecordWidth</a>(mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_switch">%switch</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(dataTypeIdx)          
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "int64_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"int64", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "uint64_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uint64", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "int32_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"int32", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "uint32_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uint32", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "int16_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"int16", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "uint16_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uint16", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "int8_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"int8", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "uint8_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"uint8", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "boolean_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibGetMLIntegerValueStr">SLibGetMLIntegerValueStr</a>(dataTypeIdx, ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"logical", valueStr, isComplex, numElement)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "real32_T"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep","%<<span>valueStr</span>>","F","")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtInfF",     "inf")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtMinusInfF","-inf")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtNaNF",     "nan")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "single(" + valueStr + ")"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtInf",      "inf")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtMinusInf","-inf")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <span class="tlc_bifunc">FEVAL</span>("strrep", valueStr, "rtNaN",      "nan")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnReshapeValueStr">FcnReshapeValueStr</a>(valueStr, mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Create temporary global variable in base workspace</span>
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"rtwsfcn_%<<span>modelName</span>>(end+1).Name = '%<<span>pName</span>>';")
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"rtwsfcn_%<<span>modelName</span>>(end).NameStr = '%<<span>nameStr</span>>';")
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Matlab would crash if the intialization string of tunable </span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% parameter exceeded the matlab eval function limit of 64kB.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Added workaround by assigning a temporary variable in the</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% base workspace in order to limit the size of the evaluation</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% string.</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> assignin("base", "rtw_sfunction_temp_var", valueStr)  
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base", ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;"rtwsfcn_%<<span>modelName</span>>(end).ValueStr = rtw_sfunction_temp_var;")
 <br>&nbsp;&nbsp;<span class="tlc_matlab">%matlab</span> evalin("base", "clear rtw_sfunction_temp_var;")
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% FcnCacheNameAndValueStrForSFcnParam</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenRTWSFcnParamHandlingFcns<span style="padding-left:9.5px"></span>==================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>generates<span style="padding-left:9.5px"></span>all<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>handling<span style="padding-left:9.5px"></span>functions:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>mdlCheckParameters:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>attributes<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>dialog<span style="padding-left:9.5px"></span>parameters
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>mdlSetWorkWidths:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Register<span style="padding-left:9.5px"></span>run-time<span style="padding-left:9.5px"></span>parameters
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>mdlProcessParameters:<span style="padding-left:9.5px"></span>Update<span style="padding-left:9.5px"></span>tunable<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>values
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>We<span style="padding-left:9.5px"></span>do<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>currently<span style="padding-left:9.5px"></span>retrieve<span style="padding-left:9.5px"></span>these<span style="padding-left:9.5px"></span>functions<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>cache.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>We<span style="padding-left:9.5px"></span>simply<span style="padding-left:9.5px"></span>generate<span style="padding-left:9.5px"></span>them<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>asked.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenRTWSFcnParamHandlingFcns" class="tlc_func">SLibGenRTWSFcnParamHandlingFcns</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> ((CodeFormat == "S-Function") &amp;&amp; !Accelerator)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> result = [0, ""]
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Create mapping to tunable parameters to be included</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numTunablePrms = 0
 <br>&nbsp;&nbsp;<span class="tlc_with">%with</span> ModelParameters
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We need to handle ModelParameters for both AllTunable mode</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% and variable only mode.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> InlineParameters != 0 &amp;&amp; NumParameters > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prmIdxVec = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;Vector(%<<span>NumParameters</span>>) [0:%<NumParameters-1>]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> prmIdx = NumParameters
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlPrm = Parameter[prmIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> mdlPrm.StorageClass == "Auto_SFCN" &amp;&amp; mdlPrm.Tunable == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordIsComplex">LibGetRecordIsComplex</a>(mdlPrm)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(mdlPrm.OriginalDataTypeIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prmIdxVec[numTunablePrms] = prmIdx
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numTunablePrms = numTunablePrms + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%%  mdlPrm.StorageClass == "Auto_SFCN" &amp;&amp; mdlPrm.Tunable == "yes"    </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% prmIdx = NumParameters</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Generate the functions into a buffer to be returned</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> numTunablePrms > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check that the number of tunable parameters matches the number of</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% parameter that were declared/defined in <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/prm_sfcntunable.html">prm_sfcntunable.tlc</a></span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span>(numTunablePrms == ::CompiledModel.ModelParameters.SfcnParamIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Cache parameter names in variable in global MATLAB workspace</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibCreateSfcnTunablePrmWSVariable">SLibCreateSfcnTunablePrmWSVariable</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>(), numTunablePrms, prmIdxVec)>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> fcnBuffer
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Write out mdlCheckParameters function</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnGenRTWSFcnCheckParamsFcn">FcnGenRTWSFcnCheckParamsFcn</a>(numTunablePrms, prmIdxVec)>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> fcnBuffer
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%-------------------------------------------------------------------     </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% NOT REGISTERING RUN-TIME PARAMETERS FOR GENERATED S-FUNCTION:</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%-------------------------------------------------------------------     </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> result[0] = %<<span>numTunablePrms</span>>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> result[1] = "%<<span>fcnBuffer</span>>"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> result
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibGenRTWSFcnParamHandlingFcns</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnGenRTWSFcnCheckParamsFcn<span style="padding-left:9.5px"></span>=======================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>mdlCheckParameters<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>S-Functions.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGenRTWSFcnCheckParamsFcn" class="tlc_func">FcnGenRTWSFcnCheckParamsFcn</a>(numTunablePrms, prmIdxVec) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> numTunablePrms > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ModelParameters
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnAbstract = "This function checks the attributes of tunable parameters."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "mdlCheckParameters"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnReturns = "static void"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnParams = "SimStruct *%<::tSimStruct>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_createrecord">%createrecord</span> fcnRec {Name fcnName; Returns fcnReturns; Params fcnParams; Abstract fcnAbstract; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Category "model"; GeneratedBy "<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html">sfcnlib.tlc</a>"; Type "Model parameter check"}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonhdrlib.html#SLibDumpFunctionBanner">SLibDumpFunctionBanner</a>(fcnRec)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_undef">%undef</span> fcnRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#define MDL_CHECK_PARAMETERS
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#if defined(MDL_CHECK_PARAMETERS) &amp;&amp; defined(MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnReturns</span>> %<<span>fcnName</span>>(%<<span>fcnParams</span>>)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> sfcnPrmIdx = numTunablePrms
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mdlPrm = Parameter[prmIdxVec[sfcnPrmIdx]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnGenRTWSFcnParamChecks">FcnGenRTWSFcnParamChecks</a>(mdlPrm, sfcnPrmIdx)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> <span class="tlc_comment">%% sfcnPrmIdx = numTunablePrms</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#endif /* MDL_CHECK_PARAMETERS */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span> <span class="tlc_comment">%% ModelParameters</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span> <span class="tlc_comment">%% numTunablePrms > 0</span>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% FcnGenRTWSFcnCheckParamsFcn</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnGenRTWSFcnParamChecks<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generate<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>check<span style="padding-left:9.5px"></span>attributes<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>tunable<span style="padding-left:9.5px"></span>parameters
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>RTW-generated<span style="padding-left:9.5px"></span>(or<span style="padding-left:9.5px"></span>ERT)<span style="padding-left:9.5px"></span>S-Functions.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGenRTWSFcnParamChecks" class="tlc_func">FcnGenRTWSFcnParamChecks</a>(mdlPrm, sfcnPrmIdx) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> pName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(mdlPrm)
 <br>&nbsp;&nbsp;/* Parameter check for '%<<span>pName</span>>' */
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Check complexity (should never be complex for generated S-Function)</span>
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordIsComplex">SLibGetRecordIsComplex</a>(mdlPrm)
 <br>&nbsp;&nbsp;if (mxIsComplex(ssGetSFcnParam(%<::tSimStruct>, %<<span>sfcnPrmIdx</span>>))) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<::tSimStruct>,"Parameter '%<<span>pName</span>>' has to be a non complex array.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Check data type (must be built-in data type for generated S-Function)</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dataTypeIdx = mdlPrm.OriginalDataTypeIdx
 <br>&nbsp;&nbsp;<span class="tlc_assert">%assert</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mxClassOfVar = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLDataTypeFromId">SLibGetMLDataTypeFromId</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mxFcnName    = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetMLidentFcnFromId">SLibGetMLidentFcnFromId</a>(dataTypeIdx)
 <br>&nbsp;&nbsp;if (!%<<span>mxFcnName</span>>(ssGetSFcnParam(%<::tSimStruct>, %<<span>sfcnPrmIdx</span>>))) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<::tSimStruct>,"Parameter '%<<span>pName</span>>' has to be a %<<span>mxClassOfVar</span>> array.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Check dimensions</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnGetMatlabSafeDimensions">FcnGetMatlabSafeDimensions</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numOfDims = <span class="tlc_bifunc">SIZE</span>(dims,1)
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;<span class="tlc_comment">%% Construct dimensions string (for error message)</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = "[%<dims[0]>"
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = (numOfDims-1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "x%<dims[dimsIdx+1]>"
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dimsStr = dimsStr + "]"
 <br>&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;if ((mxGetNumberOfDimensions(ssGetSFcnParam(%<::tSimStruct>, %<<span>sfcnPrmIdx</span>>)) != %<<span>numOfDims</span>>)/
 <br>&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = numOfDims
 <br>&nbsp;&nbsp;&nbsp;&nbsp;||
 <br>&nbsp;&nbsp;&nbsp;&nbsp;(mxGetDimensions(ssGetSFcnParam(%<::tSimStruct>, %<<span>sfcnPrmIdx</span>>))[%<<span>dimsIdx</span>>] != %<dims[dimsIdx]>)/
 <br>&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;)
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<::tSimStruct>,"Parameter '%<<span>pName</span>>' has to be a %<<span>dimsStr</span>> array.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp; <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% FcnGenRTWSFcnParamChecks</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnParamMatchesVariableInGlobalScope<span style="padding-left:9.5px"></span>==============================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>there<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>workspace<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>dictionary
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>parameter.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>NOTE:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>InlineParameters<span style="padding-left:9.5px"></span>OFF,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>expression<span style="padding-left:9.5px"></span>could<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>resolved<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>variables
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>any<span style="padding-left:9.5px"></span>workspace,<span style="padding-left:9.5px"></span>so<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>don't<span style="padding-left:9.5px"></span>try<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>guess<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>use.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>-<span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>InlineParameters<span style="padding-left:9.5px"></span>ON,<span style="padding-left:9.5px"></span>we<span style="padding-left:9.5px"></span>expect<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>find<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>base<span style="padding-left:9.5px"></span>workspace
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>each<span style="padding-left:9.5px"></span>tunable<span style="padding-left:9.5px"></span>parameter.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>However,<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>might<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>case<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>contains<span style="padding-left:9.5px"></span>non-inlined<span style="padding-left:9.5px"></span>S-Functions.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnParamMatchesVariableInGlobalScope" class="tlc_func">FcnParamMatchesVariableInGlobalScope</a>(varName, param) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ((InlineParameters >= 1) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(( <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnIsParamAlias">FcnIsParamAlias</a>(param) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">FEVAL</span>("existsInGlobalScope", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>(), param.WorkspaceVarName)) || ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(!<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnIsParamAlias">FcnIsParamAlias</a>(param) &amp;&amp; ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_bifunc">FEVAL</span>("existsInGlobalScope", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>(), varName))))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnIsParamAlias<span style="padding-left:9.5px"></span>====================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Check<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>Alias<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>set
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnIsParamAlias" class="tlc_func">FcnIsParamAlias</a>(param) <span class="tlc_fkw">void</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<span class="tlc_bifunc">EXISTS</span>(param.Object.ObjectProperties.CoderInfo.Object.ObjectProperties.Alias))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_TRUE
 <br>&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> TLC_FALSE
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnGetMatlabSafeDimensions
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>dimensions<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>parameter
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>1-D<span style="padding-left:9.5px"></span>parameters,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>[1xN]
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnGetMatlabSafeDimensions" class="tlc_func">FcnGetMatlabSafeDimensions</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordDimensions">LibGetRecordDimensions</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (<span class="tlc_bifunc">SIZE</span>(dims) == [1,1])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = [1, %<dims[0]>]
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> dims
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>FcnReshapeValueStr<span style="padding-left:9.5px"></span>================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Reshape<span style="padding-left:9.5px"></span>value<span style="padding-left:9.5px"></span>string<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>necessary.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="FcnReshapeValueStr" class="tlc_func">FcnReshapeValueStr</a>(valueStr, mdlPrm) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_comment">%% Reshape value string if necessary</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dims = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#FcnGetMatlabSafeDimensions">FcnGetMatlabSafeDimensions</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> prmSize = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/paramlib.html#SLibGetSizeOfValueFromParamRec">SLibGetSizeOfValueFromParamRec</a>(mdlPrm)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> (prmSize != dims)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "reshape(%<<span>valueStr</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> dimsIdx = <span class="tlc_bifunc">SIZE</span>(dims)[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "%<<span>valueStr</span>>, %<dims[dimsIdx]>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> valueStr = "%<<span>valueStr</span>>)"
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;<span class="tlc_return">%return</span> valueStr
 <br><span class="tlc_fkw">%endfunction</span>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibRegisterDataStores<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data-store<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibRegisterDataStores" class="tlc_func">SLibRegisterDataStores</a>(simStructArg) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean_T success;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.DWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetNumDataStores(%<<span>simStructArg</span>>, %<<span>NumSFcnWrapperDWorks</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumSFcnWrapperDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> DWork[SFcnWrapperDWIndices[idx]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_switch">%switch</span> SFcnWrapperMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "read"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rwMode = "SS_READER_ONLY"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "write"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We always register DSMs in readwrite mode to allow </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% for element-wise access in Simulink</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "readwrite"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rwMode = "SS_READER_AND_WRITER"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "none"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_continue">%continue</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assert">%assert</span> "Unknown SFcnWrapperMode /"%<<span>SFcnWrapperMode</span>>/""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> GlobalDSM
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "ssRegisterGlobalDataStoreFromName"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> fcnName = "ssRegisterDataStoreFromName"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsmName = SFcnWrapperDSMName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>fcnName</span>>(%<<span>simStructArg</span>>, %<<span>idx</span>>, "%<<span>dsmName</span>>",%<<span>rwMode</span>>, %<GET_TYPE_ID_REPLACEMENT("false")>, &amp;success);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!success) return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenDataStoreChecks<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data-store<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>checking<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenDataStoreChecks" class="tlc_func">SLibGenDataStoreChecks</a>(simStructArg) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const SFcnDataStoreInfo *info;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int dIdx;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int compWidth;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_with">%with</span> ::CompiledModel.DWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = NumSFcnWrapperDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dw     = DWork[SFcnWrapperDWIndices[idx]]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dsName = dw.SFcnWrapperDSMName
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dtId   = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeIdAliasedThruToFromId">LibGetDataTypeIdAliasedThruToFromId</a>(<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeId">SLibGetRecordDataTypeId</a>(dw))
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssGetDataStoreInfo(%<<span>simStructArg</span>>,%<<span>idx</span>>,&amp;info);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibIsBuiltInDataType">LibIsBuiltInDataType</a>(dtId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (ssGetDataTypeIdAliasedThruTo(%<<span>simStructArg</span>>,info->dataTypeId) != %<<span>dtId</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<<span>simStructArg</span>>, 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Data-Store Memory '%<<span>dsName</span>>' is registered with a "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"'%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetDataTypeNameFromId">LibGetDataTypeNameFromId</a>(dtId)>' data type.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compWidth = 1;         
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (dIdx=0; dIdx<info->numDims; dIdx++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;compWidth *= info->dims[dIdx];
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (compWidth != %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dw)>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<<span>simStructArg</span>>,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Data-Store Memory '%<<span>dsName</span>>' is registered as a "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"'%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dw)>' wide signal.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isComplex = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordIsComplex">SLibGetRecordIsComplex</a>(dw)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (info->complex != %<<span>isComplex</span>>) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> none = isComplex ? "" : "none "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssSetErrorStatus(%<<span>simStructArg</span>>, 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Data-Store Memory '%<<span>dsName</span>>' is registered as a "
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"%<<span>none</span>>complex signal.");
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endwith">%endwith</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;} 
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>AccessDSMWithStorageClass<span style="padding-left:9.5px"></span>========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>conditioning<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>DSM's<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>custom<span style="padding-left:9.5px"></span>storage
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>classes<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>aren't<span style="padding-left:9.5px"></span>addressable.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="AccessDSMWithStorageClass" class="tlc_func">AccessDSMWithStorageClass</a>(simStructArg, dwRec, dsmIdx, dsmRW, cscOP) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordIsComplex">SLibGetRecordIsComplex</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> errMsg = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Data-Store Memory blocks with a non-addressable custom storage " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"class and complex variable type is currently not supported by the " + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ERT S-Function."
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibReportError">LibReportError</a>(errMsg)>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span>  dtName = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#SLibGetRecordDataTypeName">SLibGetRecordDataTypeName</a>(dwRec, "")
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwWidth = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#SLibDWorkWidth">SLibDWorkWidth</a>(dwRec)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optWith = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibOptionalVectorWidth">LibOptionalVectorWidth</a>(dwWidth)
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> optZero = dwWidth > 1 ? "[0]" : ""
 <br>&nbsp;&nbsp;<span class="tlc_assign">%assign</span> varName = "_localDS%<<span>dsmRW</span>>Var"
 <br>&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<span>dtName</span>> %<<span>varName</span>>%<<span>optWith</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> cscOP == "set"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss%<<span>dsmRW</span>>DataStore(%<<span>simStructArg</span>>, %<<span>dsmIdx</span>>, &amp;_localDS%<<span>dsmRW</span>>Var%<<span>optZero</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> dwWidth > 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int i;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (i = 0; i < %<<span>dwWidth</span>>; i++) {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> cscOP == "set"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibAssignCustomData">SLibAssignCustomData</a>(dwRec, "[i]", "",  "%<<span>varName</span>>[i]")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>varName</span>>[i] = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibAccessCustomData">LibAccessCustomData</a>(dwRec, cscOP, "[i]", "", "")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> cscOP == "set"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibAssignCustomData">SLibAssignCustomData</a>(dwRec, "", "", varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>varName</span>> = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibAccessCustomData">LibAccessCustomData</a>(dwRec, cscOP, "", "", "")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span>  cscOP != "set"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ss%<<span>dsmRW</span>>DataStore(%<<span>simStructArg</span>>, %<<span>dsmIdx</span>>, &amp;_localDS%<<span>dsmRW</span>>Var%<<span>optZero</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;}
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenDataStoreReads<span style="padding-left:9.5px"></span>============================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data-store<span style="padding-left:9.5px"></span>read<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenDataStoreReads" class="tlc_func">SLibGenDataStoreReads</a>(simStructArg) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = ::CompiledModel.DWorks.NumSFcnWrapperDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx = ::CompiledModel.DWorks.SFcnWrapperDWIndices[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We always "read" even if dwRec.SFcnWrapperMode is "write" </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% to handle element-wise access in Simulink</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibHasCustomStorage">LibHasCustomStorage</a>(dwRec) &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomDataIsAddressable">LibCustomDataIsAddressable</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#AccessDSMWithStorageClass">AccessDSMWithStorageClass</a>(simStructArg, dwRec, idx, "ReadFrom", "set")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigAddr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#SLibGetGlobalDWorkAddr">SLibGetGlobalDWorkAddr</a>(dwIdx, TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssReadFromDataStore(%<<span>simStructArg</span>>, %<<span>idx</span>>, %<<span>sigAddr</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibGenDataStoreWrites<span style="padding-left:9.5px"></span>===========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Generates<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>data-store<span style="padding-left:9.5px"></span>write<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibGenDataStoreWrites" class="tlc_func">SLibGenDataStoreWrites</a>(simStructArg) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::CompiledModel.DWorks.NumSFcnWrapperDWorks > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = ::CompiledModel.DWorks.NumSFcnWrapperDWorks
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwIdx =  ::CompiledModel.DWorks.SFcnWrapperDWIndices[idx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> dwRec = ::CompiledModel.DWorks.DWork[dwIdx]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_switch">%switch</span> dwRec.SFcnWrapperMode
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "write"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "readwrite"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibHasCustomStorage">LibHasCustomStorage</a>(dwRec) &amp;&amp; !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomDataIsAddressable">LibCustomDataIsAddressable</a>(dwRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#AccessDSMWithStorageClass">AccessDSMWithStorageClass</a>(simStructArg, dwRec, idx, "WriteTo", "contents")>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigAddr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blocklib.html#SLibGetGlobalDWorkAddr">SLibGetGlobalDWorkAddr</a>(dwIdx, TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ssWriteToDataStore(%<<span>simStructArg</span>>, %<<span>idx</span>>, %<<span>sigAddr</span>>);
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "read"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "none"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_error">%error</span> "Unknown SFcnWrapperMode /"%<<span>dwRec.SFcnWrapperMode</span>>/""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSetSfcnExternProtos<span style="padding-left:9.5px"></span>==========================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Dump<span style="padding-left:9.5px"></span>extern<span style="padding-left:9.5px"></span>function<span style="padding-left:9.5px"></span>prototype<span style="padding-left:9.5px"></span>declarations
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSetSfcnExternProtos" class="tlc_func">SLibSetSfcnExternProtos</a>(mdlName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> tmpBuf
 <br>&nbsp;&nbsp;#if defined(RT_MALLOC) || defined(MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibExternInFcnDecls">LibExternInFcnDecls</a>()</span>>void *%<<span>mdlName</span>>_malloc(SimStruct *%<::tSimStruct>);
 <br>&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;#ifndef __RTW_UTFREE__  <span class="tlc_comment">%% defined in rtw/c/src/rtw_modelmap.h</span>
 <br>&nbsp;&nbsp;#if defined (MATLAB_MEX_FILE)
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::GenCPP 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#ifdef __cplusplus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;extern "C" {
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibExternInFcnDecls">LibExternInFcnDecls</a>()</span>>void * utMalloc(size_t);
 <br>&nbsp;&nbsp;%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibExternInFcnDecls">LibExternInFcnDecls</a>()</span>>void   utFree(void *);
 <br>&nbsp;&nbsp;<span class="tlc_if">%if</span> ::GenCPP
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#ifdef __cplusplus
 <br>&nbsp;&nbsp;&nbsp;&nbsp;}
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;#endif
 <br>&nbsp;&nbsp;#endif /* #ifndef __RTW_UTFREE__ */
 <br>&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> tmpBuf
 <br>&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/filepackaginglib.html#SLibCacheCodeToFile">SLibCacheCodeToFile</a>("baseMdl_src_extern_fcn_decl", tmpBuf)>
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibSetSfcnExternProtos</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Function:<span style="padding-left:9.5px"></span>SLibSfcnWideInit<span style="padding-left:9.5px"></span>==================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Abstract:
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>sfcnwide.tlc<span style="padding-left:9.5px"></span>remnant.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Performs<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>target<span style="padding-left:9.5px"></span>specific<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>register<span style="padding-left:9.5px"></span>child<span style="padding-left:9.5px"></span>S-Functions,<span style="padding-left:9.5px"></span>SID,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>MID<span style="padding-left:9.5px"></span>registrations.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="SLibSfcnWideInit" class="tlc_func">SLibSfcnWideInit</a>() <span class="tlc_fkw">void</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Temporarily<span style="padding-left:9.5px"></span>switch<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>variables
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_assign">%assign</span> save_UsingMalloc              = UsingMalloc
 <br><span class="tlc_assign">%assign</span> save_tSimStruct               = ::tSimStruct
 <br><span class="tlc_assign">%assign</span> save_tChildSimStruct          = ::tChildSimStruct
 <br><span class="tlc_assign">%assign</span> save_tConstBlockIOStruct      = ::tConstBlockIOStruct
 <br>&nbsp; <br><span class="tlc_assign">%assign</span> ::tSimStruct          = ::tChildSimStruct
 <br><span class="tlc_assign">%assign</span> ::tConstBlockIOStruct = "%<::tConstBlockIODefine>(%<::tChildSimStruct>)"
 <br><span class="tlc_assign">%assign</span> ::tChildSimStruct     = "childS"
 <br>&nbsp; <br><span class="tlc_assign">%assign</span> ::CompiledModel.UsingMalloc         = 0
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>==========================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Cache<span style="padding-left:9.5px"></span>static<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model_sid.h
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#LibCacheChildSFunctionRegistration">LibCacheChildSFunctionRegistration</a>(::tChildSimStruct, <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>())>
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#LibCacheBlockInstanceData">LibCacheBlockInstanceData</a>()</span>>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SID<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>registration
</span> <br><span class="tlc_openfile">%openfile</span> SIDSFunctionRegistration
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#LibDumpSFunctionRegistration">LibDumpSFunctionRegistration</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> SIDSFunctionRegistration
 <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("SIDSFunctionRegistration", SIDSFunctionRegistration)>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SID<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance<span style="padding-left:9.5px"></span>data
</span> <br><span class="tlc_openfile">%openfile</span> SIDBlockInstanceData
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#LibDumpBlockInstanceData">LibDumpBlockInstanceData</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> SIDBlockInstanceData
 <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("SIDBlockInstanceData", SIDBlockInstanceData)>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Setup<span style="padding-left:9.5px"></span>counter<span style="padding-left:9.5px"></span>used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>track<span style="padding-left:9.5px"></span>tunable<span style="padding-left:9.5px"></span>parameters<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>generated<span style="padding-left:9.5px"></span>S-Function
</span> <br><span class="tlc_assign">%assign</span> SfcnParamIdx = 0
 <br><span class="tlc_assign">%assign</span> ::CompiledModel.ModelParameters = ModelParameters + SfcnParamIdx
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>============================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Cache<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>definitions<span style="padding-left:9.5px"></span>prior<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>registration.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Note<span style="padding-left:9.5px"></span>that
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>instance<span style="padding-left:9.5px"></span>should<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>cached<span style="padding-left:9.5px"></span>prior<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>definition<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>properly
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>handle<span style="padding-left:9.5px"></span>non-finites<span style="padding-left:9.5px"></span>values.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>For<span style="padding-left:9.5px"></span>example,<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>inlining<span style="padding-left:9.5px"></span>parameters<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>individual<span style="padding-left:9.5px"></span>parameters<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>declared<span style="padding-left:9.5px"></span>"const"<span style="padding-left:9.5px"></span>unless<span style="padding-left:9.5px"></span>they<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>non-finite.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Whether<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>non-finite<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>determined<span style="padding-left:9.5px"></span>while<span style="padding-left:9.5px"></span>caching<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>parameter<span style="padding-left:9.5px"></span>structure<span style="padding-left:9.5px"></span>instance.
</span> <br><span class="tlc_comment">%%
</span> <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/data_cachebuffers.html#SLibCacheDataBuffers">SLibCacheDataBuffers</a>()</span>>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SID<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>SimStuct<span style="padding-left:9.5px"></span>declaration
</span> <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("SIDLocalSDeclarations", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibLocalSDeclaration">SLibLocalSDeclaration</a>(1))> 
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>SID<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>SimStruct<span style="padding-left:9.5px"></span>registration
</span> <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("SIDLocalSRegistration", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibLocalSRegistration">SLibLocalSRegistration</a>(1))>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>==========================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Cache<span style="padding-left:9.5px"></span>malloc<span style="padding-left:9.5px"></span>registration<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>model_mid.h
</span> <br><span class="tlc_comment">%%
</span> <br>&nbsp; <br><span class="tlc_assign">%assign</span> ::CompiledModel.UsingMalloc = 1
 <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#LibCacheChildSFunctionRegistration">LibCacheChildSFunctionRegistration</a>(::tChildSimStruct, <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>())>
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#LibCacheBlockInstanceData">LibCacheBlockInstanceData</a>()</span>>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MID<span style="padding-left:9.5px"></span>S-Function<span style="padding-left:9.5px"></span>registration
</span> <br><span class="tlc_openfile">%openfile</span> MIDSFunctionRegistration
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonreglib.html#LibDumpSFunctionRegistration">LibDumpSFunctionRegistration</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> MIDSFunctionRegistration
 <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("MIDSFunctionRegistration", MIDSFunctionRegistration)>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MID<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance<span style="padding-left:9.5px"></span>data
</span> <br><span class="tlc_openfile">%openfile</span> MIDBlockInstanceData
 <br>%<<span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/syslib.html#LibDumpBlockInstanceData">LibDumpBlockInstanceData</a>()</span>>/
 <br><span class="tlc_closefile">%closefile</span> MIDBlockInstanceData
 <br>&nbsp; <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("MIDBlockInstanceData", MIDBlockInstanceData)>  
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MID<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>SimStuct<span style="padding-left:9.5px"></span>declaration
</span> <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("MIDLocalSDeclarations", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibLocalSDeclaration">SLibLocalSDeclaration</a>(0))> 
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>MID<span style="padding-left:9.5px"></span>local<span style="padding-left:9.5px"></span>SimStruct<span style="padding-left:9.5px"></span>registration
</span> <br>%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibAddToCompiledModel">LibAddToCompiledModel</a>("MIDLocalSRegistration", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html#SLibLocalSRegistration">SLibLocalSRegistration</a>(0))>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>==========================================================================
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Restore<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>variables
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_assign">%assign</span> ::CompiledModel.UsingMalloc         = save_UsingMalloc
 <br><span class="tlc_assign">%assign</span> ::tSimStruct          = save_tSimStruct
 <br><span class="tlc_assign">%assign</span> ::tChildSimStruct     = save_tChildSimStruct
 <br><span class="tlc_assign">%assign</span> ::tConstBlockIOStruct = save_tConstBlockIOStruct
 <br><span class="tlc_fkw">%endfunction</span> <span class="tlc_comment">%% SLibSfcnWideInit</span>
 <br>&nbsp; <br><span class="tlc_endif">%endif</span> <span class="tlc_comment">%% _SFCNLIB_</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>[EOF]<span style="padding-left:9.5px"></span><a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/sfcnlib.html">sfcnlib.tlc</a>
</span> <br>&nbsp; <br>/%  LocalWords:  sfcnutil sfcntunable Deriv zc rtwsfcn expandparameter dsm SLib
 <br>&nbsp;%  LocalWords:  sfunction readwrite dw RW decl SDeclarations SRegistration
 <br>&nbsp;%  LocalWords:  MIDS singletasking
 <br>&nbsp;%/
 <br></body></html>