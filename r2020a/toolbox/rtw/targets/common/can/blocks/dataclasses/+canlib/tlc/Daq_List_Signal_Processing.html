<html>
<head>

<style>
p {color : black; font-family:courier; font-size: 80%;}
body {line-height: 100%; font-family:courier;}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_function {color: green;}.tlc_endfunction {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}
.tlc_bifunc {color: brown;}
</style>

</head>
<body>
%% 
 <br>%% 
 <br>%% 
 <br>%%
 <br>%%
 <br>%%   Copyright 2002-2013 The MathWorks, Inc.
 <br>&nbsp; <br>%% Target language is C
 <br><span class="tlc_implements">%implements</span> * "C"
 <br>&nbsp; <br>%% Function: DataAccess =========================================================
 <br>%% Abstract:
 <br>%%   DataAccess provides an API for requesting code fragments or other
 <br>%%   information corresponding to data of a custom storage class.
 <br>%%
 <br>%% Function arguments:
 <br>%%   record
 <br>%%     The record corresponding to the specific data instance of a class.
 <br>%%
 <br>%%   request
 <br>%%     The nature of the code or information requested.  DataAccess must honor
 <br>%%     the following requests: "address", "contents", "declare", "define",
 <br>%%     "initialize", and "layout".
 <br>%%
 <br>%%   idx
 <br>%%     The desired index.  This is "" for scalars and "[some_index]" otherwise.
 <br>%%     Note that idx is [] for non-indexing requests "declare" and "define".
 <br>%%
 <br>%%   reim
 <br>%%     A string corresponding to the selection of the real or imaginary
 <br>%%     component of complex data.  For non-complex data, reim is "".  For
 <br>%%     complex data, reim is ".%&lt;tRealPart&gt;" (.re by default) for the real
 <br>%%     component, ".%&lt;tImagPart&gt;" (.im by default) for the imaginary component,
 <br>%%     and "" for the base of both components.  Together with idx, reim is
 <br>%%     used to select a scalar element of a complex, nonscalar array.
 <br>&nbsp; <br><span class="tlc_function">%function</span> <a id="DataAccess" class="tlc_func">DataAccess</a>(record, request, idx, reim) void
 <br>&nbsp; <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%% Functions to determine data attributes
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;%%   Returns the name (aka, identifier) of the data
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/globalmaplib.html#LibGetDataWidth">LibGetDataWidth</a>(record)
 <br>&nbsp;&nbsp;%%   Returns the width of the data
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonprmlib.html#LibParameterInstanceInitStr">LibParameterInstanceInitStr</a>(record)
 <br>&nbsp;&nbsp;%%   Returns the initializer string for a parameter record.  For example, the
 <br>&nbsp;&nbsp;%%   string "{0.0, 2.5}" is returned for the MATLAB vector [0; 2.5].
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordCompositeDataTypeName">LibGetRecordCompositeDataTypeName</a>(record)
 <br>&nbsp;&nbsp;%%   Returns the record's C data type.  For example, "real_T" and "creal_T"
 <br>&nbsp;&nbsp;%%   is returned for non-complex and complex real data, respectively.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetGroundValue">LibGetGroundValue</a>(record, reim)
 <br>&nbsp;&nbsp;%%   Returns ground for the record, whereby the representation depends on
 <br>&nbsp;&nbsp;%%   record's datatype.  Typically "false", "0", or "0.0" is returned.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/globalmaplib.html#LibGetDataLayout">LibGetDataLayout</a>(record)
 <br>&nbsp;&nbsp;%%   Returns a vector of information describing the method in which Simulink
 <br>&nbsp;&nbsp;%%   maps the data to memory.  See "layout" below for more details.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetCustomStorageAttributes">LibGetCustomStorageAttributes</a>(record)
 <br>&nbsp;&nbsp;%%   Returns the custom storage class attributes associated with a Simulink
 <br>&nbsp;&nbsp;%%   data object.  That is, a reference to data.CoderInfo.CustomAttributes 
 <br>&nbsp;&nbsp;%%   is returned.
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageRecordIsModelParameter">LibCustomStorageRecordIsModelParameter</a>(record)
 <br>&nbsp;&nbsp;%%   Returns true if a record is a model parameter
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageRecordIsBlockState">LibCustomStorageRecordIsBlockState</a>(record)
 <br>&nbsp;&nbsp;%%   Returns true if a record is a block state
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageRecordIsBlockOutput">LibCustomStorageRecordIsBlockOutput</a>(record)
 <br>&nbsp;&nbsp;%%   Returns true if a record is a block output
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageRecordIsExternalInput">LibCustomStorageRecordIsExternalInput</a>(record)
 <br>&nbsp;&nbsp;%%   Rreturns true if a record is an external input
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageRecordIsExternalOutput">LibCustomStorageRecordIsExternalOutput</a>(record)
 <br>&nbsp;&nbsp;%%   Returns true if a record is an external output
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%% Functions to insert user-defined code
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#LibCacheIncludes">LibCacheIncludes</a>(text)
 <br>&nbsp;&nbsp;%%   Place text at the top of <model>_common.h in the include section.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/hookslib.html#LibPrmFileCustomCode">LibPrmFileCustomCode</a>(text, "header|trailer")
 <br>&nbsp;&nbsp;%%   Place text at the top|bottom of <model>_prm.h prior|after model data
 <br>&nbsp;&nbsp;%%   declarations.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/hookslib.html#LibHeaderFileCustomCode">LibHeaderFileCustomCode</a>(text, "header|trailer")
 <br>&nbsp;&nbsp;%%   Place text at the top|bottom of <model>_common.h prior|after model
 <br>&nbsp;&nbsp;%%   data definitions.
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%% Functions to detect and report errors
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageVerifyRecordIsScalar">LibCustomStorageVerifyRecordIsScalar</a>(record)
 <br>&nbsp;&nbsp;%%   Error if the data is non-scalar.
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageVerifyRecordIsModelParameter">LibCustomStorageVerifyRecordIsModelParameter</a>(record)
 <br>&nbsp;&nbsp;%%   Error if the data is not a block parameter (as opposed to a signal,
 <br>&nbsp;&nbsp;%%   for example).
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageVerifyRecordIsNonComplex">LibCustomStorageVerifyRecordIsNonComplex</a>(record)
 <br>&nbsp;&nbsp;%%   Error if the data is complex (i.e., has an imaginary component).
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%% Utility functions
 <br>&nbsp;&nbsp;%% ============================================================================
 <br>&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomData">LibCustomData</a>(record, request, idx, reim)
 <br>&nbsp;&nbsp;%%   Executes the <a href="https://foool.github.io/MATLAB/R2020a/toolbox/rtw/targets/AUTOSAR/AUTOSAR/dataclasses/+AUTOSAR/tlc/CalPrm.html#DataAccess">DataAccess</a>() method for the specified record.  This is
 <br>&nbsp;&nbsp;%%   useful when a class ueses or mirrors another class.
 <br>&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;%% <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibConvertNameToIdentifier">LibConvertNameToIdentifier</a>(name)
 <br>&nbsp;&nbsp;%%   Converts a (file) name to a valid C identifier.  Typically used when
 <br>&nbsp;&nbsp;%%   guarding against multiple header file inclusions.
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_switch">%switch</span> request
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "declare" request is used to declare data to have external linkage
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% in the <model>_export.h file.  If the data does not need external linkage
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% (i.e. if you do not want a declaration to appear in the <model>_export.h
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% file), the request should return "".
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Note that if this request returns a statement, that statement must
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% include the terminating semicolon.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign id = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign dt = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordCompositeDataTypeName">LibGetRecordCompositeDataTypeName</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return "%&lt;dt&gt; %&lt;id&gt;%&lt;idx&gt;;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "declare"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageDeclare is the default declare function to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% declares a global variable whose identifier is the name of the data.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "extern %&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageDeclare">LibDefaultCustomStorageDeclare</a>(record)&gt;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "define" request is used to define (allocate) data.  Code fragments
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% generated by this request are inserted into the  <model>_prm.h file.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Parameters should statically set their initial value set to a nominal
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% value.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% If this request returns a statement, that statement must include
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% the terminating semicolon.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign id = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign dt = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetRecordCompositeDataTypeName">LibGetRecordCompositeDataTypeName</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %if LibCustomStorageRecordIsParameter(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %assign initStr = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/commonprmlib.html#LibParameterInstanceInitStr">LibParameterInstanceInitStr</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %return "%&lt;dt&gt; %&lt;id&gt;%&lt;idx&gt; = %&lt;<span class="tlc_bifunc">STRING</span>(initStr)&gt;;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %else
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %return "%&lt;dt&gt; %&lt;id&gt;%&lt;idx&gt;;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %endif
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "define"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageDefine is the default define function to define
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% a global variable whose identifier is the name of the data.  If the
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% data is a parameter, the definition is also statically initialized to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% its nominal value (as set in MATLAB).
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> "%&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageDefine">LibDefaultCustomStorageDefine</a>(record)&gt;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "contents" request is used to generate code corresponding to the
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% usage of data on the left-hand or right-hand side of an assignment.  The
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% argument idx is set to an array indexer if the data is nonscalar, and ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% otherwise.  The argument reim is set to "%.<tRealPart>" (.re by default)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% or "%.<tImagPart>" (.im by default) if the data is complex.  If you are
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% using the same data structure as The Mathworks, Inc. to represent complex
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% data (in struct fields ".re" and ".im") you can use the flag reim
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% as-is for the complex subindex.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% This request must return a reference to data as an expression, not a
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% statement, so it should not include a terminating semicolon.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign id = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return "%&lt;id&gt;%&lt;idx&gt;%&lt;reim&gt;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "contents"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageContents is the default contents function to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% return a scalar element of a global variable whose identifier is the
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% name of the data.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageContents">LibDefaultCustomStorageContents</a>(record, idx, reim)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The usage of the "address" request is identical to the "contents" request,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% except the function is to return the address of the data instead of
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% its contents.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign id = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return "&%&lt;id&gt;%&lt;idx&gt;%&lt;reim&gt;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "address"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageAddress is the default address function to
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% return the address of a scalar element of a global variable whose
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% identifier is the name of the data.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageAddress">LibDefaultCustomStorageAddress</a>(record, idx, reim)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "initialize" request is executed when generating code for the model
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% registration function, and is a hook to initialize internal and external
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% data to zero.  Internal data refers to block outputs (signals) and block
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% states.  External data refers to root-level inports and outports.  Note
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% that this request is not executed when the option "Initialize internal
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% data" or "Initialize external I/O data" is not selected for internal and
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% external data, repectively.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% If this request returns a statement, that statement must include
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% the terminating semicolon.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign id = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign gndValue = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/dtypelib.html#LibGetGroundValue">LibGetGroundValue</a>(record, tRealPart)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return "%&lt;id&gt;%&lt;idx&gt;%&lt;reim&gt; = %&lt;gndValue&gt;;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "initialize"
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageInitialize is the default initialization
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% function that initializes a scalar element of a global variable to 0. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageInitialize">LibDefaultCustomStorageInitialize</a>(record, idx, reim)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "layout" request is used to define the method in which data is mapped
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% to memory.  Return a vector with one of the following formats:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ["data-class", NumDimensions, [dim1, dim2, ..., dimM], "zero_index"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ["other"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% For example, a 4D, 2D, vector, and scalar data, respectively
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   3x3x2x5 matrix: ["col-mat-nd", 4, [3, 3, 2, 5], "[0]"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%       3x4 matrix: ["col-mat",    2, [3, 4],       "[0]"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     3(x1) vector: ["vector",     2, [3, 1],       "[0]"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     (1x1) scalar: ["scalar",     2, [1, 1],       ""   ]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The information returned by this request is used, among other
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% things, for generating interfaces to data.  For example, the C-API for
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% signals and parameters utilizes this information.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "layout"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageLayout is the default layout function, and may
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% be used when the data is laid out in memory like built-in Simulink
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% data.  If the data is not laid out in memory like Simulink data,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% return the vector ["other"].
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageLayout">LibDefaultCustomStorageLayout</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Handle unrecognized requests
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% You should invoke LibDefaultCustomStorageUnknownClassAccessType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% for unrecognized requests.  It gracefully errors for unhandled
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% critical cases, and supplies safe defaults for unhandled
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% noncritical requests.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> LibDefaultCustomStorageUnknownDataAccessType ...
 <br>&nbsp;(record, request, idx, reim)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp; <br><span class="tlc_endfunction">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>%% Function: ClassAccess ========================================================
 <br>%% Abstract:
 <br>%%   ClassAccess provides an API for requesting information or actions
 <br>%%   corresponding to a custom storage class.
 <br>%%
 <br>%% Function argurments:
 <br>%%   record
 <br>%%     An entry in the global memory map corresponding to a custom storage
 <br>%%     class.  It contains subrecords corresponding to the data of the
 <br>%%     particular class.  The library function 
 <br>%%     <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageClassRecordNumData">LibCustomStorageClassRecordNumData</a>() returns the number of data subrecords 
 <br>%%     in the class record.  The library function <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetDataRecord">LibGetDataRecord</a>() 
 <br>%%     returns a subrecord corresponding to the i'th data element in the 
 <br>%%     class record.  The TLC library functions may then operate on the 
 <br>%%     data subrecord.
 <br>%%
 <br>%%   request
 <br>%%     the nature of the code or information requested.  ClassAccess must honor
 <br>%%     the following types of requests:  "setup" and "comment"
 <br>%%
 <br><span class="tlc_function">%function</span> <a id="ClassAccess" class="tlc_func">ClassAccess</a>(record, request) void
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_switch">%switch</span> request
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "setup" request performs class-wide operations prior to code
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% generation.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The following example checks that each data subrecord is a Simulink
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% parameter:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %assign numData = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageClassRecordNumData">LibCustomStorageClassRecordNumData</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %foreach idx = numData
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %assign data = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetDataRecord">LibGetDataRecord</a>(record, idx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %% error if data is not a Simulink parameter
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%     %&lt;LibCustomStorageVerifyRecordIsParameter(data)&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %endforeach
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "setup"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% Classes defining global variables do not need a setup action
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#IsModelReferenceTarget">IsModelReferenceTarget</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>This model contains references to other Model blocks (referenced models). 
 <br>It is currently not possible to generate ASAP2 and CCP interface 
 <br>descriptions for models which contain references to other Model blocks.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;    
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%&lt;<a href="https://foool.github.io/MATLAB/R2020a/toolbox/rtw/targets/common/can/blocks/dataclasses/+canlib/tlc/Daq_List_Signal_Processing.html#TidProcessing">TidProcessing</a>(record)&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The "comment" request returns text that is inserted into the
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% <model>_export.h and <model>_prm.h files prior to any declaration or
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% definition of data of this class.  Comment delimeters should be part of
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% the string.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% The string returned should not include a terminating newline (although it
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% may include intermediate newlines).  A terminating newline will be
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% created automatically by the code generation process.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Sample code:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return "/* Data with custom storage class CAL/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%           " * is used to define calibration data/n" + ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%           " */"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   or,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %openfile textBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   /* Data with custom storage class CAL
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%    * is used to define calibration data
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%    */
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %closefile textBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%   %return textBuf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_case">%case</span> "comment"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% LibDefaultCustomStorageComment is the default comment function,
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% and returns a string identifying the custom storage class.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageComment">LibDefaultCustomStorageComment</a>(record)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;%% ==========================================================================
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%% Handle unrecognized requests
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%%
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_default">%default</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% You should invoke LibDefaultCustomStorageUnknownClassAccessType
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% for unrecognized requests.  It gracefully errors for unhandled
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% critical cases, and supplies safe defaults for unhandled
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% noncritical requests.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibDefaultCustomStorageUnknownClassAccessType">LibDefaultCustomStorageUnknownClassAccessType</a>(record, request)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%%break
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;<span class="tlc_endswitch">%endswitch</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br><span class="tlc_endfunction">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_function">%function</span> <a id="GetSourceSystem" class="tlc_func">GetSourceSystem</a>()
 <br>&nbsp;&nbsp;&nbsp;%% must work out if we are doing a right click subsystem build or a ctrl-B (normal) build
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> normal_build = <span class="tlc_bifunc">FEVAL</span>("canlib_asap2_daq_utils","normalbuild")
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> normal_build == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% use CompiledModel.Name
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sourceSystem = CompiledModel.Name
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% get the handle to the original block
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sourceSystem = <span class="tlc_bifunc">FEVAL</span>("canlib_asap2_daq_utils","originalhandle")
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> sourceSystem
 <br><span class="tlc_endfunction">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_function">%function</span> <a id="TidProcessing" class="tlc_func">TidProcessing</a>(record) void
 <br>&nbsp;&nbsp;&nbsp;%% numData = number of CCPSignals in the model 
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numData = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibCustomStorageClassRecordNumData">LibCustomStorageClassRecordNumData</a>(record)
 <br>&nbsp;&nbsp;&nbsp;%% totalNumTIDs == total number of different tid's in model
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> totalNumTIDs = <span class="tlc_bifunc">SIZE</span>(CompiledModel.SampleTime,1)
 <br>&nbsp;&nbsp;&nbsp;%% usedNumTIDs == number of different tid's in model we are using
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> usedNumTIDs = 0
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initialisers = "unused"
 <br>&nbsp;&nbsp;&nbsp;%% build a list of initialisers for the UsedTIDList vector
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tididx = totalNumTIDs - 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> initialisers = "%&lt;initialisers&gt;, unused "
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> UsedTIDList = Vector(totalNumTIDs) [%&lt;initialisers&gt;]
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> output_file = "DAQ_LIST_EVENT_MAPPINGS"
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_selectfile">%selectfile</span> output_file
 <br>**************************************************************
 <br>* Mappings from Simulink Signals to DAQ List Event Channels  *
 <br>**************************************************************
 <br>&nbsp; <br>Note: These mappings are derived from the sample rates of the signals within
 <br>the Simulink model.   It is only safe to specify the following event
 <br>channels for these signals, otherwise the correctness of the sampled signals
 <br>cannot be guarenteed.
 <br>&nbsp; <br>In your calibration tool you should setup the set of event channels
 <br>specified below.  To measure a signal using DAQ lists, you should then 
 <br>associate the correct event channel to that signal according to the 
 <br>specification below.
 <br>&nbsp; <br>**************************************************************
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> output_file
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> idx = numData
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> data = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetDataRecord">LibGetDataRecord</a>(record, idx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sourceSystem = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/rtw/targets/common/can/blocks/dataclasses/+canlib/tlc/Daq_List_Signal_Processing.html#GetSourceSystem">GetSourceSystem</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sampleTime = <span class="tlc_bifunc">FEVAL</span>("canlib_asap2_getSampleTime", <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(data), sourceSystem, "0", "0")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% perform some error checking on the sampleTime result
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sampleTime == Inf
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>Attempt to use Signal %&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(data)&gt; with Infinite Sample Time in a DAQ List.
 <br>Adding signals with Infinite sample times (such as constants) to DAQ lists is not supported.
 <br>To monitor this signal you should use ASAP2.Signal's with the Calibration Tool operating in polling mode.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% In the case of signal which is comming from a triggered subsystem we can
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% no longer trace and find the sample time so we must error out. 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sampleTime == -1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>Unable to allocate event channel to DAQ list signal %&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(data)&gt;
 <br>as it was not possible to obtain a finite sample time for this signal. It is not 
 <br>possible to use this signal with DAQ lists. To resolve this error remove the 
 <br>association between the signal %&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(data)&gt; and its canlib.Signal object.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sampleTime == -2
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>MATLAB program "canlib_asap2_getSampleTime" returned -2 as the sample time.
 <br>This is an unknown error.  
 <br>Please check your signals are named correctly in the model.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> output_file = "DAQ_LIST_EVENT_MAPPINGS", "a"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_selectfile">%selectfile</span> output_file
 <br>%&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetRecordIdentifier">LibGetRecordIdentifier</a>(data)&gt;:
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> output_file
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% map the sample time onto a TID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> sampletime_index = totalNumTIDs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> CompiledModel.SampleTime[sampletime_index].PeriodAndOffset[0] == sampleTime
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> new_tid = CompiledModel.SampleTime[sampletime_index].TID
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% output TID value to MATLAB
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> output_file = "DAQ_LIST_EVENT_MAPPINGS", "a"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_selectfile">%selectfile</span> output_file
 <br>Event Channel number = %&lt;new_tid&gt;
 <br>--------------------------------------
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> output_file
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% must check for uniqueness of TID and add to list of TID's if unique
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% note: I make no assumptions about the values of the TIDs which
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% should make the code more robust to change
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% also, this approach only creates as many DAQ lists as necessary
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% we do not need one for each TID if no CCPSignals are attached!
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> found_tid = 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> tididx = <span class="tlc_bifunc">SIZE</span>(UsedTIDList,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">TYPE</span>(UsedTIDList[tididx]) == "Number"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> UsedTIDList[tididx] == new_tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> found_tid = 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_break">%break</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> %% tididx = <span class="tlc_bifunc">SIZE</span>(UsedTIDList,1)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% add to TIDList if new
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> found_tid == 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> UsedTIDList[usedNumTIDs] = new_tid
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> usedNumTIDs = usedNumTIDs + 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> %% sampletime_index = totalNumTIDs
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span> %% idx = numData
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> output_file = "DAQ_LIST_EVENT_MAPPINGS", "a"
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_selectfile">%selectfile</span> output_file
 <br>****************************************************************************
 <br>Total sample rates in the model = %&lt;totalNumTIDs&gt;
 <br>Number of sample rates used for DAQ = %&lt;usedNumTIDs&gt;
 <br>****************************************************************************   
 <br>&nbsp;&nbsp;&nbsp;%%foreach idx = totalNumTIDs
 <br>&nbsp;&nbsp;&nbsp;%%   %&lt;UsedTIDList[idx]&gt;
 <br>&nbsp;&nbsp;&nbsp;%%%endforeach
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> output_file
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;%% overwrite ccp_auto_defs.h if already exists
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> ccp_auto_defs = "ccp_auto_defs.h"
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_selectfile">%selectfile</span> ccp_auto_defs
 <br>&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;%% get the total number of ODTs available for use 
 <br>&nbsp;&nbsp;&nbsp;%% maximum number = 254
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numODTs = <span class="tlc_bifunc">FEVAL</span>("canlib_asap2_daq_utils","totalnumodts", sourceSystem)
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> numODTs > 254
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> ccp_auto_defs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>The maximum number (254) of Object Descriptor Tables (ODT's) was exceeded.
 <br>To fix this error, you should reduce the total number of ODT's that is specified in
 <br>the mask of the CAN Calibration Protocol Block.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;/* 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* Auto generated include file for CCP DAQ List implementation 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;/*
 <br>&nbsp;&nbsp;&nbsp;&nbsp;* Defines
 <br>&nbsp;&nbsp;&nbsp;&nbsp;*/
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> ::CCPDaqListEnabled = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;#define CCP_DAQ_LIST_ENABLED
 <br>&nbsp;&nbsp;&nbsp;#define TOTAL_NUM_TIDS %&lt;totalNumTIDs&gt;
 <br>&nbsp;&nbsp;&nbsp;/* Maximum of 254 ODTS in total 0 <= n <= (253 == 0xFD) */
 <br>&nbsp;&nbsp;&nbsp;/* 1 DAQ list for each TID in the model */
 <br>&nbsp;&nbsp;&nbsp;#define C_NUMBER_OF_DAQ_LISTS %&lt;usedNumTIDs&gt;
 <br>&nbsp;&nbsp;&nbsp;/* ODTs shared equally between DAQ lists */
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> usedNumTIDs > 0
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> num_odts_per_daq = %<<span class="tlc_bifunc">CAST</span>("Number",numODTs / usedNumTIDs)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> ccp_auto_defs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% Ensure that model reference code is regenerated so that any problem with
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% CCP DAQ List data objects can be caught by the check in ClassAccess 
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%% function
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/modelrefutil.html#HasModelReferenceBlocks">HasModelReferenceBlocks</a>()
 <br>&nbsp;The model being built references other models. For CCP DAQ List processing 
 <br>&nbsp;the referenced models need to be rebuilt. To achieve this you could set the
 <br>&nbsp;Rebuild Options to 'Always', the rebuild options can be found in the model 
 <br>&nbsp;Configuration Parameters under Model Referencing.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;Unexpected error: The number of TIDS used for DAQ Lists was <= 0.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> num_odts_per_daq < 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> ccp_auto_defs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>There were not enough Object Descriptor Tables (ODT's) available to allocate at least 
 <br>one per DAQ list.
 <br>To fix this error, you should increase the total number of ODT's that is specified in 
 <br>the mask of the CAN Calibration Protocol Block.
 <br>For this particular model, you will need at least %&lt;usedNumTIDs&gt; ODT's to avoid this
 <br>error message.   This is the number of DAQ lists that will be created for this model.
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_exit">%exit</span> %&lt;buffer&gt;
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;#define C_NUMBER_OF_ODTS_PER_DAQ %&lt;num_odts_per_daq&gt;
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> ccp_auto_defs
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;%% must add ccp_auto_defs to model.h file explicitly
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_openfile">%openfile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;#include "ccp_auto_defs.h"
 <br>&nbsp;&nbsp;&nbsp;<span class="tlc_closefile">%closefile</span> buffer
 <br>&nbsp;&nbsp;&nbsp;%% LibCacheIncludes only adds to model_private.h
 <br>&nbsp;&nbsp;&nbsp;%%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#LibCacheIncludes">LibCacheIncludes</a>(buffer)
 <br>&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;%% LibAddtoCommonIncludes seems to add to both
 <br>&nbsp;&nbsp;&nbsp;%% model.h and model_private.h with #ifdefs to stop
 <br>&nbsp;&nbsp;&nbsp;%% it being included twice
 <br>&nbsp;&nbsp;&nbsp;%&lt;<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/cachelib.html#LibAddToCommonIncludes">LibAddToCommonIncludes</a>("ccp_auto_defs.h")&gt;
 <br><span class="tlc_endfunction">%endfunction</span>
 <br>&nbsp; <br>%% [EOF] TEMPLATE.tlc
 <br></body></html>