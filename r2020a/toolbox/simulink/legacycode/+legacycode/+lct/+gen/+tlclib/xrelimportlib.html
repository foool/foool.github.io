<html>
<head>

<style>
p {
    color : black; font-family:courier; font-size: 80%;
}
body {
    line-height: 120%; font-family:courier; font-zize:60%;
}
.tlc_func {color : blue; font-weight: bold; font-size:120%;}
.tlc_comment {color : #9aa;}
.tlc_if {color: green;}.tlc_assign {color: green;}.tlc_each {color: green;}.tlc_foreach {color: green;}.tlc_endif {color: green;}.tlc_switch {color: green;}.tlc_case {color: green;}.tlc_return {color: green;}.tlc_elseif {color: green;}.tlc_else {color: green;}.tlc_assert {color: green;}.tlc_endwith {color: green;}.tlc_endforeach {color: green;}.tlc_generatefile {color: green;}.tlc_includepath {color: green;}.tlc_include {color: green;}.tlc_sprintf {color: green;}.tlc_while {color: green;}.tlc_endwhile {color: green;}.tlc_default {color: green;}.tlc_createrecord {color: green;}.tlc_mergerecord {color: green;}.tlc_language {color: green;}.tlc_roll {color: green;}.tlc_endroll {color: green;}.tlc_with {color: green;}.tlc_selectfile {color: green;}.tlc_openfile {color: green;}.tlc_closefile {color: green;}.tlc_def {color: green;}.tlc_undef {color: green;}.tlc_realformat {color: green;}.tlc_endswitch {color: green;}.tlc_addtorecord {color: green;}.tlc_break {color: green;}
.tlc_bifunc {color: brown;}
.tlc_fkw {color:blue; font-weight: 800;}
.tlc_output {color:#FFF; font-style:italic;}
.tlc_mchar {color:purple;}
</style>

</head>
<body>
<span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XRELIMPORTLIB.TLC
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Library<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>support<span style="padding-left:9.5px"></span>import<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>IO<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>using
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>tool.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copyright<span style="padding-left:9.5px"></span>2017-2019<span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>MathWorks,<span style="padding-left:9.5px"></span>Inc.
</span> <br>&nbsp; <br><span class="tlc_if">%if</span> <span class="tlc_bifunc">EXISTS</span>("_CROSSRELEASEIMPORT_") == 0
 <br><span class="tlc_assign">%assign</span> _CROSSRELEASEIMPORT_ = 1
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAddLegacyTypeDefGuard
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Translate<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>def<span style="padding-left:9.5px"></span>guards<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pre-R2016a<span style="padding-left:9.5px"></span>format
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>format.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>needs<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>included<span style="padding-left:9.5px"></span>after<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>header<span style="padding-left:9.5px"></span>files<span style="padding-left:9.5px"></span>from
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>old<span style="padding-left:9.5px"></span>release<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>included,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>before<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>model_types.h<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>release<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>included.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAddLegacyTypeDefGuard" class="tlc_func">XrelAddLegacyTypeDefGuard</a>(typeName) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#ifdef _DEFINED_TYPEDEF_FOR_%<<span>typeName</span>>_
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#define DEFINED_TYPEDEF_FOR_%<<span>typeName</span>>_
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelBackportToLegacyTypeDefGuard
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Translate<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>def<span style="padding-left:9.5px"></span>guards<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>format<span style="padding-left:9.5px"></span>into
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pre-R2016a<span style="padding-left:9.5px"></span>format.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>This<span style="padding-left:9.5px"></span>needs<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>be<span style="padding-left:9.5px"></span>added<span style="padding-left:9.5px"></span>before<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>header<span style="padding-left:9.5px"></span>files<span style="padding-left:9.5px"></span>from
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>old<span style="padding-left:9.5px"></span>release<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>included,<span style="padding-left:9.5px"></span>so<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>header
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>included<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>inside<span style="padding-left:9.5px"></span>another
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>reference<span style="padding-left:9.5px"></span>hierarchy,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>preprocessor<span style="padding-left:9.5px"></span>operating
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>imported<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>can<span style="padding-left:9.5px"></span>determine<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>types<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>been
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>defined<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>current-release<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelBackportToLegacyTypeDefGuard" class="tlc_func">XrelBackportToLegacyTypeDefGuard</a>(typeName) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#ifdef DEFINED_TYPEDEF_FOR_%<<span>typeName</span>>_
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#define _DEFINED_TYPEDEF_FOR_%<<span>typeName</span>>_
 <br>&nbsp;&nbsp;&nbsp;&nbsp;#endif
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelRootOutportOwnsSignal
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>described<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>portRec<span style="padding-left:9.5px"></span>drives<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>output
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>"owned"<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>rather<span style="padding-left:9.5px"></span>than<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>line<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Simulink<span style="padding-left:9.5px"></span>diagram.<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>false<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>all<span style="padding-left:9.5px"></span>portRec<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>correspond<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>ports,<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>ports<span style="padding-left:9.5px"></span>where<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>"owned"<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>diagram<span style="padding-left:9.5px"></span>line.
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelRootOutportOwnsSignal" class="tlc_func">XrelRootOutportOwnsSignal</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetSourceRecord">SLibGetSourceRecord</a>(portRec, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(sigRec, "DrivesRootOutport") &amp;&amp; (sigRec.DrivesRootOutport == "yes") &amp;&amp; <span class="tlc_bifunc">ISFIELD</span>(sigRec, "IsRemovedInIR") &amp;&amp; sigRec.IsRemovedInIR == 1
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetRootOutportRecord
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>ExternalOutput<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>portId.
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>It<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>assumed<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>this<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>corresponds<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>which
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelRootOutportOwnsSignal<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>true.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetRootOutportRecord" class="tlc_func">XrelGetRootOutportRecord</a>(portId)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Determine the number of connection points</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numConnPoints = Connections.DataOutputPort[portId].NumConnPoints
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If there is more than one connection point connected to an Outport,</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% throw an error.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% The workaround in this instance is to assign a storage class and name</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% directly to the signal.  Otherwise, we may end up with a situation</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% where the signal data is copied into a new variable, and copied back</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% over itself, if for example ConnPoint[0] does not share an identifier</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% with the imported code, but ConnPoint[1] has the same identifier as</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% the signal in the imported code.  There does not seem to be an</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% obvious way of manipulating the priorities, other than re-ordering</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ports, which might not be a desirable solution.  Directly</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% configuring the storage class on the signal gives the user the </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% best granularity of control over signal and variable naming.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Start with assumption we have not found an Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foundOutport = TLC_FALSE
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Iterate over connection points</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> kConnPoint = numConnPoints
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Identify the block by its system and block id.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sysID = Connections.DataOutputPort[portId].ConnPoint[kConnPoint].DstBlockAndPortEl[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blkID = Connections.DataOutputPort[portId].ConnPoint[kConnPoint].DstBlockAndPortEl[1]
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the description of the block and </span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> downstreamBlockRef = CompiledModel.System[sysID].Block[blkID]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> downstreamBlockType = downstreamBlockRef.Type
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Check that the block is an Outport</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> downstreamBlockType == "Outport"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Throw an error if this is not the first outport we found</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> foundOutport
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithIdAndArgs">SLibReportErrorWithIdAndArgs</a>("Simulink:tools:LCTCannotDriveMultipleRootOutportsWithStorageClass", ["%<portId+1>", "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibUnmangledPathName">LibUnmangledPathName</a>(Name)>"])>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Cache that we've found an Outport and get the corresponding</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ExternalOutput record.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> foundOutport = TLC_TRUE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> downstreamBlockGrSrc = downstreamBlockRef.GrSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currExternalOutput = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetExternalOutputByGrSrc">XrelGetExternalOutputByGrSrc</a>(downstreamBlockGrSrc)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% As we only run this function for block ports that drive a root</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% output port, at least one downstream block will have been an "Outport"</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> currExternalOutput
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetExternalOutputByGrSrc
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Given<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>GrSrc,<span style="padding-left:9.5px"></span>return<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>external<span style="padding-left:9.5px"></span>output
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetExternalOutputByGrSrc" class="tlc_func">XrelGetExternalOutputByGrSrc</a>(downstreamBlockGrSrc)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Iterate over ExternalOutports and find the one whose GrSrc matches</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> numExternalOutputs = ::CompiledModel.ExternalOutputs.NumExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_foreach">%foreach</span> kExternalOutput = numExternalOutputs
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currExternalOutput = ::CompiledModel.ExternalOutputs.ExternalOutput[kExternalOutput]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> currExternalOutput.GrSrc[0] == downstreamBlockGrSrc[0] &amp;&amp; currExternalOutput.GrSrc[1] == downstreamBlockGrSrc[1]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Break loop by returning early</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> currExternalOutput
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endforeach">%endforeach</span>
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% This line should NEVER be reached.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_error">%error</span> "Did not find corresponding ExternalOutput"
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetEffectiveSigRec
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>"effective"<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>(as<span style="padding-left:9.5px"></span>far<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>CSC<span style="padding-left:9.5px"></span>behavior<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>concerned)
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>i.e.,<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>sigRec<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>SLibGetSourceRecord<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>line-owned<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>and
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>ExternalOutput<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>owned<span style="padding-left:9.5px"></span>signal.
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetEffectiveSigRec" class="tlc_func">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetSourceRecord">SLibGetSourceRecord</a>(portRec, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Root inports don't have a GrSrc field when code is generated</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% using the Model Reference code interface</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasGrSrc = <span class="tlc_bifunc">ISFIELD</span>(sigRec, "GrSrc")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> hasGrSrc
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> grSrcSize = <span class="tlc_bifunc">SIZE</span>(sigRec.GrSrc)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isOutport = grSrcSize[1] == 4
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isOutport = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isOutport
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelRootOutportOwnsSignal">XrelRootOutportOwnsSignal</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetRootOutportRecord">XrelGetRootOutportRecord</a>( sigRec.GrSrc[2])
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = sigRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = sigRec
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetPortRecord
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>indexed<span style="padding-left:9.5px"></span>by<span style="padding-left:9.5px"></span>portId
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetPortRecord" class="tlc_func">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> portType == "Output"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRecord = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#FcnGetOutputPortRecord">FcnGetOutputPortRecord</a>(portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> portType == "Input"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRecord = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#FcnGetInputPortRecord">FcnGetInputPortRecord</a>(portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithIdAndArgs">SLibReportErrorWithIdAndArgs</a>("Simulink:tools:LCTGlobalInputOutputOnly", "%<<span>portType</span>>")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> portRecord
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetStorageClass
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>storage<span style="padding-left:9.5px"></span>class<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>connected<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetStorageClass" class="tlc_func">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> portType == "Output"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>("Output", portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelRootOutportOwnsSignal">XrelRootOutportOwnsSignal</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> effectiveSigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetRootOutportRecord">XrelGetRootOutportRecord</a>(portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = effectiveSigRec.StorageClass
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalStorageClass">LibBlockOutputSignalStorageClass</a>(portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> portType == "Input"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalStorageClass">LibBlockInputSignalStorageClass</a>(portId,0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithIdAndArgs">SLibReportErrorWithIdAndArgs</a>("Simulink:tools:LCTGlobalInputOutputOnly", "%<<span>portType</span>>")>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> sigStorageClass
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetFormattedStorageClass
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>storage<span style="padding-left:9.5px"></span>class<span style="padding-left:9.5px"></span>(formatted<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>custom<span style="padding-left:9.5px"></span>CSC)
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetFormattedStorageClass" class="tlc_func">XrelGetFormattedStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetStorageClass">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the name of the custom storage class</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetCSCDefForData">SLibGetCSCDefForData</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<span>sigStorageClass</span>> (%<<span>cscRec.Name</span>>)"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = sigStorageClass
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetSignalIdentifier
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>way<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>accessing<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>or
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetSignalIdentifier" class="tlc_func">XrelGetSignalIdentifier</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetStorageClass">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Get the way of accessing the custom data</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibAccessCustomData">LibAccessCustomData</a>(sigRec, "contents", "", "", "")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> portType == "Output" &amp;&amp; <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelRootOutportOwnsSignal">XrelRootOutportOwnsSignal</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If our effective signal record is an external outport record the identifier is what we want</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = sigRec.Identifier
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If not then we can just get the canonical argument</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#FcnGetCanonicalArg">FcnGetCanonicalArg</a>(portRec, 0, TLC_TRUE, TLC_FALSE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelSignalIdentifierMatches
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>identifier<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>numbered<span style="padding-left:9.5px"></span>portId
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>matches<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>varName
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>which<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>compare<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>identifier
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelSignalIdentifierMatches" class="tlc_func">XrelSignalIdentifierMatches</a>(portType, portId, varName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the storage class is ExportedGlobal, ImportedExtern or ImportedExternPointer</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% then we can just compare the identifier.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockSignalIdentifier = "%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetSignalIdentifier">XrelGetSignalIdentifier</a>(portType, portId)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ( (blockSignalIdentifier == varName) | (blockSignalIdentifier == "(*%<<span>varName</span>>)") | (blockSignalIdentifier == "&amp;%<<span>varName</span>>[0]") )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelIncompatibleStorageClass
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Throws<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>error<span style="padding-left:9.5px"></span>message<span style="padding-left:9.5px"></span>indicating<span style="padding-left:9.5px"></span>that<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>storage<span style="padding-left:9.5px"></span>class<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>attached<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>incompatible<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>underlying<span style="padding-left:9.5px"></span>implementation
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelIncompatibleStorageClassError" class="tlc_func">XrelIncompatibleStorageClassError</a>(block, portType, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetFormattedStorageClass">XrelGetFormattedStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithIdAndArgs">SLibReportErrorWithIdAndArgs</a>("Simulink:tools:LCTGlobalIncompatibleStorageClass", ["%<<span>portType</span>>", "%<portId+1>", "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>", "%<<span>sigStorageClass</span>>", "%<<span>varName</span>>"])>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_fkw">%function</span> <a id="XrelIncompatibleRootIOStorageClassError" class="tlc_func">XrelIncompatibleRootIOStorageClassError</a>(block, portType, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#SLibReportErrorWithIdAndArgs">SLibReportErrorWithIdAndArgs</a>("Simulink:tools:LCTGlobalIncompatibleRootIOStorageClass", ["%<<span>portType</span>>", "%<portId+1>", "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetFormattedBlockPath">LibGetFormattedBlockPath</a>(block)>", "%<<span>varName</span>>"])>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelSignalIsPointer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>type
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelSignalIsPointer" class="tlc_func">XrelSignalIsPointer</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetStorageClass">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Work out if the data access method is pointer for custom storage</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% class</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetCSCDefForData">SLibGetCSCDefForData</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscDataAccess = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetDataAccess">SLibGetDataAccess</a>(cscRec, sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer = (cscDataAccess == "Pointer")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Otherwise, the only built-in pointer type is ImportedExternPointer</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer = (sigStorageClass == "ImportedExternPointer")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = isPointer
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelSignalIsFileScope
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>scope
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>data<span style="padding-left:9.5px"></span>scope
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelSignalIsFileScope" class="tlc_func">XrelSignalIsFileScope</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetStorageClass">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFileScope = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCIsSpecifiedScope">XrelCSCIsSpecifiedScope</a>(portRec, "File")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFileScope = TLC_FALSE
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = isFileScope
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelCSCIsSpecifiedScope
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>CSC<span style="padding-left:9.5px"></span>associate<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>portRec<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>specified<span style="padding-left:9.5px"></span>scope<span style="padding-left:9.5px"></span>specifiedScope
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelCSCIsSpecifiedScope" class="tlc_func">XrelCSCIsSpecifiedScope</a>(portRec, specifiedScope)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetCSCDefForData">SLibGetCSCDefForData</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscDataScope = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetDataScope">SLibGetDataScope</a>(cscRec, sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = (cscDataScope == specifiedScope)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelCSCGetOwner
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Get<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>owner<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>from<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>CSC
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelCSCGetOwner" class="tlc_func">XrelCSCGetOwner</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetCSCDefForData">SLibGetCSCDefForData</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> customAttrProps = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetCustomStorageAttributes">LibGetCustomStorageAttributes</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetInstanceSpecificProp">LibGetInstanceSpecificProp</a>(cscRec, customAttrProps, "Owner")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISEMPTY</span>(retVal)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelCSCHasDefinitionFile
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>CSC<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>definition<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>it
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelCSCHasDefinitionFile" class="tlc_func">XrelCSCHasDefinitionFile</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEffectiveSigRec">XrelGetEffectiveSigRec</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> cscRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#SLibGetCSCDefForData">SLibGetCSCDefForData</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> customAttrProps = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetCustomStorageAttributes">LibGetCustomStorageAttributes</a>(sigRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> definitionFile = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/mw/customstoragelib.html#LibGetInstanceSpecificProp">LibGetInstanceSpecificProp</a>(cscRec, customAttrProps, "DefinitionFile")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> !<span class="tlc_bifunc">ISEMPTY</span>(definitionFile)
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelOwnerIsCurrentModel
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Compare<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>owner<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>model<span style="padding-left:9.5px"></span>name
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelOwnerIsCurrentModel" class="tlc_func">XrelOwnerIsCurrentModel</a>(owner)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Owner is current model if:</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%  * The owner field is empty</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%  * The owner field matches the current model</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%  * Data ownership has been disabled</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> currentModel = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/utillib.html#LibGetModelName">LibGetModelName</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> (owner == "") || (owner == currentModel) || !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetEnableDataOwnership">XrelGetEnableDataOwnership</a>()
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelGetEnableDataOwnership
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Return<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>EnableDataOwnership<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>set<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>integration<span style="padding-left:9.5px"></span>model
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelGetEnableDataOwnership" class="tlc_func">XrelGetEnableDataOwnership</a>()
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = (::CompiledModel.ConfigSet.EnableDataOwnership == TLC_TRUE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelSignalIsRootIOPort
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Returns<span style="padding-left:9.5px"></span>true<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>associated<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>connected<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>a
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>root<span style="padding-left:9.5px"></span>I/O<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>containing<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelSignalIsRootIOPort" class="tlc_func">XrelSignalIsRootIOPort</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> mapSource = <span class="tlc_bifunc">IDNUM</span>(portRec.SignalSrc[0])[0]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% See <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html">blkiolib.tlc</a> for the definitions of the values of mapSource</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% (SLibGetSourceRecordAndMapInfo):</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> portType == "Input"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( mapSource == "U" || mapSource == "B" )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetSourceRecord">SLibGetSourceRecord</a>(portRec, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> drivesRootOutport = <span class="tlc_bifunc">ISFIELD</span>(sigRec, "DrivesRootOutport") &amp;&amp; sigRec.DrivesRootOutport == "yes"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ...
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;( mapSource == "Y" || mapSource == "B" || drivesRootOutport )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelVerifyPointer
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Verify<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>pointer,<span style="padding-left:9.5px"></span>depending<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>verifySense
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>throw<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>error<span style="padding-left:9.5px"></span>message<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>isPointer<span style="padding-left:9.5px"></span>!=<span style="padding-left:9.5px"></span>verifySense
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>verifySense:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TLC_TRUE<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>required,<span style="padding-left:9.5px"></span>TLC_FALSE<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>prohibited
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelVerifyPointer" class="tlc_func">XrelVerifyPointer</a>(block, portType, portId, varName, verifySense) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isPointer = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIsPointer">XrelSignalIsPointer</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isPointer != verifySense
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleStorageClassError">XrelIncompatibleStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelVerifyFileScope
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Verify<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>porr<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>scope,<span style="padding-left:9.5px"></span>depending<span style="padding-left:9.5px"></span>on<span style="padding-left:9.5px"></span>verifySense
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>throw<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>error<span style="padding-left:9.5px"></span>message<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>isFileScope<span style="padding-left:9.5px"></span>!=<span style="padding-left:9.5px"></span>verifySense
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>verifySense:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>TLC_TRUE<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>scope<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>required,<span style="padding-left:9.5px"></span>TLC_FALSE<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>file<span style="padding-left:9.5px"></span>scope<span style="padding-left:9.5px"></span>is<span style="padding-left:9.5px"></span>prohibited
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelVerifyFileScope" class="tlc_func">XrelVerifyFileScope</a>(block, portType, portId, varName, verifySense) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isFileScope = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIsFileScope">XrelSignalIsFileScope</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isFileScope != verifySense
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleStorageClassError">XrelIncompatibleStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelValidateExportedGlobalVariable
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Used<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>throw<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>informative<span style="padding-left:9.5px"></span>error<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>was<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>an<span style="padding-left:9.5px"></span>exported<span style="padding-left:9.5px"></span>global<span style="padding-left:9.5px"></span>type<span style="padding-left:9.5px"></span>and<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>conflicting<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>with<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>connected<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>integration<span style="padding-left:9.5px"></span>model.
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portType:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>"Output"<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>"Input"
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelValidateExportedGlobalVariable" class="tlc_func">XrelValidateExportedGlobalVariable</a>(block, portType, portId, varName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>(portType, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Do not permit exported global variables from the legacy code to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% connect to a model I/O port - because it will create an</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% inconsistent CodeInfo.  Allow an exception for custom storage</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% classes where the owner is another model.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isRootIO = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIsRootIOPort">XrelSignalIsRootIOPort</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigStorageClass = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetStorageClass">XrelGetStorageClass</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>(portType, portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isRootIO
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isImported = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCIsSpecifiedScope">XrelCSCIsSpecifiedScope</a>(portRec, "Imported")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasDefinitionFile = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCHasDefinitionFile">XrelCSCHasDefinitionFile</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> owner = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCGetOwner">XrelCSCGetOwner</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isImported || ( <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelOwnerIsCurrentModel">XrelOwnerIsCurrentModel</a>(owner) &amp;&amp; !hasDefinitionFile )
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% We must NOT have an imported storage class on root IO</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% that has this function called on it.  And we must not</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% have an exported storage class owned by the current</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% model.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% An exported storage class owned by ANOTHER</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% model or in a file is OK though.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleRootIOStorageClassError">XrelIncompatibleRootIOStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleRootIOStorageClassError">XrelIncompatibleRootIOStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% For internal model signals, it is adequate to validate that the</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% connected storage class is an imported type, or owned by another</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% component:</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%      ImportedExtern</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%%      Imported CSC</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> sigStorageClass == "ImportedExtern"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% The only built-in storage class permitted in this scenario</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is ImportedExtern</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_elseif">%elseif</span> sigStorageClass == "Custom"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Allow an imported scope custom storage class</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> isImported = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCIsSpecifiedScope">XrelCSCIsSpecifiedScope</a>(portRec, "Imported")
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> hasDefinitionFile = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCHasDefinitionFile">XrelCSCHasDefinitionFile</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> owner = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelCSCGetOwner">XrelCSCGetOwner</a>(portRec)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !isImported &amp;&amp; <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelOwnerIsCurrentModel">XrelOwnerIsCurrentModel</a>(owner) &amp;&amp; !hasDefinitionFile
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% Allow an exported scope custom storage class if the owner</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% is set to something other than empty or the current model</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleStorageClassError">XrelIncompatibleStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% ... as long as it is not a pointer</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, portType, portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelIncompatibleStorageClassError">XrelIncompatibleStorageClassError</a>(block, portType, portId, varName)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareOutputVariable
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Declares<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>implemented<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareOutputVariable" class="tlc_func">XrelDeclareOutputVariable</a>(block, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalDataTypeName">LibBlockOutputSignalDataTypeName</a>(portId,"")> %<<span>varName</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareInputVariable
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelDeclareOutputVariable<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareInputVariable" class="tlc_func">XrelDeclareInputVariable</a>(block, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalDataTypeName">LibBlockInputSignalDataTypeName</a>(portId,"")> %<<span>varName</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareOutputArray
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Declares<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>implemented<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varSize:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>elements<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>array
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareOutputArray" class="tlc_func">XrelDeclareOutputArray</a>(block, portId, varName, varSize) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalDataTypeName">LibBlockOutputSignalDataTypeName</a>(portId,"")> %<<span>varName</span>>[%<<span>varSize</span>>];"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareInputArray
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelDeclareOutputArray<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareInputArray" class="tlc_func">XrelDeclareInputArray</a>(block, portId, varName, varSize) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalDataTypeName">LibBlockInputSignalDataTypeName</a>(portId,"")> %<<span>varName</span>>[%<<span>varSize</span>>];"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareOutputPointer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Declares<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>implemented<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareOutputPointer" class="tlc_func">XrelDeclareOutputPointer</a>(block, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalDataTypeName">LibBlockOutputSignalDataTypeName</a>(portId,"")> *%<<span>varName</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Output", portId, varName, TLC_TRUE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelDeclareInputPointer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelDeclareOutputPointer,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelDeclareInputPointer" class="tlc_func">XrelDeclareInputPointer</a>(block, portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> portRec = <a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelGetPortRecord">XrelGetPortRecord</a>("Input", portId)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> sigRec = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#SLibGetSourceRecord">SLibGetSourceRecord</a>(portRec, 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> <span class="tlc_bifunc">ISFIELD</span>(sigRec, "ConstExpr") &amp;&amp; (sigRec.ConstExpr == TLC_TRUE)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "const %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalDataTypeName">LibBlockInputSignalDataTypeName</a>(portId,"")> *%<<span>varName</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalDataTypeName">LibBlockInputSignalDataTypeName</a>(portId,"")> *%<<span>varName</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Input", portId, varName, TLC_TRUE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignOutputPointer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Assign<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>if<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>pointer<span style="padding-left:9.5px"></span>has<span style="padding-left:9.5px"></span>not<span style="padding-left:9.5px"></span>already<span style="padding-left:9.5px"></span>been<span style="padding-left:9.5px"></span>implemented<span style="padding-left:9.5px"></span>as<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>instance
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignOutputPointer" class="tlc_func">XrelAssignOutputPointer</a>(block, portId, isInit, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the output signal corresponds to a global variable, then</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% it is sufficient to assign the pointer during initialization</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% but if the output signal is a local variable then we have to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% assign the pointer to the new address at each call.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isInit || ( <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalIsGlobal">LibBlockOutputSignalIsGlobal</a>(portId) == 0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<span>varName</span>> = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignalAddr">LibBlockOutputSignalAddr</a>(portId, "", "", 0)>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Output", portId, varName, TLC_TRUE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Output", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignInputPointer
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelDeclareOutputPointer,<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignInputPointer" class="tlc_func">XrelAssignInputPointer</a>(block, portId, isInit, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% If the input signal corresponds to a global variable, then</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% it is sufficient to assign the pointer during initialization</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% but if the input signal is a local variable then we have to</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_comment">%% assign the pointer to the new address at each call.</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> isInit || !<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockSrcSignalIsGlobalAndModifiable">LibBlockSrcSignalIsGlobalAndModifiable</a>(portId,0)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<span>varName</span>> = %<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignalAddr">LibBlockInputSignalAddr</a>(portId, "", "", 0)>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyPointer">XrelVerifyPointer</a>(block, "Input", portId, varName, TLC_TRUE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelVerifyFileScope">XrelVerifyFileScope</a>(block, "Input", portId, varName, TLC_FALSE)>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignOutputVariableSignal
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copies<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>contents<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>scalar<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>connected<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>integration<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>except
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>common<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>(i.e.,<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>same<span style="padding-left:9.5px"></span>variable)
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignOutputVariableSignal" class="tlc_func">XrelAssignOutputVariableSignal</a>(block, portId, varName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockY = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portId, "", "", 0)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> xrelY  = "%<<span>varName</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<span>blockY</span>> = %<<span>xrelY</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignInputVariableSignal
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelAssignOutputVariableSignal<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignInputVariableSignal" class="tlc_func">XrelAssignInputVariableSignal</a>(block, portId, varName) <span class="tlc_fkw">void</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockU = "%<<a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignal">LibBlockInputSignal</a>(portId, "", "", 0)>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> xrelU  = "%<<span>varName</span>>"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = "%<<span>xrelU</span>> = %<<span>blockU</span>>;"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_else">%else</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> retVal = ""
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_return">%return</span> retVal 
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignOutputArraySignal
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Copies<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>contents<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>array<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>output
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>IMPORTED<span style="padding-left:9.5px"></span>code<span style="padding-left:9.5px"></span>into<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variable<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>signal<span style="padding-left:9.5px"></span>
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>connected<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>S-function<span style="padding-left:9.5px"></span>block<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>integration<span style="padding-left:9.5px"></span>model,<span style="padding-left:9.5px"></span>except
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>when<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>variables<span style="padding-left:9.5px"></span>have<span style="padding-left:9.5px"></span>a<span style="padding-left:9.5px"></span>common<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>(i.e.,<span style="padding-left:9.5px"></span>are<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>same<span style="padding-left:9.5px"></span>variable)
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>block:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>The<span style="padding-left:9.5px"></span>TLC<span style="padding-left:9.5px"></span>record<span style="padding-left:9.5px"></span>corresponding<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>current<span style="padding-left:9.5px"></span>block
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>portId:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Output<span style="padding-left:9.5px"></span>or<span style="padding-left:9.5px"></span>input<span style="padding-left:9.5px"></span>port<span style="padding-left:9.5px"></span>index
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varName:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Variable<span style="padding-left:9.5px"></span>name<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>legacy<span style="padding-left:9.5px"></span>code
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>varSize:<span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span><span style="padding-left:9.5px"></span>Number<span style="padding-left:9.5px"></span>of<span style="padding-left:9.5px"></span>elements<span style="padding-left:9.5px"></span>in<span style="padding-left:9.5px"></span>the<span style="padding-left:9.5px"></span>array
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignOutputArraySignal" class="tlc_func">XrelAssignOutputArraySignal</a>(block, portId, varName, varSize) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Output", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rollVars = [ "y%<<span>portId</span>>"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rollRegion = block.DataOutputPort[portId].SignalOffset
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_roll">%roll</span> sigIdx=rollRegion, lcv=RollThreshold, block, "Roller", rollVars
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockY = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockOutputSignal">LibBlockOutputSignal</a>(portId, "", lcv, sigIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> xrelY  = "%<<span>varName</span>>[%< lcv == "" ? sigIdx : lcv>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>blockY</span>> = %<<span>xrelY</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endroll">%endroll</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br>&nbsp; <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>XrelAssignInputArraySignal
</span> <br><span class="tlc_comment">%%
</span> <br><span class="tlc_comment">%%<span style="padding-left:9.5px"></span>Analogous<span style="padding-left:9.5px"></span>to<span style="padding-left:9.5px"></span>XrelAssignOutputArraySignal<span style="padding-left:9.5px"></span>but<span style="padding-left:9.5px"></span>for<span style="padding-left:9.5px"></span>inputs
</span> <br><span class="tlc_fkw">%function</span> <a id="XrelAssignInputArraySignal" class="tlc_func">XrelAssignInputArraySignal</a>(block, portId, varName, varSize) <span class="tlc_fkw">Output</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_if">%if</span> !<a href="https://foool.github.io/MATLAB/R2020a/toolbox/simulink/legacycode/+legacycode/+lct/+gen/+tlclib/xrelimportlib.html#XrelSignalIdentifierMatches">XrelSignalIdentifierMatches</a>("Input", portId, varName)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rollVars = [ "u%<<span>portId</span>>"]
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> rollRegion = block.DataInputPort[portId].SignalOffset
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_roll">%roll</span> sigIdx=rollRegion, lcv=RollThreshold, block, "Roller", rollVars
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> blockU = <a href="https://foool.github.io/MATLAB/R2020a/rtw/c/tlc/lib/blkiolib.html#LibBlockInputSignal">LibBlockInputSignal</a>(portId, "", lcv, sigIdx)
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_assign">%assign</span> xrelU  = "%<<span>varName</span>>[%< lcv == "" ? sigIdx : lcv>]"
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;%<<span>xrelU</span>> = %<<span>blockU</span>>;
 <br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endroll">%endroll</span>
 <br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="tlc_endif">%endif</span>
 <br><span class="tlc_fkw">%endfunction</span>
 <br>&nbsp; <br><span class="tlc_endif">%endif</span>  <span class="tlc_comment">%%MATCHES if <span class="tlc_bifunc">EXISTS</span>("_CROSSRELEASEIMPORT_") == 0</span>
 <br></body></html>